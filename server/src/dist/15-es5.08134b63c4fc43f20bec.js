function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"O+SD":function(e,t,i){"use strict";i.r(t),i.d(t,"customCurrencyMaskConfig",(function(){return S})),i.d(t,"CriarProdutoModule",(function(){return C}));var n,a,s,r=i("ofXK"),u=i("3Pt+"),l=i("fyq4"),o=i("fXoL"),c=i("tyNb"),h=i("aceb"),p=new o.r("currency.mask.config"),d=function(){function e(t){_classCallCheck(this,e),this.htmlInputElement=t}return _createClass(e,[{key:"setCursorAt",value:function(e){if(this.htmlInputElement.setSelectionRange)this.htmlInputElement.focus(),this.htmlInputElement.setSelectionRange(e,e);else if(this.htmlInputElement.createTextRange){var t=this.htmlInputElement.createTextRange();t.collapse(!0),t.moveEnd("character",e),t.moveStart("character",e),t.select()}}},{key:"updateValueAndCursor",value:function(e,t,i){this.rawValue=e,this.setCursorAt(i-=t-e.length)}},{key:"canInputMoreNumbers",get:function(){var e=!(this.rawValue.length>=this.htmlInputElement.maxLength&&this.htmlInputElement.maxLength>=0),t=this.inputSelection.selectionStart,i=this.inputSelection.selectionEnd,n=!(t==i||!this.htmlInputElement.value.substring(t,i).match(/[^0-9\u0660-\u0669\u06F0-\u06F9]/)),a="0"==this.htmlInputElement.value.substring(0,1);return e||n||a}},{key:"inputSelection",get:function(){var e=0,t=0;if("number"==typeof this.htmlInputElement.selectionStart&&"number"==typeof this.htmlInputElement.selectionEnd)e=this.htmlInputElement.selectionStart,t=this.htmlInputElement.selectionEnd;else{var i=document.selection.createRange();if(i&&i.parentElement()==this.htmlInputElement){var n=this.htmlInputElement.value.length,a=this.htmlInputElement.value.replace(/\r\n/g,"\n"),s=this.htmlInputElement.createTextRange();s.moveToBookmark(i.getBookmark());var r=this.htmlInputElement.createTextRange();r.collapse(!1),s.compareEndPoints("StartToEnd",r)>-1?e=t=n:(e=-s.moveStart("character",-n),e+=a.slice(0,e).split("\n").length-1,s.compareEndPoints("EndToEnd",r)>-1?t=n:(t=-s.moveEnd("character",-n),t+=a.slice(0,t).split("\n").length-1))}}return{selectionStart:e,selectionEnd:t}}},{key:"rawValue",get:function(){return this.htmlInputElement&&this.htmlInputElement.value},set:function(e){this._storedRawValue=e,this.htmlInputElement&&(this.htmlInputElement.value=e)}},{key:"storedRawValue",get:function(){return this._storedRawValue}}]),e}(),f=function(){function e(t,i){_classCallCheck(this,e),this.htmlInputElement=t,this.options=i,this.PER_AR_NUMBER=new Map,this.inputManager=new d(t),this.initialize()}return _createClass(e,[{key:"initialize",value:function(){this.PER_AR_NUMBER.set("\u06f0","0"),this.PER_AR_NUMBER.set("\u06f1","1"),this.PER_AR_NUMBER.set("\u06f2","2"),this.PER_AR_NUMBER.set("\u06f3","3"),this.PER_AR_NUMBER.set("\u06f4","4"),this.PER_AR_NUMBER.set("\u06f5","5"),this.PER_AR_NUMBER.set("\u06f6","6"),this.PER_AR_NUMBER.set("\u06f7","7"),this.PER_AR_NUMBER.set("\u06f8","8"),this.PER_AR_NUMBER.set("\u06f9","9"),this.PER_AR_NUMBER.set("\u0660","0"),this.PER_AR_NUMBER.set("\u0661","1"),this.PER_AR_NUMBER.set("\u0662","2"),this.PER_AR_NUMBER.set("\u0663","3"),this.PER_AR_NUMBER.set("\u0664","4"),this.PER_AR_NUMBER.set("\u0665","5"),this.PER_AR_NUMBER.set("\u0666","6"),this.PER_AR_NUMBER.set("\u0667","7"),this.PER_AR_NUMBER.set("\u0668","8"),this.PER_AR_NUMBER.set("\u0669","9")}},{key:"addNumber",value:function(e){var t=String.fromCharCode(e);if(this.rawValue){var i=this.inputSelection.selectionStart,n=this.inputSelection.selectionEnd;this.rawValue=this.rawValue.substring(0,i)+t+this.rawValue.substring(n,this.rawValue.length),this.updateFieldValue(i+1)}else this.rawValue=this.applyMask(!1,t),this.updateFieldValue()}},{key:"applyMask",value:function(e,t){var i=this.options,n=i.allowNegative,a=i.decimal,s=i.precision,r=i.prefix,u=i.suffix,l=i.thousands,o=i.min,c=i.max,h=(t=e?new Number(t).toFixed(s):t).replace(/[^0-9\u0660-\u0669\u06F0-\u06F9]/g,"");if(!h)return"";var p=h.slice(0,h.length-s).replace(/^\u0660*/g,"").replace(/^\u06F0*/g,"").replace(/^0*/g,"");""==p&&(p="0");var d=parseInt(p);p=p.replace(/\B(?=([0-9\u0660-\u0669\u06F0-\u06F9]{3})+(?![0-9\u0660-\u0669\u06F0-\u06F9]))/g,l),l&&p.startsWith(l)&&(p=p.substring(1));var f=p,v=h.slice(h.length-s),m=parseInt(v)||0,g=t.indexOf("-")>-1;c=this.isNullOrUndefined(c)||this.isNullOrUndefined(o)?c:Math.max(c,o);var b=d+m/100;return b=g?-b:b,!this.isNullOrUndefined(c)&&b>c?this.applyMask(!0,c+""):!this.isNullOrUndefined(o)&&b<o?this.applyMask(!0,o+""):(s>0&&(f+="0"==f&&v.length<s?a+"0".repeat(s-1)+v:a+v),(g&&n&&0!=b?"-":"")+r+f+u)}},{key:"clearMask",value:function(e){if(this.isNullable()&&""===e)return null;var t=(e||"0").replace(this.options.prefix,"").replace(this.options.suffix,"");return this.options.thousands&&(t=t.replace(new RegExp("\\"+this.options.thousands,"g"),"")),this.options.decimal&&(t=t.replace(this.options.decimal,".")),this.PER_AR_NUMBER.forEach((function(e,i){var n=new RegExp(i,"g");t=t.replace(n,e)})),parseFloat(t)}},{key:"changeToNegative",value:function(){this.options.allowNegative&&""!=this.rawValue&&"-"!=this.rawValue.charAt(0)&&0!=this.value&&(this.rawValue=this.applyMask(!1,"-"+this.rawValue))}},{key:"changeToPositive",value:function(){this.rawValue=this.applyMask(!1,this.rawValue.replace("-",""))}},{key:"removeNumber",value:function(e){if(this.isNullable()&&0==this.value)this.rawValue=null;else{var t=this.inputSelection.selectionEnd,i=this.inputSelection.selectionStart;i>this.rawValue.length-this.options.suffix.length&&(t=this.rawValue.length-this.options.suffix.length,i=this.rawValue.length-this.options.suffix.length);var n=this.rawValue.substr(i-1,1).match(/\d/)?0:-1;(8!=e||i-1!=0||this.rawValue.substr(i,1).match(/\d/))&&(46!=e&&63272!=e||0!==i||this.rawValue.substr(i+1,1).match(/\d/))||(n=1),t=46==e||63272==e?t+1:t,i=8==e?i-1:i,this.rawValue=this.rawValue.substring(0,i)+this.rawValue.substring(t,this.rawValue.length),this.updateFieldValue(i+n)}}},{key:"updateFieldValue",value:function(e){var t=this.applyMask(!1,this.rawValue||"");this.inputManager.updateValueAndCursor(t,this.rawValue.length,e=null==e?this.rawValue.length:e)}},{key:"updateOptions",value:function(e){var t=this.value;this.options=e,this.value=t}},{key:"prefixLength",value:function(){return this.options.prefix.length}},{key:"isNullable",value:function(){return this.options.nullable}},{key:"isNullOrUndefined",value:function(e){return null==e}},{key:"canInputMoreNumbers",get:function(){return this.inputManager.canInputMoreNumbers}},{key:"inputSelection",get:function(){return this.inputManager.inputSelection}},{key:"rawValue",get:function(){return this.inputManager.rawValue},set:function(e){this.inputManager.rawValue=e}},{key:"storedRawValue",get:function(){return this.inputManager.storedRawValue}},{key:"value",get:function(){return this.clearMask(this.rawValue)},set:function(e){this.rawValue=this.applyMask(!0,""+e)}}]),e}(),v=function(){function e(t,i){_classCallCheck(this,e),this.inputService=new f(t,i)}return _createClass(e,[{key:"handleCut",value:function(e){var t=this;setTimeout((function(){t.inputService.updateFieldValue(),t.setValue(t.inputService.value),t.onModelChange(t.inputService.value)}),0)}},{key:"handleInput",value:function(e){var t=this.inputService.rawValue.charCodeAt(this.inputService.rawValue.length-1),i=this.inputService.rawValue.length,n=this.inputService.inputSelection.selectionEnd,a=this.inputService.storedRawValue.length;if(this.inputService.rawValue=this.inputService.storedRawValue,i==n&&1==Math.abs(i-a)){if(i<a&&this.inputService.removeNumber(8),i>a)switch(t){case 43:this.inputService.changeToPositive();break;case 45:this.inputService.changeToNegative();break;default:if(!this.inputService.canInputMoreNumbers)return;this.inputService.addNumber(t)}this.setCursorPosition(e),this.onModelChange(this.inputService.value)}else this.setCursorPosition(e)}},{key:"handleKeydown",value:function(e){var t=e.which||e.charCode||e.keyCode;if(8==t||46==t||63272==t){e.preventDefault();var i=Math.abs(this.inputService.inputSelection.selectionEnd-this.inputService.inputSelection.selectionStart);0==i&&(this.inputService.removeNumber(t),this.onModelChange(this.inputService.value)),i>=this.inputService.rawValue.length-this.inputService.prefixLength()&&this.clearValue()}}},{key:"clearValue",value:function(){this.setValue(this.inputService.isNullable()?null:0),this.onModelChange(this.inputService.value)}},{key:"handleKeypress",value:function(e){var t=e.which||e.charCode||e.keyCode;if(97!==t||!e.ctrlKey){switch(t){case void 0:case 9:case 13:case 37:case 39:return;case 43:this.inputService.changeToPositive();break;case 45:this.inputService.changeToNegative();break;default:this.inputService.canInputMoreNumbers&&(Math.abs(this.inputService.inputSelection.selectionEnd-this.inputService.inputSelection.selectionStart)==this.inputService.rawValue.length&&this.setValue(null),this.inputService.addNumber(t))}e.preventDefault(),this.onModelChange(this.inputService.value)}}},{key:"handlePaste",value:function(e){var t=this;setTimeout((function(){t.inputService.updateFieldValue(),t.setValue(t.inputService.value),t.onModelChange(t.inputService.value)}),1)}},{key:"updateOptions",value:function(e){this.inputService.updateOptions(e)}},{key:"getOnModelChange",value:function(){return this.onModelChange}},{key:"setOnModelChange",value:function(e){this.onModelChange=e}},{key:"getOnModelTouched",value:function(){return this.onModelTouched}},{key:"setOnModelTouched",value:function(e){this.onModelTouched=e}},{key:"setValue",value:function(e){this.inputService.value=e}},{key:"setCursorPosition",value:function(e){setTimeout((function(){e.target.setSelectionRange(e.target.value.length,e.target.value.length)}),0)}}]),e}(),m={provide:u.l,useExisting:Object(o.W)((function(){return g})),multi:!0},g=((n=function(){function e(t,i,n){_classCallCheck(this,e),this.currencyMaskConfig=t,this.elementRef=i,this.keyValueDiffers=n,this.options={},this.optionsTemplate={align:"right",allowNegative:!0,allowZero:!0,decimal:".",precision:2,prefix:"$ ",suffix:"",thousands:",",nullable:!1},t&&(this.optionsTemplate=t),this.keyValueDiffer=n.find({}).create()}return _createClass(e,[{key:"ngAfterViewInit",value:function(){this.elementRef.nativeElement.style.textAlign=this.options&&this.options.align?this.options.align:this.optionsTemplate.align}},{key:"ngDoCheck",value:function(){this.keyValueDiffer.diff(this.options)&&(this.elementRef.nativeElement.style.textAlign=this.options.align?this.options.align:this.optionsTemplate.align,this.inputHandler.updateOptions(Object.assign({},this.optionsTemplate,this.options)))}},{key:"ngOnInit",value:function(){this.inputHandler=new v(this.elementRef.nativeElement,Object.assign({},this.optionsTemplate,this.options))}},{key:"handleBlur",value:function(e){this.inputHandler.getOnModelTouched().apply(e)}},{key:"handleCut",value:function(e){this.isChromeAndroid()||this.inputHandler.handleCut(e)}},{key:"handleInput",value:function(e){this.isChromeAndroid()&&this.inputHandler.handleInput(e)}},{key:"handleKeydown",value:function(e){this.isChromeAndroid()||this.inputHandler.handleKeydown(e)}},{key:"handleKeypress",value:function(e){this.isChromeAndroid()||this.inputHandler.handleKeypress(e)}},{key:"handlePaste",value:function(e){this.isChromeAndroid()||this.inputHandler.handlePaste(e)}},{key:"isChromeAndroid",value:function(){return/chrome/i.test(navigator.userAgent)&&/android/i.test(navigator.userAgent)}},{key:"registerOnChange",value:function(e){this.inputHandler.setOnModelChange(e)}},{key:"registerOnTouched",value:function(e){this.inputHandler.setOnModelTouched(e)}},{key:"setDisabledState",value:function(e){this.elementRef.nativeElement.disabled=e}},{key:"writeValue",value:function(e){this.inputHandler.setValue(e)}}]),e}()).\u0275fac=function(e){return new(e||n)(o.Rb(p,8),o.Rb(o.l),o.Rb(o.u))},n.\u0275dir=o.Mb({type:n,selectors:[["","currencyMask",""]],hostBindings:function(e,t){1&e&&o.fc("blur",(function(e){return t.handleBlur(e)}))("cut",(function(e){return t.handleCut(e)}))("input",(function(e){return t.handleInput(e)}))("keydown",(function(e){return t.handleKeydown(e)}))("keypress",(function(e){return t.handleKeypress(e)}))("paste",(function(e){return t.handlePaste(e)}))},inputs:{options:"options"},features:[o.Db([m])]}),n),b=((s=a=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"forRoot",value:function(e){return{ngModule:a,providers:[{provide:p,useValue:e}]}}}]),e}()).\u0275mod=o.Pb({type:s}),s.\u0275inj=o.Ob({factory:function(e){return new(e||s)},imports:[[r.c,u.h]]}),s);function E(e,t){1&e&&(o.Xb(0,"p",15),o.Gc(1," Campo obrigat\xf3rio! "),o.Wb())}function y(e,t){1&e&&(o.Xb(0,"p",15),o.Gc(1," Campo obrigat\xf3rio! "),o.Wb())}var k,R,w=((k=function(){function e(t,i,n,a,s){var r=this;_classCallCheck(this,e),this.fb=t,this.router=i,this.route=n,this.produtoService=a,this.toastrService=s,this.form=this.fb.group({nome:[null,u.x.required],descricao:null,valor:[null,u.x.required],ativo:null}),this.route.params.subscribe((function(e){r.id=e.id,"novo"!==r.id?(r.headerMessage="Editar",r.produtoService.buscarProdutoPorId(r.id).subscribe((function(e){r.form.patchValue(Object.assign({},e))}))):r.headerMessage="Criar"}))}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"salvar",value:function(){var e=this;this.form.valid&&("novo"===this.id?this.produtoService.criarProduto(Object.assign({},this.form.value)).subscribe((function(t){e.router.navigate(["/pages/admin/produto"]),e.toastrService.success("Produto criado com sucesso!","Sucesso!")}),(function(t){return e.toastrService.danger("Erro!",t.errors)})):this.produtoService.atualizarProduto(Object.assign({},this.form.value),this.id).subscribe((function(t){e.router.navigate(["/pages/admin/produto"]),e.toastrService.success("Produto atualizado com sucesso!")}),(function(t){return e.toastrService.danger("Erro!",t.errors)})))}},{key:"verificaValidacaoCampo",value:function(e,t){return this.form.controls[e].dirty&&(t?this.form.controls[e].errors&&this.form.controls[e].errors[t]:this.form.controls[e].invalid)}}]),e}()).\u0275fac=function(e){return new(e||k)(o.Rb(u.c),o.Rb(c.c),o.Rb(c.a),o.Rb(l.a),o.Rb(h.mb))},k.\u0275cmp=o.Lb({type:k,selectors:[["ngx-criar-produto"]],decls:26,vars:8,consts:[[3,"formGroup"],["nbButton","","size","small","ghost","","routerLink","/pages/admin/produto"],["icon","arrow-left"],[1,"row","form-group"],[1,"form-group","col-md-6"],["for","Nome","required","",1,"label"],["type","text","nbInput","","placeholder","Nome","fullWidth","","id","nome","formControlName","nome",3,"status"],["class","caption status-danger",4,"ngIf"],[1,"form-group","col-md-3"],["for","valor",1,"label"],["type","tel","nbInput","","currencyMask","","placeholder","Valor","fullWidth","","id","valor","formControlName","valor","maxlength","15",3,"status"],[1,"row"],[1,"form-group","col-md-9"],["nbInput","","placeholder","Descri\xe7\xe3o","fullWidth","","id","descricao","formControlName","descricao",3,"status"],["nbButton","",3,"disabled","click"],[1,"caption","status-danger"]],template:function(e,t){1&e&&(o.Xb(0,"form",0),o.Xb(1,"nb-card"),o.Xb(2,"nb-card-header"),o.Xb(3,"button",1),o.Sb(4,"nb-icon",2),o.Wb(),o.Gc(5),o.Wb(),o.Xb(6,"nb-card-body"),o.Xb(7,"div",3),o.Xb(8,"div",4),o.Xb(9,"label",5),o.Gc(10,"Nome "),o.Wb(),o.Sb(11,"input",6),o.Ec(12,E,2,0,"p",7),o.Wb(),o.Xb(13,"div",8),o.Xb(14,"label",9),o.Gc(15,"Valor"),o.Wb(),o.Sb(16,"input",10),o.Ec(17,y,2,0,"p",7),o.Wb(),o.Wb(),o.Xb(18,"div",11),o.Xb(19,"div",12),o.Xb(20,"label",5),o.Gc(21,"Descri\xe7\xe3o"),o.Wb(),o.Sb(22,"textarea",13),o.Wb(),o.Wb(),o.Wb(),o.Xb(23,"nb-card-footer"),o.Xb(24,"button",14),o.fc("click",(function(){return t.salvar()})),o.Gc(25,"Enviar"),o.Wb(),o.Wb(),o.Wb(),o.Wb()),2&e&&(o.pc("formGroup",t.form),o.Eb(5),o.Ic(" ",t.headerMessage," Produto "),o.Eb(6),o.pc("status",t.verificaValidacaoCampo("nome")?"danger":""),o.Eb(1),o.pc("ngIf",t.verificaValidacaoCampo("nome","required")),o.Eb(4),o.pc("status",t.verificaValidacaoCampo("valor")?"danger":""),o.Eb(1),o.pc("ngIf",t.verificaValidacaoCampo("valor","required")),o.Eb(5),o.pc("status",t.verificaValidacaoCampo("descricao")?"danger":""),o.Eb(2),o.pc("disabled",t.form.invalid))},directives:[u.z,u.o,u.g,h.o,h.q,h.l,c.d,h.E,h.n,h.H,u.b,u.n,u.f,r.m,g,u.i,h.p],styles:[""]}),k),S={align:"right",allowNegative:!0,allowZero:!0,decimal:",",precision:2,prefix:"R$ ",suffix:"",thousands:".",nullable:!0},C=((R=function e(){_classCallCheck(this,e)}).\u0275mod=o.Pb({type:R}),R.\u0275inj=o.Ob({factory:function(e){return new(e||R)},imports:[[r.c,h.r,h.I,h.m,u.u,u.h,h.G,b.forRoot(S),c.g.forChild([{path:":id",component:w}])]]}),R)}}]);