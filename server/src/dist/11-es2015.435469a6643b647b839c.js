(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{HYE6:function(t,i,o){"use strict";o.r(i),o.d(i,"UsuarioConvidarModule",(function(){return f}));var r=o("ofXK"),n=o("tyNb"),e=o("3Pt+"),c=o("vI6V"),s=o("v8Ly"),a=o("fXoL"),u=o("aceb");function b(t,i){if(1&t&&(a.Yb(0,"nb-option",19),a.Ic(1),a.Xb()),2&t){const t=i.$implicit;a.qc("value",t.k),a.Fb(1),a.Jc(t.v)}}function d(t,i){if(1&t){const t=a.Zb();a.Yb(0,"nb-list-item"),a.Yb(1,"form",2),a.Yb(2,"div",12),a.Yb(3,"div",13),a.Tb(4,"input",14),a.Xb(),a.Yb(5,"div",13),a.Yb(6,"nb-select",15),a.Gc(7,b,2,2,"nb-option",16),a.Xb(),a.Xb(),a.Yb(8,"div",13),a.Yb(9,"button",17),a.gc("click",(function(){a.Ac(t);const o=i.$implicit;return a.kc().remove(o)})),a.Tb(10,"nb-icon",18),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb()}if(2&t){const t=i.$implicit,o=a.kc();a.Fb(1),a.qc("formGroup",t),a.Fb(6),a.qc("ngForOf",o.comunidades)}}const l=[{path:"",component:(()=>{class t{constructor(t,i){this.fb=t,this.usuarioService=i,this.form=this.fb.group({email:[null,e.x.email]}),this.comunidades=Object.keys(c.a).map(t=>({k:t,v:c.a[t]})),this.hierarquia=Object.keys(c.c).map(t=>({k:t,v:c.c[t]})),this.convidados=[]}ngOnInit(){}remove(t){this.convidados=this.convidados.filter(i=>i.value.email!==t.value.email)}add(){if(this.form.valid){const t=this.fb.group({email:null,comunidade:null});t.patchValue({email:this.form.value.email,comunidade:"PROPEDEUTICO"}),this.convidados.push(t),this.form.patchValue({email:null})}}enviarConvites(){const t=this.convidados.map(t=>({email:t.value.email,comunidade:t.value.comunidade}));this.usuarioService.criarConvite(t).subscribe(t=>{this.convidados=[]})}verificaValidacaoCampo(t,i){return this.form.controls[t].dirty&&(i?this.form.controls[t].errors&&this.form.controls[t].errors[i]:this.form.controls[t].invalid)}}return t.\u0275fac=function(i){return new(i||t)(a.Sb(e.c),a.Sb(s.a))},t.\u0275cmp=a.Mb({type:t,selectors:[["ngx-usuario-convidar"]],decls:24,vars:4,consts:[["nbButton","","size","small","ghost","","routerLink","/pages/admin/usuarios"],["icon","arrow-left"],[3,"formGroup"],[1,"row"],[1,"col-10"],["type","email","nbInput","","placeholder","Email","fullWidth","","id","Email","formControlName","email",3,"status"],[1,"col-2"],["type","submit","nbButton","","hero","","status","danger",3,"click"],["icon","plus"],["nbButton","","status","primary",3,"disabled","click"],["icon","email"],[4,"ngFor","ngForOf"],[2,"display","flex","justify-content","space-around"],[1,"form-group","col"],["nbInput","","formControlName","email","fullWidth","",2,"min-width","200px"],["placeholder","Comunidade","fullWidth","","formControlName","comunidade"],[3,"value",4,"ngFor","ngForOf"],["nbButton","","hero","","size","small","status","danger",3,"click"],["icon","minus"],[3,"value"]],template:function(t,i){1&t&&(a.Yb(0,"nb-card"),a.Yb(1,"nb-card-header"),a.Yb(2,"button",0),a.Tb(3,"nb-icon",1),a.Xb(),a.Ic(4," Convidar Usu\xe1rios"),a.Xb(),a.Yb(5,"nb-card-body"),a.Yb(6,"form",2),a.Yb(7,"div",3),a.Yb(8,"div",4),a.Tb(9,"input",5),a.Xb(),a.Yb(10,"div",6),a.Yb(11,"button",7),a.gc("click",(function(){return i.add()})),a.Tb(12,"nb-icon",8),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Yb(13,"nb-card-footer"),a.Yb(14,"div",6),a.Yb(15,"button",9),a.gc("click",(function(){return i.enviarConvites()})),a.Tb(16,"nb-icon",10),a.Ic(17," enviar convites"),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Yb(18,"nb-card"),a.Yb(19,"nb-card-header"),a.Ic(20," Lista de convidados "),a.Xb(),a.Yb(21,"nb-card-body"),a.Yb(22,"nb-list"),a.Gc(23,d,11,2,"nb-list-item",11),a.Xb(),a.Xb(),a.Xb()),2&t&&(a.Fb(6),a.qc("formGroup",i.form),a.Fb(3),a.qc("status",i.verificaValidacaoCampo("email")?"danger":""),a.Fb(6),a.qc("disabled",!i.convidados||!i.convidados.length),a.Fb(8),a.qc("ngForOf",i.convidados))},directives:[u.u,u.x,u.q,n.d,u.M,u.t,e.z,e.o,e.g,u.P,e.b,e.n,e.f,u.v,u.Y,r.l,u.Z,u.jb,u.gb],styles:[""]}),t})()}];let m=(()=>{class t{}return t.\u0275mod=a.Qb({type:t}),t.\u0275inj=a.Pb({factory:function(i){return new(i||t)},imports:[[n.g.forChild(l)],n.g]}),t})(),f=(()=>{class t{}return t.\u0275mod=a.Qb({type:t}),t.\u0275inj=a.Pb({factory:function(i){return new(i||t)},imports:[[r.c,u.y,u.Q,u.ab,u.kb,u.r,u.Q,u.O,e.u,e.h,m]]}),t})()},v8Ly:function(t,i,o){"use strict";o.d(i,"a",(function(){return u}));var r=o("MAky"),n=o("lJxs"),e=o("JIr8"),c=o("fXoL"),s=o("tk/3"),a=o("aceb");let u=(()=>{class t{constructor(t,i){this.http=t,this.toastrService=i,this.url=`${r.b}/user`}usuarioLogado(){return this.http.get(`${this.url}/usuarioLogado`)}select(){return this.http.get(`${this.url}/select`)}buscar(t){return this.http.post(`${this.url}/buscar`,{filtro:t})}buscarPorId(t){return this.http.post(`${this.url}/buscarPorId`,{id:t})}criarConvite(t){return this.http.post(`${this.url}/criarConvite`,{convites:t}).pipe(Object(n.a)(t=>(this.toastrService.success("","Convites enviados com sucesso"),t)),Object(e.a)(t=>(this.toastrService.danger(t.error.errors,"Erro!"),[])))}atualizarUsuario(t){return this.http.post(`${this.url}/atualizarUsuario`,t).pipe(Object(n.a)(t=>(this.toastrService.success("","Usu\xe1rio atualizado com sucesso"),!0)),Object(e.a)(t=>(this.toastrService.danger(t.message,"Erro!"),"")))}menuAdmin(){return this.http.get(`${this.url}/menuAdmin`)}}return t.\u0275fac=function(i){return new(i||t)(c.cc(s.b),c.cc(a.vb))},t.\u0275prov=c.Ob({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},vI6V:function(t,i,o){"use strict";o.d(i,"d",(function(){return r})),o.d(i,"a",(function(){return n})),o.d(i,"c",(function(){return e})),o.d(i,"b",(function(){return c}));var r=function(t){return t.ABERTO="Aberto",t.PRODUZINDO="Produzindo",t.ENTREGUE="Entregue",t.PAGO="Pago",t.CANCELADO="Cancelado",t.SLC_CANCELAMENTO="Slc. Canc.",t}({}),n=function(t){return t.PROPEDEUTICO="Proped\xeautico",t.FILOSOFIA="Filosofia",t.TEOLOGIA="Teologia",t.TIROCINIO="Tirocinio",t}({}),e=function(t){return t.SEMINARISTA="Seminarista",t.FORMADOR="Formador",t.REITOR="Reitor",t}({}),c=function(t){return t.COMPRAS="Compras",t.REDES_SOCIAIS="Redes Sociais",t.JARDINAGEM="Jardinagem",t.PARTILHA_SOLIDARIA="Partilha solid\xe1ria",t.PRODUTOS="Produtos",t.OUTROS="Outros",t}({})}}]);