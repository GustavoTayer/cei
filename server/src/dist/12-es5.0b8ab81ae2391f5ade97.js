function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"3ZFV":function(t,e,a){"use strict";a.r(e),a.d(e,"ListaSolicitacaoModule",(function(){return Xt}));var n,c,i=a("ofXK"),o=a("lJxs"),r=a("UXun"),s=a("fXoL"),b=a("nLfN"),u=a("XNiG"),l=a("itXk"),d=a("GyhO"),f=a("HDdC"),h=a("IzEk"),g=a("zP0r"),p=a("Kj3r"),m=a("JX91"),v=a("1G5W"),k=a("8LU1"),y=new Set,P=((c=function(){function t(e){_classCallCheck(this,t),this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):X}return _createClass(t,[{key:"matchMedia",value:function(t){return this._platform.WEBKIT&&function(t){if(!y.has(t))try{n||((n=document.createElement("style")).setAttribute("type","text/css"),document.head.appendChild(n)),n.sheet&&(n.sheet.insertRule("@media ".concat(t," {.fx-query-test{ }}"),0),y.add(t))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}]),t}()).\u0275fac=function(t){return new(t||c)(s.cc(b.a))},c.\u0275prov=Object(s.Ob)({factory:function(){return new c(Object(s.cc)(b.a))},token:c,providedIn:"root"}),c);function X(t){return{matches:"all"===t||""===t,media:t,addListener:function(){},removeListener:function(){}}}var C,Y=((C=function(){function t(e,a){_classCallCheck(this,t),this._mediaMatcher=e,this._zone=a,this._queries=new Map,this._destroySubject=new u.a}return _createClass(t,[{key:"ngOnDestroy",value:function(){this._destroySubject.next(),this._destroySubject.complete()}},{key:"isMatched",value:function(t){var e=this;return F(Object(k.a)(t)).some((function(t){return e._registerQuery(t).mql.matches}))}},{key:"observe",value:function(t){var e=this,a=F(Object(k.a)(t)).map((function(t){return e._registerQuery(t).observable})),n=Object(l.a)(a);return(n=Object(d.a)(n.pipe(Object(h.a)(1)),n.pipe(Object(g.a)(1),Object(p.a)(0)))).pipe(Object(o.a)((function(t){var e={matches:!1,breakpoints:{}};return t.forEach((function(t){e.matches=e.matches||t.matches,e.breakpoints[t.query]=t.matches})),e})))}},{key:"_registerQuery",value:function(t){var e=this;if(this._queries.has(t))return this._queries.get(t);var a=this._mediaMatcher.matchMedia(t),n={observable:new f.a((function(t){var n=function(a){return e._zone.run((function(){return t.next(a)}))};return a.addListener(n),function(){a.removeListener(n)}})).pipe(Object(m.a)(a),Object(o.a)((function(e){return{query:t,matches:e.matches}})),Object(v.a)(this._destroySubject)),mql:a};return this._queries.set(t,n),n}}]),t}()).\u0275fac=function(t){return new(t||C)(s.cc(P),s.cc(s.A))},C.\u0275prov=Object(s.Ob)({factory:function(){return new C(Object(s.cc)(P),Object(s.cc)(s.A))},token:C,providedIn:"root"}),C);function F(t){return t.map((function(t){return t.split(",")})).reduce((function(t,e){return t.concat(e)})).map((function(t){return t.trim()}))}var S,O=a("mrSG"),w=a("aceb"),q=a("8/IB"),I=a("vI6V"),D=a("wHSu"),T=((S=function(){function t(e){_classCallCheck(this,t),this.ref=e}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"cancel",value:function(){this.ref.close(!1)}},{key:"submit",value:function(){this.ref.close(!0)}}]),t}()).\u0275fac=function(t){return new(t||S)(s.Sb(w.J))},S.\u0275cmp=s.Mb({type:S,selectors:[["ngx-dialog-show-component"]],decls:10,vars:0,consts:[["nbButton","","status","danger",1,"cancel",3,"click"],["nbButton","","status","success",3,"click"]],template:function(t,e){1&t&&(s.Yb(0,"nb-card"),s.Yb(1,"nb-card-header"),s.Ic(2,"Confirme a altera\xe7\xe3o de status"),s.Xb(),s.Yb(3,"nb-card-body"),s.Ic(4," Voc\xea tem certeza que deseja solicitar o cancelamento? "),s.Xb(),s.Yb(5,"nb-card-footer"),s.Yb(6,"button",0),s.gc("click",(function(){return e.cancel()})),s.Ic(7,"Cancelar"),s.Xb(),s.Yb(8,"button",1),s.gc("click",(function(){return e.submit()})),s.Ic(9,"Solicitar"),s.Xb(),s.Xb(),s.Xb())},directives:[w.u,w.x,w.t,w.v,w.q],styles:["input[_ngcontent-%COMP%]{width:100%}.cancel[_ngcontent-%COMP%]{margin-right:2rem}"]}),S),_=a("9ig3"),j=a("jKzE"),G=a("sWYD"),x=a("3Pt+"),N=a("6NWb"),M=a("tyNb");function A(t,e){if(1&t&&(s.Yb(0,"nb-option",33),s.Ic(1),s.Xb()),2&t){var a=e.$implicit;s.qc("value",a.k),s.Fb(1),s.Jc(a.v)}}function R(t,e){1&t&&s.Tb(0,"tr",34)}function B(t,e){1&t&&s.Tb(0,"tr",35),2&t&&s.qc("clickToToggle",!1)}function L(t,e){if(1&t&&(s.Yb(0,"th",36),s.Ic(1," Status/Produto "),s.Xb()),2&t){var a=s.kc();s.qc("nbSortHeader",a.getSortDirection("nome"))}}function H(t,e){if(1&t&&s.Tb(0,"nb-tree-grid-row-toggle",39),2&t){var a=s.kc().$implicit;s.qc("expanded",a.expanded)}}function z(t,e){if(1&t&&(s.Yb(0,"td",37),s.Gc(1,H,1,1,"nb-tree-grid-row-toggle",38),s.Ic(2),s.Xb()),2&t){var a=e.$implicit;s.Fb(1),s.qc("ngIf",a.children),s.Fb(1),s.Kc(" ",a.data.nome," ")}}function E(t,e){if(1&t&&(s.Yb(0,"th",36),s.Ic(1," Dt. Desejada/Qtd. Solicitada "),s.Xb()),2&t){var a=s.kc();s.qc("nbSortHeader",a.getSortDirection("uq"))}}function K(t,e){if(1&t&&(s.Yb(0,"td",37),s.Ic(1),s.Xb()),2&t){var a=e.$implicit;s.Fb(1),s.Kc(" ",a.data.uq," ")}}function V(t,e){if(1&t&&(s.Yb(0,"th",36),s.Ic(1," Valor "),s.Xb()),2&t){var a=s.kc();s.qc("nbSortHeader",a.getSortDirection("valor"))}}function $(t,e){if(1&t&&(s.Yb(0,"td",37),s.Ic(1),s.Xb()),2&t){var a=e.$implicit;s.Fb(1),s.Kc(" ",a.data.valor," ")}}function J(t,e){if(1&t&&(s.Yb(0,"th",36),s.Ic(1," Criado em "),s.Xb()),2&t){var a=s.kc();s.qc("nbSortHeader",a.getSortDirection("dataDesejada"))}}function W(t,e){if(1&t&&(s.Yb(0,"td",37),s.Ic(1),s.Xb()),2&t){var a=e.$implicit;s.Fb(1),s.Kc(" ",a.data.criadoEm," ")}}function Q(t,e){1&t&&(s.Yb(0,"th",40),s.Ic(1," Cancelar "),s.Xb())}function Z(t,e){if(1&t){var a=s.Zb();s.Yb(0,"td",37),s.Yb(1,"button",41),s.gc("click",(function(){s.Ac(a);var t=e.$implicit;return s.kc().alterarStatus(t.data._id)})),s.Tb(2,"fa-icon",30),s.Xb(),s.Xb()}if(2&t){var n=e.$implicit,c=s.kc();s.Fb(1),s.qc("disabled","Aberto"!==n.data.nome),s.Fb(1),s.qc("icon",c.faTrash)}}function U(t,e){if(1&t){var a=s.Zb();s.Yb(0,"button",42),s.gc("click",(function(){s.Ac(a);var t=s.kc();return t.mudarPagina(t.pageNumber-1)})),s.Ic(1),s.Xb()}if(2&t){var n=s.kc();s.Fb(1),s.Kc(" ",n.pageNumber-1," ")}}function tt(t,e){if(1&t){var a=s.Zb();s.Yb(0,"button",42),s.gc("click",(function(){s.Ac(a);var t=s.kc();return t.mudarPagina(t.pageNumber+1)})),s.Ic(1),s.Xb()}if(2&t){var n=s.kc();s.Fb(1),s.Kc(" ",n.pageNumber+1," ")}}var et,at,nt=((at=function(){function t(e,a,n,c,i){_classCallCheck(this,t),this.dataSourceBuilder=e,this.solicitacaoProdutoService=a,this.fb=n,this.toastrService=c,this.dialogService=i,this.customColumn="nome",this.defaultColumns=[],this.allColumns=["nome","uq","valor","dataDesejada","cancelar"],this.status=Object.keys(I.d).map((function(t){return{k:t,v:I.d[t]}})),this.sortDirection=w.ob.NONE,this.filtro=this.fb.group({dataCriacao:null,dataDesejada:null,status:null}),this.faSearch=D.h,this.faPlus=D.g,this.faTrash=D.i,this.faAngleRight=D.d,this.faAngleLeft=D.c,this.faAngleDoubleLeft=D.a,this.faAngleDoubleRight=D.b,this.nPerPage=10,this.pageNumber=1}return _createClass(t,[{key:"ngOnInit",value:function(){return Object(O.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,a,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Object(_.a)(new Date),a=Object(j.a)(new Date),this.filtro.patchValue({status:"ABERTO",dataCriacao:{start:e,end:a},dataDesejada:{start:e,end:a}}),this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,1,this.nPerPage).subscribe((function(t){n.setData(t.solicitacoes),n.setLastPageAndCount(t.count)}));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"setLastPageAndCount",value:function(t){this.countSolicitacoes=t,this.nOfPages=Math.ceil(t/this.nPerPage)}},{key:"setData",value:function(t){this.data=t.map((function(t){var e=t.produtos;delete t.produtos;var a=e.map((function(t){return{data:{uq:t.quantidade,nome:t.produto.nome,valor:"R$ ".concat(t.valor.toFixed(2))}}})),n=Object(G.a)(new Date(t.dataDesejada),"dd/MM/yyyy"),c=Object(G.a)(new Date(t.criadoEm),"dd/MM/yyyy");return{data:{_id:t._id,nome:I.d[t.status],uq:n,valor:"R$ ".concat(t.valorTotal.toFixed(2)),criadoEm:c},children:a}})),this.dataSource=this.dataSourceBuilder.create(this.data)}},{key:"buscar",value:function(){var t=this;this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,1,this.nPerPage).subscribe((function(e){t.setData(e.solicitacoes),t.setLastPageAndCount(e.count),t.pageNumber=1}))}},{key:"cancelar",value:function(t){var e=this;this.solicitacaoProdutoService.cancelar(t).subscribe((function(t){e.toastrService.info("Favor, aguarde aprova\xe7\xe3o do respons\xe1vel","Solicita\xe7\xe3o de cancelamento enviada",{duration:6e3}),e.buscar()}))}},{key:"mudarPagina",value:function(t){var e=this;this.pageNumber=t,this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,this.pageNumber,this.nPerPage).subscribe((function(t){e.setData(t.solicitacoes),e.setLastPageAndCount(t.count)}))}},{key:"updateSort",value:function(t){this.sortColumn=t.column,this.sortDirection=t.direction}},{key:"getSortDirection",value:function(t){return this.sortColumn===t?this.sortDirection:w.ob.NONE}},{key:"getShowOn",value:function(t){return 400+100*t}},{key:"alterarStatus",value:function(t){var e=this;this.dialogService.open(T).onClose.subscribe((function(a){a&&e.cancelar(t)}))}}]),t}()).\u0275fac=function(t){return new(t||at)(s.Sb(w.Eb),s.Sb(q.a),s.Sb(x.c),s.Sb(w.vb),s.Sb(w.K))},at.\u0275cmp=s.Mb({type:at,selectors:[["ngx-lista-solicitacao-desktop"]],decls:65,vars:22,consts:[[3,"formGroup"],[1,"row","form-group"],[1,"form-group","col-md-4"],["for","Nome","required","",1,"label"],["placeholder","Status","formControlName","status","fullWidth",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4","form-group"],[1,"label"],["nbInput","","formControlName","dataCriacao",3,"nbDatepicker"],["rangepicker",""],["nbInput","","formControlName","dataDesejada",3,"nbDatepicker"],["dataDesejada",""],["nbButton","","status","basic",2,"padding","6px","margin-right","8px",3,"click"],[2,"margin-right","5px",3,"icon"],["nbButton","","status","primary","routerLink","/pages/solicitacao-produto/solicitar",2,"padding","6px"],[3,"nbTreeGrid","nbSort","sort"],["nbTreeGridHeaderRow","",4,"nbTreeGridHeaderRowDef"],["nbTreeGridRow","",3,"clickToToggle",4,"nbTreeGridRowDef","nbTreeGridRowDefColumns"],[3,"nbTreeGridColumnDef"],["nbTreeGridHeaderCell","",3,"nbSortHeader",4,"nbTreeGridHeaderCellDef"],["nbTreeGridCell","",4,"nbTreeGridCellDef"],["nbTreeGridColumnDef","uq"],["nbTreeGridColumnDef","valor"],["nbTreeGridColumnDef","dataDesejada"],["nbTreeGridColumnDef","cancelar"],["nbTreeGridHeaderCell","",4,"nbTreeGridHeaderCellDef"],["nbButton","","ghost","",3,"disabled"],[3,"icon","click"],["nbButton","","ghost","",3,"disabled","click"],[3,"icon"],["nbButton","","ghost","",3,"click",4,"ngIf"],["nbButton","","ghost","","status","primary"],[3,"value"],["nbTreeGridHeaderRow",""],["nbTreeGridRow","",3,"clickToToggle"],["nbTreeGridHeaderCell","",3,"nbSortHeader"],["nbTreeGridCell",""],[3,"expanded",4,"ngIf"],[3,"expanded"],["nbTreeGridHeaderCell",""],["ghost","","nbButton","","size","small",3,"disabled","click"],["nbButton","","ghost","",3,"click"]],template:function(t,e){if(1&t&&(s.Yb(0,"nb-card"),s.Yb(1,"nb-card-header"),s.Ic(2," Minhas solicita\xe7\xf5es "),s.Xb(),s.Yb(3,"nb-card-body"),s.Yb(4,"form",0),s.Yb(5,"div",1),s.Yb(6,"div",2),s.Yb(7,"label",3),s.Ic(8,"Status"),s.Xb(),s.Yb(9,"nb-select",4),s.Yb(10,"nb-option",5),s.Ic(11,"Todos"),s.Xb(),s.Gc(12,A,2,2,"nb-option",6),s.Xb(),s.Xb(),s.Yb(13,"div",7),s.Yb(14,"label",8),s.Ic(15,"Data de cria\xe7\xe3o:"),s.Xb(),s.Tb(16,"input",9),s.Tb(17,"nb-rangepicker",null,10),s.Xb(),s.Yb(19,"div",7),s.Yb(20,"label",8),s.Ic(21,"Data desejada:"),s.Xb(),s.Tb(22,"input",11),s.Tb(23,"nb-rangepicker",null,12),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Yb(25,"nb-card-footer"),s.Yb(26,"button",13),s.gc("click",(function(){return e.buscar()})),s.Tb(27,"fa-icon",14),s.Ic(28,"buscar "),s.Xb(),s.Yb(29,"button",15),s.Tb(30,"fa-icon",14),s.Ic(31,"solicita\xe7\xe3o "),s.Xb(),s.Xb(),s.Xb(),s.Yb(32,"nb-card"),s.Yb(33,"nb-card-body"),s.Yb(34,"table",16),s.gc("sort",(function(t){return e.updateSort(t)})),s.Gc(35,R,1,0,"tr",17),s.Gc(36,B,1,1,"tr",18),s.Wb(37,19),s.Gc(38,L,2,1,"th",20),s.Gc(39,z,3,2,"td",21),s.Vb(),s.Wb(40,22),s.Gc(41,E,2,1,"th",20),s.Gc(42,K,2,1,"td",21),s.Vb(),s.Wb(43,23),s.Gc(44,V,2,1,"th",20),s.Gc(45,$,2,1,"td",21),s.Vb(),s.Wb(46,24),s.Gc(47,J,2,1,"th",20),s.Gc(48,W,2,1,"td",21),s.Vb(),s.Wb(49,25),s.Gc(50,Q,2,0,"th",26),s.Gc(51,Z,3,2,"td",21),s.Vb(),s.Xb(),s.Xb(),s.Yb(52,"nb-card-footer"),s.Yb(53,"button",27),s.Yb(54,"fa-icon",28),s.gc("click",(function(){return e.mudarPagina(1)})),s.Xb(),s.Xb(),s.Yb(55,"button",29),s.gc("click",(function(){return e.mudarPagina(e.pageNumber-2)})),s.Tb(56,"fa-icon",30),s.Xb(),s.Gc(57,U,2,1,"button",31),s.Yb(58,"button",32),s.Ic(59),s.Xb(),s.Gc(60,tt,2,1,"button",31),s.Yb(61,"button",29),s.gc("click",(function(){return e.mudarPagina(e.pageNumber+2)})),s.Tb(62,"fa-icon",30),s.Xb(),s.Yb(63,"button",29),s.gc("click",(function(){return e.mudarPagina(e.nOfPages)})),s.Tb(64,"fa-icon",30),s.Xb(),s.Xb(),s.Xb()),2&t){var a=s.xc(18),n=s.xc(24);s.Fb(4),s.qc("formGroup",e.filtro),s.Fb(8),s.qc("ngForOf",e.status),s.Fb(4),s.qc("nbDatepicker",a),s.Fb(6),s.qc("nbDatepicker",n),s.Fb(5),s.qc("icon",e.faSearch),s.Fb(3),s.qc("icon",e.faPlus),s.Fb(4),s.qc("nbTreeGrid",e.dataSource)("nbSort",e.dataSource),s.Fb(1),s.qc("nbTreeGridHeaderRowDef",e.allColumns),s.Fb(1),s.qc("nbTreeGridRowDefColumns",e.allColumns),s.Fb(1),s.qc("nbTreeGridColumnDef",e.customColumn),s.Fb(16),s.qc("disabled",1===e.pageNumber),s.Fb(1),s.qc("icon",e.faAngleDoubleLeft),s.Fb(1),s.qc("disabled",e.pageNumber<=2),s.Fb(1),s.qc("icon",e.faAngleLeft),s.Fb(1),s.qc("ngIf",e.pageNumber>1),s.Fb(2),s.Kc(" ",e.pageNumber," "),s.Fb(1),s.qc("ngIf",e.pageNumber<e.nOfPages),s.Fb(1),s.qc("disabled",e.pageNumber>=e.nOfPages-2),s.Fb(1),s.qc("icon",e.faAngleRight),s.Fb(1),s.qc("disabled",e.pageNumber===e.nOfPages),s.Fb(1),s.qc("icon",e.faAngleDoubleRight)}},directives:[w.u,w.x,w.t,x.z,x.o,x.g,w.jb,x.n,x.f,w.gb,i.l,w.P,x.b,w.G,w.hb,w.v,w.q,N.a,M.d,w.Db,w.pb,w.Ib,w.Lb,w.Cb,w.Fb,w.Ab,i.m,w.Hb,w.Kb,w.Gb,w.qb,w.Bb,w.Mb],styles:["button[nbTreeGridRowToggle][_ngcontent-%COMP%]{background:transparent;border:none;padding:0}.search-label[_ngcontent-%COMP%]{display:block}.search-input[_ngcontent-%COMP%]{margin-bottom:1rem}.nb-column-name[_ngcontent-%COMP%]{width:100%}@media screen and (min-width:400px){.nb-column-name[_ngcontent-%COMP%], .nb-column-size[_ngcontent-%COMP%]{width:50%}}@media screen and (min-width:500px){.nb-column-kind[_ngcontent-%COMP%], .nb-column-name[_ngcontent-%COMP%], .nb-column-size[_ngcontent-%COMP%]{width:33.333%}}@media screen and (min-width:600px){.nb-column-name[_ngcontent-%COMP%]{width:31%}.nb-column-items[_ngcontent-%COMP%], .nb-column-kind[_ngcontent-%COMP%], .nb-column-size[_ngcontent-%COMP%]{width:23%}}"]}),at),ct=((et=function(){function t(e){_classCallCheck(this,t),this.ref=e}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"cancel",value:function(){this.ref.close(!1)}},{key:"submit",value:function(){this.ref.close(!0)}}]),t}()).\u0275fac=function(t){return new(t||et)(s.Sb(w.J))},et.\u0275cmp=s.Mb({type:et,selectors:[["ngx-dialog-show-sol-mobile"]],decls:10,vars:0,consts:[["nbButton","","status","danger",1,"cancel",3,"click"],["nbButton","","status","success",3,"click"]],template:function(t,e){1&t&&(s.Yb(0,"nb-card"),s.Yb(1,"nb-card-header"),s.Ic(2,"Confirme a altera\xe7\xe3o de status"),s.Xb(),s.Yb(3,"nb-card-body"),s.Ic(4," Voc\xea tem certeza que deseja solicitar o cancelamento? "),s.Xb(),s.Yb(5,"nb-card-footer"),s.Yb(6,"button",0),s.gc("click",(function(){return e.cancel()})),s.Ic(7,"Cancelar"),s.Xb(),s.Yb(8,"button",1),s.gc("click",(function(){return e.submit()})),s.Ic(9,"Solicitar"),s.Xb(),s.Xb(),s.Xb())},directives:[w.u,w.x,w.t,w.v,w.q],styles:["input[_ngcontent-%COMP%]{width:100%}.cancel[_ngcontent-%COMP%]{margin-right:2rem}"]}),et);function it(t,e){if(1&t&&(s.Yb(0,"nb-option",29),s.Ic(1),s.Xb()),2&t){var a=e.$implicit;s.qc("value",a.k),s.Fb(1),s.Jc(a.v)}}function ot(t,e){if(1&t){var a=s.Zb();s.Yb(0,"nb-list-item",30),s.gc("click",(function(){s.Ac(a);var t=e.$implicit;return s.kc().toggleView(t)})),s.Yb(1,"span"),s.Ic(2),s.Xb(),s.Yb(3,"span",31),s.Ic(4),s.Xb(),s.Yb(5,"span"),s.Ic(6),s.Xb(),s.Xb()}if(2&t){var n=e.$implicit,c=s.kc();s.Fb(2),s.Jc(c.obterValorStatusEnum(n.status)),s.Fb(2),s.Jc(c.formatarData(n.dataDesejada)),s.Fb(2),s.Kc("R$",n.valorTotal.toFixed(2),"")}}function rt(t,e){if(1&t){var a=s.Zb();s.Yb(0,"button",32),s.gc("click",(function(){s.Ac(a);var t=s.kc();return t.mudarPagina(t.pageNumber-1)})),s.Ic(1),s.Xb()}if(2&t){var n=s.kc();s.Fb(1),s.Kc(" ",n.pageNumber-1," ")}}function st(t,e){if(1&t){var a=s.Zb();s.Yb(0,"button",32),s.gc("click",(function(){s.Ac(a);var t=s.kc();return t.mudarPagina(t.pageNumber+1)})),s.Ic(1),s.Xb()}if(2&t){var n=s.kc();s.Fb(1),s.Kc(" ",n.pageNumber+1," ")}}function bt(t,e){if(1&t&&(s.Yb(0,"nb-list-item",17),s.Yb(1,"span",33),s.Ic(2),s.Xb(),s.Yb(3,"span"),s.Ic(4),s.Xb(),s.Yb(5,"span"),s.Ic(6),s.Xb(),s.Xb()),2&t){var a=e.$implicit;s.Fb(2),s.Jc(a.produto.nome),s.Fb(2),s.Kc("",a.quantidade," Und."),s.Fb(2),s.Kc("R$ ",a.valor.toFixed(2),"")}}var ut,lt=((ut=function(){function t(e,a,n,c){_classCallCheck(this,t),this.fb=e,this.solicitacaoProdutoService=a,this.dialogService=n,this.toastrService=c,this.faSearch=D.h,this.faPlus=D.g,this.faAngleRight=D.d,this.faAngleLeft=D.c,this.faAngleDoubleLeft=D.a,this.faAngleDoubleRight=D.b,this.status=Object.keys(I.d).map((function(t){return{k:t,v:I.d[t]}})),this.nPerPage=10,this.revealed=!1,this.pageNumber=1,this.faTrash=D.i,this.filtro=this.fb.group({dataCriacao:null,dataDesejada:null,status:null}),this.loading=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this,e=Object(_.a)(new Date),a=Object(j.a)(new Date);this.filtro.patchValue({status:"ABERTO",dataCriacao:{start:e,end:a},dataDesejada:{start:e,end:a}}),this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,1,this.nPerPage).subscribe((function(e){t.data=e.solicitacoes,t.setLastPageAndCount(e.count)}))}},{key:"toggleView",value:function(t){this.revealed=!this.revealed,this.solicitacaoFlipada=t}},{key:"buscar",value:function(){var t=this;this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,1,this.nPerPage).subscribe((function(e){t.data=e.solicitacoes,t.setLastPageAndCount(e.count)}))}},{key:"formatarData",value:function(t){return Object(G.a)(new Date(t),"dd/MM/yyyy")}},{key:"setLastPageAndCount",value:function(t){this.countSolicitacoes=t,this.nOfPages=Math.ceil(t/this.nPerPage)}},{key:"mudarPagina",value:function(t){var e=this;this.pageNumber=t,this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,this.pageNumber,this.nPerPage).subscribe((function(t){e.data=t.solicitacoes,e.setLastPageAndCount(t.count)}))}},{key:"obterValorStatusEnum",value:function(t){return I.d[t]}},{key:"alterarStatus",value:function(t){var e=this;this.dialogService.open(ct).onClose.subscribe((function(a){a&&e.cancelar(t)}))}},{key:"cancelar",value:function(t){var e=this;this.solicitacaoProdutoService.cancelar(t).subscribe((function(t){e.toastrService.info("Favor, aguarde aprova\xe7\xe3o do respons\xe1vel","Solicita\xe7\xe3o de cancelamento enviada",{duration:6e3}),e.buscar()}))}}]),t}()).\u0275fac=function(t){return new(t||ut)(s.Sb(x.c),s.Sb(q.a),s.Sb(w.K),s.Sb(w.vb))},ut.\u0275cmp=s.Mb({type:ut,selectors:[["ngx-lista-solicitacao-mobile"]],decls:75,vars:27,consts:[[3,"formGroup"],[1,"row","form-group"],[1,"form-group","col-md-4"],["for","Nome","required","",1,"label"],["placeholder","Status","formControlName","status","fullWidth",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4","form-group"],[1,"label"],["nbInput","","formControlName","dataCriacao",3,"nbDatepicker"],["rangepicker",""],["nbInput","","formControlName","dataDesejada",3,"nbDatepicker"],["dataDesejada",""],["nbButton","","status","basic",2,"padding","6px","margin-right","8px",3,"click"],[2,"margin-right","5px",3,"icon"],["nbButton","","status","primary","routerLink","/pages/solicitacao-produto/solicitar",2,"padding","6px"],[1,"own-scroll",3,"showToggleButton","flipped"],[1,"item",2,"font-size","small"],["class","item","style","font-size: small;",3,"click",4,"ngFor","ngForOf"],["nbButton","","ghost","","size","small",3,"disabled"],[3,"icon","click"],["nbButton","","ghost","","size","small",3,"disabled","click"],[3,"icon"],["nbButton","","ghost","","size","small",3,"click",4,"ngIf"],["nbButton","","ghost","","size","small","status","primary"],[2,"flex","1","padding","3px"],[2,"flex","2","padding","3px"],["class","item","style","font-size: small;",4,"ngFor","ngForOf"],["ghost","","nbButton","","size","small",3,"disabled","click"],[3,"value"],[1,"item",2,"font-size","small",3,"click"],[2,"padding","5px"],["nbButton","","ghost","","size","small",3,"click"],[2,"flex","2"]],template:function(t,e){if(1&t&&(s.Yb(0,"nb-card"),s.Yb(1,"nb-card-header"),s.Ic(2," Minhas solicita\xe7\xf5es "),s.Xb(),s.Yb(3,"nb-card-body"),s.Yb(4,"form",0),s.Yb(5,"div",1),s.Yb(6,"div",2),s.Yb(7,"label",3),s.Ic(8,"Status"),s.Xb(),s.Yb(9,"nb-select",4),s.Yb(10,"nb-option",5),s.Ic(11,"Todos"),s.Xb(),s.Gc(12,it,2,2,"nb-option",6),s.Xb(),s.Xb(),s.Yb(13,"div",7),s.Yb(14,"label",8),s.Ic(15,"Data de cria\xe7\xe3o:"),s.Xb(),s.Tb(16,"input",9),s.Tb(17,"nb-rangepicker",null,10),s.Xb(),s.Yb(19,"div",7),s.Yb(20,"label",8),s.Ic(21,"Data desejada:"),s.Xb(),s.Tb(22,"input",11),s.Tb(23,"nb-rangepicker",null,12),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Yb(25,"nb-card-footer"),s.Yb(26,"button",13),s.gc("click",(function(){return e.buscar()})),s.Tb(27,"fa-icon",14),s.Ic(28,"buscar "),s.Xb(),s.Yb(29,"button",15),s.Tb(30,"fa-icon",14),s.Ic(31,"solicita\xe7\xe3o "),s.Xb(),s.Xb(),s.Xb(),s.Yb(32,"nb-flip-card",16),s.Yb(33,"nb-card-front"),s.Yb(34,"nb-card"),s.Yb(35,"nb-card-header",17),s.Yb(36,"span"),s.Ic(37,"Status"),s.Xb(),s.Yb(38,"span"),s.Ic(39,"Dt. Desejada"),s.Xb(),s.Yb(40,"span"),s.Ic(41,"Valor Total"),s.Xb(),s.Xb(),s.Yb(42,"nb-card-body"),s.Yb(43,"nb-list"),s.Gc(44,ot,7,3,"nb-list-item",18),s.Xb(),s.Xb(),s.Yb(45,"nb-card-footer"),s.Yb(46,"button",19),s.Yb(47,"fa-icon",20),s.gc("click",(function(){return e.mudarPagina(1)})),s.Xb(),s.Xb(),s.Yb(48,"button",21),s.gc("click",(function(){return e.mudarPagina(e.pageNumber-2)})),s.Tb(49,"fa-icon",22),s.Xb(),s.Gc(50,rt,2,1,"button",23),s.Yb(51,"button",24),s.Ic(52),s.Xb(),s.Gc(53,st,2,1,"button",23),s.Yb(54,"button",21),s.gc("click",(function(){return e.mudarPagina(e.pageNumber+2)})),s.Tb(55,"fa-icon",22),s.Xb(),s.Yb(56,"button",21),s.gc("click",(function(){return e.mudarPagina(e.nOfPages)})),s.Tb(57,"fa-icon",22),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Yb(58,"nb-card-back"),s.Yb(59,"nb-card"),s.Yb(60,"nb-card-header",17),s.Yb(61,"span",25),s.Yb(62,"fa-icon",20),s.gc("click",(function(){return e.toggleView()})),s.Xb(),s.Xb(),s.Yb(63,"span",26),s.Ic(64),s.Xb(),s.Yb(65,"span",26),s.Ic(66),s.Xb(),s.Yb(67,"span",26),s.Ic(68),s.Xb(),s.Xb(),s.Yb(69,"nb-card-body"),s.Yb(70,"nb-list"),s.Gc(71,bt,7,3,"nb-list-item",27),s.Xb(),s.Xb(),s.Yb(72,"nb-card-footer"),s.Yb(73,"button",28),s.gc("click",(function(){return e.alterarStatus(e.solicitacaoFlipada._id)})),s.Tb(74,"fa-icon",22),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb()),2&t){var a=s.xc(18),n=s.xc(24);s.Fb(4),s.qc("formGroup",e.filtro),s.Fb(8),s.qc("ngForOf",e.status),s.Fb(4),s.qc("nbDatepicker",a),s.Fb(6),s.qc("nbDatepicker",n),s.Fb(5),s.qc("icon",e.faSearch),s.Fb(3),s.qc("icon",e.faPlus),s.Fb(2),s.qc("showToggleButton",!1)("flipped",e.revealed),s.Fb(12),s.qc("ngForOf",e.data),s.Fb(2),s.qc("disabled",1===e.pageNumber),s.Fb(1),s.qc("icon",e.faAngleDoubleLeft),s.Fb(1),s.qc("disabled",e.pageNumber<=2),s.Fb(1),s.qc("icon",e.faAngleLeft),s.Fb(1),s.qc("ngIf",e.pageNumber>1),s.Fb(2),s.Kc(" ",e.pageNumber," "),s.Fb(1),s.qc("ngIf",e.pageNumber<e.nOfPages),s.Fb(1),s.qc("disabled",e.pageNumber>=e.nOfPages-2),s.Fb(1),s.qc("icon",e.faAngleRight),s.Fb(1),s.qc("disabled",e.pageNumber===e.nOfPages),s.Fb(1),s.qc("icon",e.faAngleDoubleRight),s.Fb(5),s.qc("icon",e.faAngleLeft),s.Fb(2),s.Jc(e.solicitacaoFlipada&&e.obterValorStatusEnum(e.solicitacaoFlipada.status)),s.Fb(2),s.Jc(e.solicitacaoFlipada&&e.formatarData(e.solicitacaoFlipada.dataDesejada)),s.Fb(2),s.Kc("R$",e.solicitacaoFlipada&&e.solicitacaoFlipada.valorTotal.toFixed(2),""),s.Fb(3),s.qc("ngForOf",e.solicitacaoFlipada&&e.solicitacaoFlipada.produtos),s.Fb(2),s.qc("disabled",e.solicitacaoFlipada&&"ABERTO"!==e.solicitacaoFlipada.status),s.Fb(1),s.qc("icon",e.faTrash)}},directives:[w.u,w.x,w.t,x.z,x.o,x.g,w.jb,x.n,x.f,w.gb,i.l,w.P,x.b,w.G,w.hb,w.v,w.q,N.a,M.d,w.L,w.w,w.Y,i.m,w.s,w.Z],styles:[".item[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.item[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1}.item[_ngcontent-%COMP%]:first-child{border-top:none}"]}),ut);function dt(t,e){1&t&&s.Tb(0,"ngx-lista-solicitacao-desktop")}function ft(t,e){1&t&&s.Tb(0,"ngx-lista-solicitacao-mobile")}var ht,gt,pt,mt,vt=((ht=function(){function t(e){_classCallCheck(this,t),this.breakpointObserver=e,this.isHandset$=this.breakpointObserver.observe("(max-width: 599.99px) and (orientation: portrait), (max-width: 959.99px) and (orientation: landscape)").pipe(Object(o.a)((function(t){return t.matches})),Object(r.a)())}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||ht)(s.Sb(Y))},ht.\u0275cmp=s.Mb({type:ht,selectors:[["ngx-lista-solicitacao"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["mobileList",""]],template:function(t,e){if(1&t&&(s.Gc(0,dt,1,0,"ngx-lista-solicitacao-desktop",0),s.lc(1,"async"),s.Gc(2,ft,1,0,"ng-template",null,1,s.Hc)),2&t){var a=s.xc(3);s.qc("ngIf",!1===s.mc(1,2,e.isHandset$))("ngIfElse",a)}},directives:[i.m,nt,lt],pipes:[i.b],styles:[""]}),ht),kt=a("oG2T"),yt=((mt=function t(){_classCallCheck(this,t)}).\u0275mod=s.Qb({type:mt}),mt.\u0275inj=s.Pb({factory:function(t){return new(t||mt)},imports:[[i.c,w.ab,w.y,i.c,w.y,x.u,x.h,w.r,w.Q,M.g,w.H,kt.a,N.b,w.kb]]}),mt),Pt=((pt=function t(){_classCallCheck(this,t)}).\u0275mod=s.Qb({type:pt}),pt.\u0275inj=s.Pb({factory:function(t){return new(t||pt)},imports:[[i.c,w.Jb,w.y,x.u,x.h,w.r,w.Q,M.g,w.H,N.b,w.kb,kt.a]]}),pt),Xt=((gt=function t(){_classCallCheck(this,t)}).\u0275mod=s.Qb({type:gt}),gt.\u0275inj=s.Pb({factory:function(t){return new(t||gt)},imports:[[i.c,yt,Pt,M.g.forChild([{path:"",component:vt}])]]}),gt)},"8/IB":function(t,e,a){"use strict";a.d(e,"a",(function(){return b}));var n=a("MAky"),c=a("lJxs"),i=a("JIr8"),o=a("fXoL"),r=a("tk/3"),s=a("aceb"),b=function(){var t=function(){function t(e,a){_classCallCheck(this,t),this.http=e,this.toastrService=a,this.url="".concat(n.b,"/solicitacao-produto2"),this.urlProduto="".concat(n.b,"/produtos-solicitados")}return _createClass(t,[{key:"criarSolicitacao",value:function(t){return this.http.post("".concat(this.url,"/salvar"),t)}},{key:"buscarSolicitacoes",value:function(t,e,a){var n=this;return this.http.post("".concat(this.url,"/buscar"),{filtro:t,pageNumber:e,nPerPage:a}).pipe(Object(c.a)((function(t){return t})),Object(i.a)((function(t){return n.toastrService.danger(t.error.errors,"ERRO!"),[]})))}},{key:"countProdutos",value:function(t){return this.http.post("".concat(this.urlProduto,"/count"),{filtro:t})}},{key:"relProd",value:function(t,e,a){return this.http.post("".concat(this.urlProduto,"/relProd"),{frequencia:t,start:e,end:a})}},{key:"solicitacoesPagasRel",value:function(t,e,a){return this.http.post("".concat(this.url,"/solicitacoesPagasRel"),{frequencia:t,start:e,end:a})}},{key:"solicitacoesOutrasRel",value:function(t,e,a){return this.http.post("".concat(this.url,"/solicitacoesOutrasRel"),{frequencia:t,start:e,end:a})}},{key:"buscarSolicitacoesGeral",value:function(t,e,a){return this.http.post("".concat(this.url,"/buscarGeral"),{filtro:t,pageNumber:e,nPerPage:a})}},{key:"alterarStatus",value:function(t,e,a){return this.http.post("".concat(this.url,"/alterar-status"),{solicitacoes:t,status:e,cancelamento:a})}},{key:"usuariosSelect",value:function(){return this.http.get("".concat(n.b,"/user/select"))}},{key:"cancelar",value:function(t){return this.http.post("".concat(this.url,"/solicitarCancelamento"),{solicitacaoId:t})}},{key:"relatorio",value:function(t){return this.http.post("".concat(this.url,"/relatorio"),{frequencia:t})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.cc(r.b),o.cc(s.vb))},t.\u0275prov=o.Ob({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},mrSG:function(t,e,a){"use strict";function n(t,e,a,n){var c,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,a,n);else for(var r=t.length-1;r>=0;r--)(c=t[r])&&(o=(i<3?c(o):i>3?c(e,a,o):c(e,a))||o);return i>3&&o&&Object.defineProperty(e,a,o),o}function c(t,e,a,n){return new(a||(a=Promise))((function(c,i){function o(t){try{s(n.next(t))}catch(e){i(e)}}function r(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?c(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(o,r)}s((n=n.apply(t,e||[])).next())}))}a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return c}))}}]);