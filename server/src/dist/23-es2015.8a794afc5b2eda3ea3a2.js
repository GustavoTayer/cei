(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"3ZFV":function(t,e,a){"use strict";a.r(e),a.d(e,"ListaSolicitacaoModule",(function(){return lt}));var n=a("ofXK"),c=a("lJxs"),i=a("UXun"),o=a("fXoL"),r=a("nLfN"),b=a("XNiG"),s=a("itXk"),l=a("GyhO"),u=a("HDdC"),d=a("IzEk"),f=a("zP0r"),p=a("Kj3r"),m=a("JX91"),g=a("1G5W"),h=a("8LU1");const W=new Set;let X,E=(()=>{class t{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):S}matchMedia(t){return this._platform.WEBKIT&&function(t){if(!W.has(t))try{X||(X=document.createElement("style"),X.setAttribute("type","text/css"),document.head.appendChild(X)),X.sheet&&(X.sheet.insertRule(`@media ${t} {.fx-query-test{ }}`,0),W.add(t))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return t.\u0275fac=function(e){return new(e||t)(o.bc(r.a))},t.\u0275prov=Object(o.Nb)({factory:function(){return new t(Object(o.bc)(r.a))},token:t,providedIn:"root"}),t})();function S(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let v=(()=>{class t{constructor(t,e){this._mediaMatcher=t,this._zone=e,this._queries=new Map,this._destroySubject=new b.a}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return P(Object(h.a)(t)).some(t=>this._registerQuery(t).mql.matches)}observe(t){const e=P(Object(h.a)(t)).map(t=>this._registerQuery(t).observable);let a=Object(s.a)(e);return a=Object(l.a)(a.pipe(Object(d.a)(1)),a.pipe(Object(f.a)(1),Object(p.a)(0))),a.pipe(Object(c.a)(t=>{const e={matches:!1,breakpoints:{}};return t.forEach(t=>{e.matches=e.matches||t.matches,e.breakpoints[t.query]=t.matches}),e}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const e=this._mediaMatcher.matchMedia(t),a={observable:new u.a(t=>{const a=e=>this._zone.run(()=>t.next(e));return e.addListener(a),()=>{e.removeListener(a)}}).pipe(Object(m.a)(e),Object(c.a)(e=>({query:t,matches:e.matches})),Object(g.a)(this._destroySubject)),mql:e};return this._queries.set(t,a),a}}return t.\u0275fac=function(e){return new(e||t)(o.bc(E),o.bc(o.A))},t.\u0275prov=Object(o.Nb)({factory:function(){return new t(Object(o.bc)(E),Object(o.bc)(o.A))},token:t,providedIn:"root"}),t})();function P(t){return t.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var k=a("mrSG"),G=a("aceb"),O=a("8/IB"),C=a("vI6V"),D=a("wd/R"),w=a("wHSu");let j=(()=>{class t{constructor(t){this.ref=t}ngOnInit(){}cancel(){this.ref.close(!1)}submit(){this.ref.close(!0)}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(G.E))},t.\u0275cmp=o.Lb({type:t,selectors:[["ngx-dialog-show-component"]],decls:10,vars:0,consts:[["nbButton","","status","danger",1,"cancel",3,"click"],["nbButton","","status","success",3,"click"]],template:function(t,e){1&t&&(o.Xb(0,"nb-card"),o.Xb(1,"nb-card-header"),o.Gc(2,"Confirme a altera\xe7\xe3o de status"),o.Wb(),o.Xb(3,"nb-card-body"),o.Gc(4," Voc\xea tem certeza que deseja solicitar o cancelamento? "),o.Wb(),o.Xb(5,"nb-card-footer"),o.Xb(6,"button",0),o.fc("click",(function(){return e.cancel()})),o.Gc(7,"Cancelar"),o.Wb(),o.Xb(8,"button",1),o.fc("click",(function(){return e.submit()})),o.Gc(9,"Solicitar"),o.Wb(),o.Wb(),o.Wb())},directives:[G.p,G.s,G.o,G.q,G.l],styles:["input[_ngcontent-%COMP%]{width:100%}.cancel[_ngcontent-%COMP%]{margin-right:2rem}"]}),t})();var y=a("3Pt+"),N=a("6NWb"),T=a("tyNb");function x(t,e){if(1&t&&(o.Xb(0,"nb-option",34),o.Gc(1),o.Wb()),2&t){const t=e.$implicit;o.pc("value",t.k),o.Eb(1),o.Hc(t.v)}}function M(t,e){1&t&&o.Sb(0,"tr",35)}function _(t,e){1&t&&o.Sb(0,"tr",36),2&t&&o.pc("clickToToggle",!1)}function I(t,e){if(1&t&&(o.Xb(0,"th",37),o.Gc(1," Status/Produto "),o.Wb()),2&t){const t=o.jc();o.pc("nbSortHeader",t.getSortDirection("nome"))}}function R(t,e){if(1&t&&o.Sb(0,"nb-tree-grid-row-toggle",40),2&t){const t=o.jc().$implicit;o.pc("expanded",t.expanded)}}function F(t,e){if(1&t&&(o.Xb(0,"td",38),o.Ec(1,R,1,1,"nb-tree-grid-row-toggle",39),o.Gc(2),o.Wb()),2&t){const t=e.$implicit;o.Eb(1),o.pc("ngIf",t.children),o.Eb(1),o.Ic(" ",t.data.nome," ")}}function L(t,e){if(1&t&&(o.Xb(0,"th",37),o.Gc(1," Dt. Desejada/Qtd. Solicitada "),o.Wb()),2&t){const t=o.jc();o.pc("nbSortHeader",t.getSortDirection("uq"))}}function A(t,e){if(1&t&&(o.Xb(0,"td",38),o.Gc(1),o.Wb()),2&t){const t=e.$implicit;o.Eb(1),o.Ic(" ",t.data.uq," ")}}function B(t,e){if(1&t&&(o.Xb(0,"th",37),o.Gc(1," Valor "),o.Wb()),2&t){const t=o.jc();o.pc("nbSortHeader",t.getSortDirection("valor"))}}function H(t,e){if(1&t&&(o.Xb(0,"td",38),o.Gc(1),o.Wb()),2&t){const t=e.$implicit;o.Eb(1),o.Ic(" ",t.data.valor," ")}}function Y(t,e){if(1&t&&(o.Xb(0,"th",37),o.Gc(1," Criado em "),o.Wb()),2&t){const t=o.jc();o.pc("nbSortHeader",t.getSortDirection("dataDesejada"))}}function q(t,e){if(1&t&&(o.Xb(0,"td",38),o.Gc(1),o.Wb()),2&t){const t=e.$implicit;o.Eb(1),o.Ic(" ",t.data.criadoEm," ")}}function z(t,e){1&t&&(o.Xb(0,"th",41),o.Gc(1," Cancelar "),o.Wb())}function $(t,e){if(1&t){const t=o.Yb();o.Xb(0,"td",38),o.Xb(1,"button",42),o.fc("click",(function(){o.yc(t);const a=e.$implicit;return o.jc().alterarStatus(a.data._id)})),o.Sb(2,"fa-icon",31),o.Wb(),o.Wb()}if(2&t){const t=e.$implicit,a=o.jc();o.Eb(1),o.pc("disabled","Aberto"!==t.data.nome),o.Eb(1),o.pc("icon",a.faTrash)}}function V(t,e){if(1&t){const t=o.Yb();o.Xb(0,"button",43),o.fc("click",(function(){o.yc(t);const e=o.jc();return e.mudarPagina(e.pageNumber-1)})),o.Gc(1),o.Wb()}if(2&t){const t=o.jc();o.Eb(1),o.Ic(" ",t.pageNumber-1," ")}}function U(t,e){if(1&t){const t=o.Yb();o.Xb(0,"button",43),o.fc("click",(function(){o.yc(t);const e=o.jc();return e.mudarPagina(e.pageNumber+1)})),o.Gc(1),o.Wb()}if(2&t){const t=o.jc();o.Eb(1),o.Ic(" ",t.pageNumber+1," ")}}let K=(()=>{class t{constructor(t,e,a,n,c){this.dataSourceBuilder=t,this.solicitacaoProdutoService=e,this.fb=a,this.toastrService=n,this.dialogService=c,this.customColumn="nome",this.defaultColumns=[],this.allColumns=["nome","uq","valor","dataDesejada","cancelar"],this.status=Object.keys(C.d).map(t=>({k:t,v:C.d[t]})),this.sortDirection=G.ib.NONE,this.filtro=this.fb.group({dataCriacao:null,dataDesejada:null,status:null}),this.faSearch=w.g,this.faPlus=w.f,this.faTrash=w.h,this.faAngleRight=w.d,this.faAngleLeft=w.c,this.faAngleDoubleLeft=w.a,this.faAngleDoubleRight=w.b,this.nPerPage=10,this.pageNumber=1}ngOnInit(){return Object(k.a)(this,void 0,void 0,(function*(){const t=D().startOf("month"),e=D().endOf("month");this.filtro.patchValue({status:"ABERTO",dataCriacao:{start:t,end:e},dataDesejada:{start:t,end:e}}),this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,1,this.nPerPage).subscribe(t=>{this.setData(t.solicitacoes),this.setLastPageAndCount(t.count)})}))}setLastPageAndCount(t){this.countSolicitacoes=t,this.nOfPages=Math.ceil(t/this.nPerPage)}setData(t){this.data=t.map(t=>{const e=t.produtos;delete t.produtos;const a=e.map(t=>({data:{uq:t.quantidade,nome:t.produto.nome,valor:`R$ ${t.valor.toFixed(2)}`}})),n=D(t.dataDesejada).format("DD/MM/YYYY"),c=D(t.criadoEm).format("DD/MM/YYYY");return{data:{_id:t._id,nome:C.d[t.status],uq:n,valor:`R$ ${t.valorTotal.toFixed(2)}`,criadoEm:c},children:a}}),this.dataSource=this.dataSourceBuilder.create(this.data)}buscar(){this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,1,this.nPerPage).subscribe(t=>{this.setData(t.solicitacoes),this.setLastPageAndCount(t.count),this.pageNumber=1})}cancelar(t){this.solicitacaoProdutoService.cancelar(t).subscribe(t=>{this.toastrService.info("Favor, aguarde aprova\xe7\xe3o do respons\xe1vel","Solicita\xe7\xe3o de cancelamento enviada",{duration:6e3}),this.buscar()})}mudarPagina(t){this.pageNumber=t,this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,this.pageNumber,this.nPerPage).subscribe(t=>{this.setData(t.solicitacoes),this.setLastPageAndCount(t.count)})}updateSort(t){this.sortColumn=t.column,this.sortDirection=t.direction}getSortDirection(t){return this.sortColumn===t?this.sortDirection:G.ib.NONE}getShowOn(t){return 400+100*t}alterarStatus(t){this.dialogService.open(j).onClose.subscribe(e=>{e&&this.cancelar(t)})}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(G.yb),o.Rb(O.a),o.Rb(y.c),o.Rb(G.pb),o.Rb(G.F))},t.\u0275cmp=o.Lb({type:t,selectors:[["ngx-lista-solicitacao-desktop"]],decls:65,vars:22,consts:[[3,"formGroup"],[1,"row","form-group"],[1,"form-group","col-md-4"],["for","Nome","required","",1,"label"],["placeholder","Status","formControlName","status","fullWidth",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4","form-group"],[1,"label"],["nbInput","","formControlName","dataCriacao",3,"nbDatepicker"],["format","DD/MM/YYYY"],["rangepicker",""],["nbInput","","formControlName","dataDesejada",3,"nbDatepicker"],["dataDesejada",""],["nbButton","","status","basic",2,"padding","6px","margin-right","8px",3,"click"],[2,"margin-right","5px",3,"icon"],["nbButton","","status","primary","routerLink","/pages/solicitacao-produto/solicitar",2,"padding","6px"],[3,"nbTreeGrid","nbSort","sort"],["nbTreeGridHeaderRow","",4,"nbTreeGridHeaderRowDef"],["nbTreeGridRow","",3,"clickToToggle",4,"nbTreeGridRowDef","nbTreeGridRowDefColumns"],[3,"nbTreeGridColumnDef"],["nbTreeGridHeaderCell","",3,"nbSortHeader",4,"nbTreeGridHeaderCellDef"],["nbTreeGridCell","",4,"nbTreeGridCellDef"],["nbTreeGridColumnDef","uq"],["nbTreeGridColumnDef","valor"],["nbTreeGridColumnDef","dataDesejada"],["nbTreeGridColumnDef","cancelar"],["nbTreeGridHeaderCell","",4,"nbTreeGridHeaderCellDef"],["nbButton","","ghost","",3,"disabled"],[3,"icon","click"],["nbButton","","ghost","",3,"disabled","click"],[3,"icon"],["nbButton","","ghost","",3,"click",4,"ngIf"],["nbButton","","ghost","","status","primary"],[3,"value"],["nbTreeGridHeaderRow",""],["nbTreeGridRow","",3,"clickToToggle"],["nbTreeGridHeaderCell","",3,"nbSortHeader"],["nbTreeGridCell",""],[3,"expanded",4,"ngIf"],[3,"expanded"],["nbTreeGridHeaderCell",""],["ghost","","nbButton","","size","small",3,"disabled","click"],["nbButton","","ghost","",3,"click"]],template:function(t,e){if(1&t&&(o.Xb(0,"nb-card"),o.Xb(1,"nb-card-header"),o.Gc(2," Minhas solicita\xe7\xf5es "),o.Wb(),o.Xb(3,"nb-card-body"),o.Xb(4,"form",0),o.Xb(5,"div",1),o.Xb(6,"div",2),o.Xb(7,"label",3),o.Gc(8,"Status"),o.Wb(),o.Xb(9,"nb-select",4),o.Xb(10,"nb-option",5),o.Gc(11,"Todos"),o.Wb(),o.Ec(12,x,2,2,"nb-option",6),o.Wb(),o.Wb(),o.Xb(13,"div",7),o.Xb(14,"label",8),o.Gc(15,"Data de cria\xe7\xe3o:"),o.Wb(),o.Sb(16,"input",9),o.Sb(17,"nb-rangepicker",10,11),o.Wb(),o.Xb(19,"div",7),o.Xb(20,"label",8),o.Gc(21,"Data desejada:"),o.Wb(),o.Sb(22,"input",12),o.Sb(23,"nb-rangepicker",10,13),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Xb(25,"nb-card-footer"),o.Xb(26,"button",14),o.fc("click",(function(){return e.buscar()})),o.Sb(27,"fa-icon",15),o.Gc(28,"buscar "),o.Wb(),o.Xb(29,"button",16),o.Sb(30,"fa-icon",15),o.Gc(31,"solicita\xe7\xe3o "),o.Wb(),o.Wb(),o.Wb(),o.Xb(32,"nb-card"),o.Xb(33,"nb-card-body"),o.Xb(34,"table",17),o.fc("sort",(function(t){return e.updateSort(t)})),o.Ec(35,M,1,0,"tr",18),o.Ec(36,_,1,1,"tr",19),o.Vb(37,20),o.Ec(38,I,2,1,"th",21),o.Ec(39,F,3,2,"td",22),o.Ub(),o.Vb(40,23),o.Ec(41,L,2,1,"th",21),o.Ec(42,A,2,1,"td",22),o.Ub(),o.Vb(43,24),o.Ec(44,B,2,1,"th",21),o.Ec(45,H,2,1,"td",22),o.Ub(),o.Vb(46,25),o.Ec(47,Y,2,1,"th",21),o.Ec(48,q,2,1,"td",22),o.Ub(),o.Vb(49,26),o.Ec(50,z,2,0,"th",27),o.Ec(51,$,3,2,"td",22),o.Ub(),o.Wb(),o.Wb(),o.Xb(52,"nb-card-footer"),o.Xb(53,"button",28),o.Xb(54,"fa-icon",29),o.fc("click",(function(){return e.mudarPagina(1)})),o.Wb(),o.Wb(),o.Xb(55,"button",30),o.fc("click",(function(){return e.mudarPagina(e.pageNumber-2)})),o.Sb(56,"fa-icon",31),o.Wb(),o.Ec(57,V,2,1,"button",32),o.Xb(58,"button",33),o.Gc(59),o.Wb(),o.Ec(60,U,2,1,"button",32),o.Xb(61,"button",30),o.fc("click",(function(){return e.mudarPagina(e.pageNumber+2)})),o.Sb(62,"fa-icon",31),o.Wb(),o.Xb(63,"button",30),o.fc("click",(function(){return e.mudarPagina(e.nOfPages)})),o.Sb(64,"fa-icon",31),o.Wb(),o.Wb(),o.Wb()),2&t){const t=o.wc(18),a=o.wc(24);o.Eb(4),o.pc("formGroup",e.filtro),o.Eb(8),o.pc("ngForOf",e.status),o.Eb(4),o.pc("nbDatepicker",t),o.Eb(6),o.pc("nbDatepicker",a),o.Eb(5),o.pc("icon",e.faSearch),o.Eb(3),o.pc("icon",e.faPlus),o.Eb(4),o.pc("nbTreeGrid",e.dataSource)("nbSort",e.dataSource),o.Eb(1),o.pc("nbTreeGridHeaderRowDef",e.allColumns),o.Eb(1),o.pc("nbTreeGridRowDefColumns",e.allColumns),o.Eb(1),o.pc("nbTreeGridColumnDef",e.customColumn),o.Eb(16),o.pc("disabled",1===e.pageNumber),o.Eb(1),o.pc("icon",e.faAngleDoubleLeft),o.Eb(1),o.pc("disabled",e.pageNumber<=2),o.Eb(1),o.pc("icon",e.faAngleLeft),o.Eb(1),o.pc("ngIf",e.pageNumber>1),o.Eb(2),o.Ic(" ",e.pageNumber," "),o.Eb(1),o.pc("ngIf",e.pageNumber<e.nOfPages),o.Eb(1),o.pc("disabled",e.pageNumber>=e.nOfPages-2),o.Eb(1),o.pc("icon",e.faAngleRight),o.Eb(1),o.pc("disabled",e.pageNumber===e.nOfPages),o.Eb(1),o.pc("icon",e.faAngleDoubleRight)}},directives:[G.p,G.s,G.o,y.z,y.o,y.g,G.db,y.n,y.f,G.ab,n.l,G.K,y.b,G.B,G.bb,G.q,G.l,N.a,T.d,G.xb,G.jb,G.Cb,G.Fb,G.wb,G.zb,G.ub,n.m,G.Bb,G.Eb,G.Ab,G.kb,G.vb,G.Gb],styles:["button[nbTreeGridRowToggle][_ngcontent-%COMP%]{background:transparent;border:none;padding:0}.search-label[_ngcontent-%COMP%]{display:block}.search-input[_ngcontent-%COMP%]{margin-bottom:1rem}.nb-column-name[_ngcontent-%COMP%]{width:100%}@media screen and (min-width:400px){.nb-column-name[_ngcontent-%COMP%], .nb-column-size[_ngcontent-%COMP%]{width:50%}}@media screen and (min-width:500px){.nb-column-kind[_ngcontent-%COMP%], .nb-column-name[_ngcontent-%COMP%], .nb-column-size[_ngcontent-%COMP%]{width:33.333%}}@media screen and (min-width:600px){.nb-column-name[_ngcontent-%COMP%]{width:31%}.nb-column-items[_ngcontent-%COMP%], .nb-column-kind[_ngcontent-%COMP%], .nb-column-size[_ngcontent-%COMP%]{width:23%}}"]}),t})(),J=(()=>{class t{constructor(t){this.ref=t}ngOnInit(){}cancel(){this.ref.close(!1)}submit(){this.ref.close(!0)}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(G.E))},t.\u0275cmp=o.Lb({type:t,selectors:[["ngx-dialog-show-sol-mobile"]],decls:10,vars:0,consts:[["nbButton","","status","danger",1,"cancel",3,"click"],["nbButton","","status","success",3,"click"]],template:function(t,e){1&t&&(o.Xb(0,"nb-card"),o.Xb(1,"nb-card-header"),o.Gc(2,"Confirme a altera\xe7\xe3o de status"),o.Wb(),o.Xb(3,"nb-card-body"),o.Gc(4," Voc\xea tem certeza que deseja solicitar o cancelamento? "),o.Wb(),o.Xb(5,"nb-card-footer"),o.Xb(6,"button",0),o.fc("click",(function(){return e.cancel()})),o.Gc(7,"Cancelar"),o.Wb(),o.Xb(8,"button",1),o.fc("click",(function(){return e.submit()})),o.Gc(9,"Solicitar"),o.Wb(),o.Wb(),o.Wb())},directives:[G.p,G.s,G.o,G.q,G.l],styles:["input[_ngcontent-%COMP%]{width:100%}.cancel[_ngcontent-%COMP%]{margin-right:2rem}"]}),t})();function Q(t,e){if(1&t&&(o.Xb(0,"nb-option",30),o.Gc(1),o.Wb()),2&t){const t=e.$implicit;o.pc("value",t.k),o.Eb(1),o.Hc(t.v)}}function Z(t,e){if(1&t){const t=o.Yb();o.Xb(0,"nb-list-item",31),o.fc("click",(function(){o.yc(t);const a=e.$implicit;return o.jc().toggleView(a)})),o.Xb(1,"span"),o.Gc(2),o.Wb(),o.Xb(3,"span",32),o.Gc(4),o.Wb(),o.Xb(5,"span"),o.Gc(6),o.Wb(),o.Wb()}if(2&t){const t=e.$implicit,a=o.jc();o.Eb(2),o.Hc(a.obterValorStatusEnum(t.status)),o.Eb(2),o.Hc(a.formatarData(t.dataDesejada)),o.Eb(2),o.Ic("R$",t.valorTotal.toFixed(2),"")}}function tt(t,e){if(1&t){const t=o.Yb();o.Xb(0,"button",33),o.fc("click",(function(){o.yc(t);const e=o.jc();return e.mudarPagina(e.pageNumber-1)})),o.Gc(1),o.Wb()}if(2&t){const t=o.jc();o.Eb(1),o.Ic(" ",t.pageNumber-1," ")}}function et(t,e){if(1&t){const t=o.Yb();o.Xb(0,"button",33),o.fc("click",(function(){o.yc(t);const e=o.jc();return e.mudarPagina(e.pageNumber+1)})),o.Gc(1),o.Wb()}if(2&t){const t=o.jc();o.Eb(1),o.Ic(" ",t.pageNumber+1," ")}}function at(t,e){if(1&t&&(o.Xb(0,"nb-list-item",18),o.Xb(1,"span",34),o.Gc(2),o.Wb(),o.Xb(3,"span"),o.Gc(4),o.Wb(),o.Xb(5,"span"),o.Gc(6),o.Wb(),o.Wb()),2&t){const t=e.$implicit;o.Eb(2),o.Hc(t.produto.nome),o.Eb(2),o.Ic("",t.quantidade," Und."),o.Eb(2),o.Ic("R$ ",t.valor.toFixed(2),"")}}let nt=(()=>{class t{constructor(t,e,a,n){this.fb=t,this.solicitacaoProdutoService=e,this.dialogService=a,this.toastrService=n,this.faSearch=w.g,this.faPlus=w.f,this.faAngleRight=w.d,this.faAngleLeft=w.c,this.faAngleDoubleLeft=w.a,this.faAngleDoubleRight=w.b,this.status=Object.keys(C.d).map(t=>({k:t,v:C.d[t]})),this.nPerPage=10,this.revealed=!1,this.pageNumber=1,this.faTrash=w.h,this.filtro=this.fb.group({dataCriacao:null,dataDesejada:null,status:null}),this.loading=!1}ngOnInit(){const t=D().startOf("month"),e=D().endOf("month");this.filtro.patchValue({status:"ABERTO",dataCriacao:{start:t,end:e},dataDesejada:{start:t,end:e}}),this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,1,this.nPerPage).subscribe(t=>{this.data=t.solicitacoes,this.setLastPageAndCount(t.count)})}toggleView(t){this.revealed=!this.revealed,this.solicitacaoFlipada=t}buscar(){this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,1,this.nPerPage).subscribe(t=>{this.data=t.solicitacoes,this.setLastPageAndCount(t.count)})}formatarData(t){return D(t).format("DD/MM/YYYY")}setLastPageAndCount(t){this.countSolicitacoes=t,this.nOfPages=Math.ceil(t/this.nPerPage)}mudarPagina(t){this.pageNumber=t,this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,this.pageNumber,this.nPerPage).subscribe(t=>{this.data=t.solicitacoes,this.setLastPageAndCount(t.count)})}obterValorStatusEnum(t){return C.d[t]}alterarStatus(t){this.dialogService.open(J).onClose.subscribe(e=>{e&&this.cancelar(t)})}cancelar(t){this.solicitacaoProdutoService.cancelar(t).subscribe(t=>{this.toastrService.info("Favor, aguarde aprova\xe7\xe3o do respons\xe1vel","Solicita\xe7\xe3o de cancelamento enviada",{duration:6e3}),this.buscar()})}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(y.c),o.Rb(O.a),o.Rb(G.F),o.Rb(G.pb))},t.\u0275cmp=o.Lb({type:t,selectors:[["ngx-lista-solicitacao-mobile"]],decls:75,vars:27,consts:[[3,"formGroup"],[1,"row","form-group"],[1,"form-group","col-md-4"],["for","Nome","required","",1,"label"],["placeholder","Status","formControlName","status","fullWidth",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4","form-group"],[1,"label"],["nbInput","","formControlName","dataCriacao",3,"nbDatepicker"],["format","DD/MM/YYYY"],["rangepicker",""],["nbInput","","formControlName","dataDesejada",3,"nbDatepicker"],["dataDesejada",""],["nbButton","","status","basic",2,"padding","6px","margin-right","8px",3,"click"],[2,"margin-right","5px",3,"icon"],["nbButton","","status","primary","routerLink","/pages/solicitacao-produto/solicitar",2,"padding","6px"],[1,"own-scroll",3,"showToggleButton","flipped"],[1,"item",2,"font-size","small"],["class","item","style","font-size: small;",3,"click",4,"ngFor","ngForOf"],["nbButton","","ghost","","size","small",3,"disabled"],[3,"icon","click"],["nbButton","","ghost","","size","small",3,"disabled","click"],[3,"icon"],["nbButton","","ghost","","size","small",3,"click",4,"ngIf"],["nbButton","","ghost","","size","small","status","primary"],[2,"flex","1","padding","3px"],[2,"flex","2","padding","3px"],["class","item","style","font-size: small;",4,"ngFor","ngForOf"],["ghost","","nbButton","","size","small",3,"disabled","click"],[3,"value"],[1,"item",2,"font-size","small",3,"click"],[2,"padding","5px"],["nbButton","","ghost","","size","small",3,"click"],[2,"flex","2"]],template:function(t,e){if(1&t&&(o.Xb(0,"nb-card"),o.Xb(1,"nb-card-header"),o.Gc(2," Minhas solicita\xe7\xf5es "),o.Wb(),o.Xb(3,"nb-card-body"),o.Xb(4,"form",0),o.Xb(5,"div",1),o.Xb(6,"div",2),o.Xb(7,"label",3),o.Gc(8,"Status"),o.Wb(),o.Xb(9,"nb-select",4),o.Xb(10,"nb-option",5),o.Gc(11,"Todos"),o.Wb(),o.Ec(12,Q,2,2,"nb-option",6),o.Wb(),o.Wb(),o.Xb(13,"div",7),o.Xb(14,"label",8),o.Gc(15,"Data de cria\xe7\xe3o:"),o.Wb(),o.Sb(16,"input",9),o.Sb(17,"nb-rangepicker",10,11),o.Wb(),o.Xb(19,"div",7),o.Xb(20,"label",8),o.Gc(21,"Data desejada:"),o.Wb(),o.Sb(22,"input",12),o.Sb(23,"nb-rangepicker",10,13),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Xb(25,"nb-card-footer"),o.Xb(26,"button",14),o.fc("click",(function(){return e.buscar()})),o.Sb(27,"fa-icon",15),o.Gc(28,"buscar "),o.Wb(),o.Xb(29,"button",16),o.Sb(30,"fa-icon",15),o.Gc(31,"solicita\xe7\xe3o "),o.Wb(),o.Wb(),o.Wb(),o.Xb(32,"nb-flip-card",17),o.Xb(33,"nb-card-front"),o.Xb(34,"nb-card"),o.Xb(35,"nb-card-header",18),o.Xb(36,"span"),o.Gc(37,"Status"),o.Wb(),o.Xb(38,"span"),o.Gc(39,"Dt. Desejada"),o.Wb(),o.Xb(40,"span"),o.Gc(41,"Valor Total"),o.Wb(),o.Wb(),o.Xb(42,"nb-card-body"),o.Xb(43,"nb-list"),o.Ec(44,Z,7,3,"nb-list-item",19),o.Wb(),o.Wb(),o.Xb(45,"nb-card-footer"),o.Xb(46,"button",20),o.Xb(47,"fa-icon",21),o.fc("click",(function(){return e.mudarPagina(1)})),o.Wb(),o.Wb(),o.Xb(48,"button",22),o.fc("click",(function(){return e.mudarPagina(e.pageNumber-2)})),o.Sb(49,"fa-icon",23),o.Wb(),o.Ec(50,tt,2,1,"button",24),o.Xb(51,"button",25),o.Gc(52),o.Wb(),o.Ec(53,et,2,1,"button",24),o.Xb(54,"button",22),o.fc("click",(function(){return e.mudarPagina(e.pageNumber+2)})),o.Sb(55,"fa-icon",23),o.Wb(),o.Xb(56,"button",22),o.fc("click",(function(){return e.mudarPagina(e.nOfPages)})),o.Sb(57,"fa-icon",23),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Xb(58,"nb-card-back"),o.Xb(59,"nb-card"),o.Xb(60,"nb-card-header",18),o.Xb(61,"span",26),o.Xb(62,"fa-icon",21),o.fc("click",(function(){return e.toggleView()})),o.Wb(),o.Wb(),o.Xb(63,"span",27),o.Gc(64),o.Wb(),o.Xb(65,"span",27),o.Gc(66),o.Wb(),o.Xb(67,"span",27),o.Gc(68),o.Wb(),o.Wb(),o.Xb(69,"nb-card-body"),o.Xb(70,"nb-list"),o.Ec(71,at,7,3,"nb-list-item",28),o.Wb(),o.Wb(),o.Xb(72,"nb-card-footer"),o.Xb(73,"button",29),o.fc("click",(function(){return e.alterarStatus(e.solicitacaoFlipada._id)})),o.Sb(74,"fa-icon",23),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Wb()),2&t){const t=o.wc(18),a=o.wc(24);o.Eb(4),o.pc("formGroup",e.filtro),o.Eb(8),o.pc("ngForOf",e.status),o.Eb(4),o.pc("nbDatepicker",t),o.Eb(6),o.pc("nbDatepicker",a),o.Eb(5),o.pc("icon",e.faSearch),o.Eb(3),o.pc("icon",e.faPlus),o.Eb(2),o.pc("showToggleButton",!1)("flipped",e.revealed),o.Eb(12),o.pc("ngForOf",e.data),o.Eb(2),o.pc("disabled",1===e.pageNumber),o.Eb(1),o.pc("icon",e.faAngleDoubleLeft),o.Eb(1),o.pc("disabled",e.pageNumber<=2),o.Eb(1),o.pc("icon",e.faAngleLeft),o.Eb(1),o.pc("ngIf",e.pageNumber>1),o.Eb(2),o.Ic(" ",e.pageNumber," "),o.Eb(1),o.pc("ngIf",e.pageNumber<e.nOfPages),o.Eb(1),o.pc("disabled",e.pageNumber>=e.nOfPages-2),o.Eb(1),o.pc("icon",e.faAngleRight),o.Eb(1),o.pc("disabled",e.pageNumber===e.nOfPages),o.Eb(1),o.pc("icon",e.faAngleDoubleRight),o.Eb(5),o.pc("icon",e.faAngleLeft),o.Eb(2),o.Hc(e.solicitacaoFlipada&&e.obterValorStatusEnum(e.solicitacaoFlipada.status)),o.Eb(2),o.Hc(e.solicitacaoFlipada&&e.formatarData(e.solicitacaoFlipada.dataDesejada)),o.Eb(2),o.Ic("R$",e.solicitacaoFlipada&&e.solicitacaoFlipada.valorTotal.toFixed(2),""),o.Eb(3),o.pc("ngForOf",e.solicitacaoFlipada&&e.solicitacaoFlipada.produtos),o.Eb(2),o.pc("disabled",e.solicitacaoFlipada&&"ABERTO"!==e.solicitacaoFlipada.status),o.Eb(1),o.pc("icon",e.faTrash)}},directives:[G.p,G.s,G.o,y.z,y.o,y.g,G.db,y.n,y.f,G.ab,n.l,G.K,y.b,G.B,G.bb,G.q,G.l,N.a,T.d,G.G,G.r,G.T,n.m,G.n,G.U],styles:[".item[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.item[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1}.item[_ngcontent-%COMP%]:first-child{border-top:none}"]}),t})();function ct(t,e){1&t&&o.Sb(0,"ngx-lista-solicitacao-desktop")}function it(t,e){1&t&&o.Sb(0,"ngx-lista-solicitacao-mobile")}let ot=(()=>{class t{constructor(t){this.breakpointObserver=t,this.isHandset$=this.breakpointObserver.observe("(max-width: 599.99px) and (orientation: portrait), (max-width: 959.99px) and (orientation: landscape)").pipe(Object(c.a)(t=>t.matches),Object(i.a)())}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(v))},t.\u0275cmp=o.Lb({type:t,selectors:[["ngx-lista-solicitacao"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["mobileList",""]],template:function(t,e){if(1&t&&(o.Ec(0,ct,1,0,"ngx-lista-solicitacao-desktop",0),o.kc(1,"async"),o.Ec(2,it,1,0,"ng-template",null,1,o.Fc)),2&t){const t=o.wc(3);o.pc("ngIf",!1===o.lc(1,2,e.isHandset$))("ngIfElse",t)}},directives:[n.m,K,nt],pipes:[n.b],styles:[""]}),t})();var rt=a("eW8b");let bt=(()=>{class t{}return t.\u0275mod=o.Pb({type:t}),t.\u0275inj=o.Ob({factory:function(e){return new(e||t)},imports:[[n.c,G.V,G.t,n.c,G.t,y.u,y.h,G.m,G.L,T.g,G.C,rt.a,N.b,G.eb]]}),t})(),st=(()=>{class t{}return t.\u0275mod=o.Pb({type:t}),t.\u0275inj=o.Ob({factory:function(e){return new(e||t)},imports:[[n.c,G.Db,G.t,y.u,y.h,G.m,G.L,T.g,G.C,rt.a,N.b,G.eb]]}),t})(),lt=(()=>{class t{}return t.\u0275mod=o.Pb({type:t}),t.\u0275inj=o.Ob({factory:function(e){return new(e||t)},imports:[[n.c,bt,st,T.g.forChild([{path:"",component:ot}])]]}),t})()}}]);