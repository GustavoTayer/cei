(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"3ZFV":function(t,e,a){"use strict";a.r(e),a.d(e,"ListaSolicitacaoModule",(function(){return dt}));var c=a("ofXK"),n=a("lJxs"),i=a("UXun"),o=a("fXoL"),r=a("nLfN"),s=a("XNiG"),b=a("itXk"),l=a("GyhO"),u=a("HDdC"),d=a("IzEk"),f=a("zP0r"),g=a("Kj3r"),h=a("JX91"),p=a("1G5W"),m=a("8LU1");const v=new Set;let X,P=(()=>{class t{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):k}matchMedia(t){return this._platform.WEBKIT&&function(t){if(!v.has(t))try{X||(X=document.createElement("style"),X.setAttribute("type","text/css"),document.head.appendChild(X)),X.sheet&&(X.sheet.insertRule(`@media ${t} {.fx-query-test{ }}`,0),v.add(t))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return t.\u0275fac=function(e){return new(e||t)(o.cc(r.a))},t.\u0275prov=Object(o.Ob)({factory:function(){return new t(Object(o.cc)(r.a))},token:t,providedIn:"root"}),t})();function k(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let Y=(()=>{class t{constructor(t,e){this._mediaMatcher=t,this._zone=e,this._queries=new Map,this._destroySubject=new s.a}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return F(Object(m.a)(t)).some(t=>this._registerQuery(t).mql.matches)}observe(t){const e=F(Object(m.a)(t)).map(t=>this._registerQuery(t).observable);let a=Object(b.a)(e);return a=Object(l.a)(a.pipe(Object(d.a)(1)),a.pipe(Object(f.a)(1),Object(g.a)(0))),a.pipe(Object(n.a)(t=>{const e={matches:!1,breakpoints:{}};return t.forEach(t=>{e.matches=e.matches||t.matches,e.breakpoints[t.query]=t.matches}),e}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const e=this._mediaMatcher.matchMedia(t),a={observable:new u.a(t=>{const a=e=>this._zone.run(()=>t.next(e));return e.addListener(a),()=>{e.removeListener(a)}}).pipe(Object(h.a)(e),Object(n.a)(e=>({query:t,matches:e.matches})),Object(p.a)(this._destroySubject)),mql:e};return this._queries.set(t,a),a}}return t.\u0275fac=function(e){return new(e||t)(o.cc(P),o.cc(o.A))},t.\u0275prov=Object(o.Ob)({factory:function(){return new t(Object(o.cc)(P),Object(o.cc)(o.A))},token:t,providedIn:"root"}),t})();function F(t){return t.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var S=a("mrSG"),O=a("aceb"),q=a("8/IB"),I=a("vI6V"),w=a("wHSu");let y=(()=>{class t{constructor(t){this.ref=t}ngOnInit(){}cancel(){this.ref.close(!1)}submit(){this.ref.close(!0)}}return t.\u0275fac=function(e){return new(e||t)(o.Sb(O.J))},t.\u0275cmp=o.Mb({type:t,selectors:[["ngx-dialog-show-component"]],decls:10,vars:0,consts:[["nbButton","","status","danger",1,"cancel",3,"click"],["nbButton","","status","success",3,"click"]],template:function(t,e){1&t&&(o.Yb(0,"nb-card"),o.Yb(1,"nb-card-header"),o.Ic(2,"Confirme a altera\xe7\xe3o de status"),o.Xb(),o.Yb(3,"nb-card-body"),o.Ic(4," Voc\xea tem certeza que deseja solicitar o cancelamento? "),o.Xb(),o.Yb(5,"nb-card-footer"),o.Yb(6,"button",0),o.gc("click",(function(){return e.cancel()})),o.Ic(7,"Cancelar"),o.Xb(),o.Yb(8,"button",1),o.gc("click",(function(){return e.submit()})),o.Ic(9,"Solicitar"),o.Xb(),o.Xb(),o.Xb())},directives:[O.u,O.x,O.t,O.v,O.q],styles:["input[_ngcontent-%COMP%]{width:100%}.cancel[_ngcontent-%COMP%]{margin-right:2rem}"]}),t})();var C=a("9ig3"),D=a("jKzE"),T=a("sWYD"),j=a("3Pt+"),G=a("6NWb"),x=a("tyNb");function N(t,e){if(1&t&&(o.Yb(0,"nb-option",33),o.Ic(1),o.Xb()),2&t){const t=e.$implicit;o.qc("value",t.k),o.Fb(1),o.Jc(t.v)}}function M(t,e){1&t&&o.Tb(0,"tr",34)}function _(t,e){1&t&&o.Tb(0,"tr",35),2&t&&o.qc("clickToToggle",!1)}function A(t,e){if(1&t&&(o.Yb(0,"th",36),o.Ic(1," Status/Produto "),o.Xb()),2&t){const t=o.kc();o.qc("nbSortHeader",t.getSortDirection("nome"))}}function R(t,e){if(1&t&&o.Tb(0,"nb-tree-grid-row-toggle",39),2&t){const t=o.kc().$implicit;o.qc("expanded",t.expanded)}}function $(t,e){if(1&t&&(o.Yb(0,"td",37),o.Gc(1,R,1,1,"nb-tree-grid-row-toggle",38),o.Ic(2),o.Xb()),2&t){const t=e.$implicit;o.Fb(1),o.qc("ngIf",t.children),o.Fb(1),o.Kc(" ",t.data.nome," ")}}function B(t,e){if(1&t&&(o.Yb(0,"th",36),o.Ic(1," Dt. Desejada/Qtd. Solicitada "),o.Xb()),2&t){const t=o.kc();o.qc("nbSortHeader",t.getSortDirection("uq"))}}function L(t,e){if(1&t&&(o.Yb(0,"td",37),o.Ic(1),o.Xb()),2&t){const t=e.$implicit;o.Fb(1),o.Kc(" ",t.data.uq," ")}}function H(t,e){if(1&t&&(o.Yb(0,"th",36),o.Ic(1," Valor "),o.Xb()),2&t){const t=o.kc();o.qc("nbSortHeader",t.getSortDirection("valor"))}}function z(t,e){if(1&t&&(o.Yb(0,"td",37),o.Ic(1),o.Xb()),2&t){const t=e.$implicit;o.Fb(1),o.Kc(" ",t.data.valor," ")}}function K(t,e){if(1&t&&(o.Yb(0,"th",36),o.Ic(1," Criado em "),o.Xb()),2&t){const t=o.kc();o.qc("nbSortHeader",t.getSortDirection("dataDesejada"))}}function E(t,e){if(1&t&&(o.Yb(0,"td",37),o.Ic(1),o.Xb()),2&t){const t=e.$implicit;o.Fb(1),o.Kc(" ",t.data.criadoEm," ")}}function V(t,e){1&t&&(o.Yb(0,"th",40),o.Ic(1," Cancelar "),o.Xb())}function J(t,e){if(1&t){const t=o.Zb();o.Yb(0,"td",37),o.Yb(1,"button",41),o.gc("click",(function(){o.Ac(t);const a=e.$implicit;return o.kc().alterarStatus(a.data._id)})),o.Tb(2,"fa-icon",30),o.Xb(),o.Xb()}if(2&t){const t=e.$implicit,a=o.kc();o.Fb(1),o.qc("disabled","Aberto"!==t.data.nome),o.Fb(1),o.qc("icon",a.faTrash)}}function W(t,e){if(1&t){const t=o.Zb();o.Yb(0,"button",42),o.gc("click",(function(){o.Ac(t);const e=o.kc();return e.mudarPagina(e.pageNumber-1)})),o.Ic(1),o.Xb()}if(2&t){const t=o.kc();o.Fb(1),o.Kc(" ",t.pageNumber-1," ")}}function Q(t,e){if(1&t){const t=o.Zb();o.Yb(0,"button",42),o.gc("click",(function(){o.Ac(t);const e=o.kc();return e.mudarPagina(e.pageNumber+1)})),o.Ic(1),o.Xb()}if(2&t){const t=o.kc();o.Fb(1),o.Kc(" ",t.pageNumber+1," ")}}let Z=(()=>{class t{constructor(t,e,a,c,n){this.dataSourceBuilder=t,this.solicitacaoProdutoService=e,this.fb=a,this.toastrService=c,this.dialogService=n,this.customColumn="nome",this.defaultColumns=[],this.allColumns=["nome","uq","valor","dataDesejada","cancelar"],this.status=Object.keys(I.d).map(t=>({k:t,v:I.d[t]})),this.sortDirection=O.ob.NONE,this.filtro=this.fb.group({dataCriacao:null,dataDesejada:null,status:null}),this.faSearch=w.h,this.faPlus=w.g,this.faTrash=w.i,this.faAngleRight=w.d,this.faAngleLeft=w.c,this.faAngleDoubleLeft=w.a,this.faAngleDoubleRight=w.b,this.nPerPage=10,this.pageNumber=1}ngOnInit(){return Object(S.a)(this,void 0,void 0,(function*(){const t=Object(C.a)(new Date),e=Object(D.a)(new Date);this.filtro.patchValue({status:"ABERTO",dataCriacao:{start:t,end:e},dataDesejada:{start:t,end:e}}),this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,1,this.nPerPage).subscribe(t=>{this.setData(t.solicitacoes),this.setLastPageAndCount(t.count)})}))}setLastPageAndCount(t){this.countSolicitacoes=t,this.nOfPages=Math.ceil(t/this.nPerPage)}setData(t){this.data=t.map(t=>{const e=t.produtos;delete t.produtos;const a=e.map(t=>({data:{uq:t.quantidade,nome:t.produto.nome,valor:`R$ ${t.valor.toFixed(2)}`}})),c=Object(T.a)(new Date(t.dataDesejada),"dd/MM/yyyy"),n=Object(T.a)(new Date(t.criadoEm),"dd/MM/yyyy");return{data:{_id:t._id,nome:I.d[t.status],uq:c,valor:`R$ ${t.valorTotal.toFixed(2)}`,criadoEm:n},children:a}}),this.dataSource=this.dataSourceBuilder.create(this.data)}buscar(){this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,1,this.nPerPage).subscribe(t=>{this.setData(t.solicitacoes),this.setLastPageAndCount(t.count),this.pageNumber=1})}cancelar(t){this.solicitacaoProdutoService.cancelar(t).subscribe(t=>{this.toastrService.info("Favor, aguarde aprova\xe7\xe3o do respons\xe1vel","Solicita\xe7\xe3o de cancelamento enviada",{duration:6e3}),this.buscar()})}mudarPagina(t){this.pageNumber=t,this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,this.pageNumber,this.nPerPage).subscribe(t=>{this.setData(t.solicitacoes),this.setLastPageAndCount(t.count)})}updateSort(t){this.sortColumn=t.column,this.sortDirection=t.direction}getSortDirection(t){return this.sortColumn===t?this.sortDirection:O.ob.NONE}getShowOn(t){return 400+100*t}alterarStatus(t){this.dialogService.open(y).onClose.subscribe(e=>{e&&this.cancelar(t)})}}return t.\u0275fac=function(e){return new(e||t)(o.Sb(O.Eb),o.Sb(q.a),o.Sb(j.c),o.Sb(O.vb),o.Sb(O.K))},t.\u0275cmp=o.Mb({type:t,selectors:[["ngx-lista-solicitacao-desktop"]],decls:65,vars:22,consts:[[3,"formGroup"],[1,"row","form-group"],[1,"form-group","col-md-4"],["for","Nome","required","",1,"label"],["placeholder","Status","formControlName","status","fullWidth",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4","form-group"],[1,"label"],["nbInput","","formControlName","dataCriacao",3,"nbDatepicker"],["rangepicker",""],["nbInput","","formControlName","dataDesejada",3,"nbDatepicker"],["dataDesejada",""],["nbButton","","status","basic",2,"padding","6px","margin-right","8px",3,"click"],[2,"margin-right","5px",3,"icon"],["nbButton","","status","primary","routerLink","/pages/solicitacao-produto/solicitar",2,"padding","6px"],[3,"nbTreeGrid","nbSort","sort"],["nbTreeGridHeaderRow","",4,"nbTreeGridHeaderRowDef"],["nbTreeGridRow","",3,"clickToToggle",4,"nbTreeGridRowDef","nbTreeGridRowDefColumns"],[3,"nbTreeGridColumnDef"],["nbTreeGridHeaderCell","",3,"nbSortHeader",4,"nbTreeGridHeaderCellDef"],["nbTreeGridCell","",4,"nbTreeGridCellDef"],["nbTreeGridColumnDef","uq"],["nbTreeGridColumnDef","valor"],["nbTreeGridColumnDef","dataDesejada"],["nbTreeGridColumnDef","cancelar"],["nbTreeGridHeaderCell","",4,"nbTreeGridHeaderCellDef"],["nbButton","","ghost","",3,"disabled"],[3,"icon","click"],["nbButton","","ghost","",3,"disabled","click"],[3,"icon"],["nbButton","","ghost","",3,"click",4,"ngIf"],["nbButton","","ghost","","status","primary"],[3,"value"],["nbTreeGridHeaderRow",""],["nbTreeGridRow","",3,"clickToToggle"],["nbTreeGridHeaderCell","",3,"nbSortHeader"],["nbTreeGridCell",""],[3,"expanded",4,"ngIf"],[3,"expanded"],["nbTreeGridHeaderCell",""],["ghost","","nbButton","","size","small",3,"disabled","click"],["nbButton","","ghost","",3,"click"]],template:function(t,e){if(1&t&&(o.Yb(0,"nb-card"),o.Yb(1,"nb-card-header"),o.Ic(2," Minhas solicita\xe7\xf5es "),o.Xb(),o.Yb(3,"nb-card-body"),o.Yb(4,"form",0),o.Yb(5,"div",1),o.Yb(6,"div",2),o.Yb(7,"label",3),o.Ic(8,"Status"),o.Xb(),o.Yb(9,"nb-select",4),o.Yb(10,"nb-option",5),o.Ic(11,"Todos"),o.Xb(),o.Gc(12,N,2,2,"nb-option",6),o.Xb(),o.Xb(),o.Yb(13,"div",7),o.Yb(14,"label",8),o.Ic(15,"Data de cria\xe7\xe3o:"),o.Xb(),o.Tb(16,"input",9),o.Tb(17,"nb-rangepicker",null,10),o.Xb(),o.Yb(19,"div",7),o.Yb(20,"label",8),o.Ic(21,"Data desejada:"),o.Xb(),o.Tb(22,"input",11),o.Tb(23,"nb-rangepicker",null,12),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Yb(25,"nb-card-footer"),o.Yb(26,"button",13),o.gc("click",(function(){return e.buscar()})),o.Tb(27,"fa-icon",14),o.Ic(28,"buscar "),o.Xb(),o.Yb(29,"button",15),o.Tb(30,"fa-icon",14),o.Ic(31,"solicita\xe7\xe3o "),o.Xb(),o.Xb(),o.Xb(),o.Yb(32,"nb-card"),o.Yb(33,"nb-card-body"),o.Yb(34,"table",16),o.gc("sort",(function(t){return e.updateSort(t)})),o.Gc(35,M,1,0,"tr",17),o.Gc(36,_,1,1,"tr",18),o.Wb(37,19),o.Gc(38,A,2,1,"th",20),o.Gc(39,$,3,2,"td",21),o.Vb(),o.Wb(40,22),o.Gc(41,B,2,1,"th",20),o.Gc(42,L,2,1,"td",21),o.Vb(),o.Wb(43,23),o.Gc(44,H,2,1,"th",20),o.Gc(45,z,2,1,"td",21),o.Vb(),o.Wb(46,24),o.Gc(47,K,2,1,"th",20),o.Gc(48,E,2,1,"td",21),o.Vb(),o.Wb(49,25),o.Gc(50,V,2,0,"th",26),o.Gc(51,J,3,2,"td",21),o.Vb(),o.Xb(),o.Xb(),o.Yb(52,"nb-card-footer"),o.Yb(53,"button",27),o.Yb(54,"fa-icon",28),o.gc("click",(function(){return e.mudarPagina(1)})),o.Xb(),o.Xb(),o.Yb(55,"button",29),o.gc("click",(function(){return e.mudarPagina(e.pageNumber-2)})),o.Tb(56,"fa-icon",30),o.Xb(),o.Gc(57,W,2,1,"button",31),o.Yb(58,"button",32),o.Ic(59),o.Xb(),o.Gc(60,Q,2,1,"button",31),o.Yb(61,"button",29),o.gc("click",(function(){return e.mudarPagina(e.pageNumber+2)})),o.Tb(62,"fa-icon",30),o.Xb(),o.Yb(63,"button",29),o.gc("click",(function(){return e.mudarPagina(e.nOfPages)})),o.Tb(64,"fa-icon",30),o.Xb(),o.Xb(),o.Xb()),2&t){const t=o.xc(18),a=o.xc(24);o.Fb(4),o.qc("formGroup",e.filtro),o.Fb(8),o.qc("ngForOf",e.status),o.Fb(4),o.qc("nbDatepicker",t),o.Fb(6),o.qc("nbDatepicker",a),o.Fb(5),o.qc("icon",e.faSearch),o.Fb(3),o.qc("icon",e.faPlus),o.Fb(4),o.qc("nbTreeGrid",e.dataSource)("nbSort",e.dataSource),o.Fb(1),o.qc("nbTreeGridHeaderRowDef",e.allColumns),o.Fb(1),o.qc("nbTreeGridRowDefColumns",e.allColumns),o.Fb(1),o.qc("nbTreeGridColumnDef",e.customColumn),o.Fb(16),o.qc("disabled",1===e.pageNumber),o.Fb(1),o.qc("icon",e.faAngleDoubleLeft),o.Fb(1),o.qc("disabled",e.pageNumber<=2),o.Fb(1),o.qc("icon",e.faAngleLeft),o.Fb(1),o.qc("ngIf",e.pageNumber>1),o.Fb(2),o.Kc(" ",e.pageNumber," "),o.Fb(1),o.qc("ngIf",e.pageNumber<e.nOfPages),o.Fb(1),o.qc("disabled",e.pageNumber>=e.nOfPages-2),o.Fb(1),o.qc("icon",e.faAngleRight),o.Fb(1),o.qc("disabled",e.pageNumber===e.nOfPages),o.Fb(1),o.qc("icon",e.faAngleDoubleRight)}},directives:[O.u,O.x,O.t,j.z,j.o,j.g,O.jb,j.n,j.f,O.gb,c.l,O.P,j.b,O.G,O.hb,O.v,O.q,G.a,x.d,O.Db,O.pb,O.Ib,O.Lb,O.Cb,O.Fb,O.Ab,c.m,O.Hb,O.Kb,O.Gb,O.qb,O.Bb,O.Mb],styles:["button[nbTreeGridRowToggle][_ngcontent-%COMP%]{background:transparent;border:none;padding:0}.search-label[_ngcontent-%COMP%]{display:block}.search-input[_ngcontent-%COMP%]{margin-bottom:1rem}.nb-column-name[_ngcontent-%COMP%]{width:100%}@media screen and (min-width:400px){.nb-column-name[_ngcontent-%COMP%], .nb-column-size[_ngcontent-%COMP%]{width:50%}}@media screen and (min-width:500px){.nb-column-kind[_ngcontent-%COMP%], .nb-column-name[_ngcontent-%COMP%], .nb-column-size[_ngcontent-%COMP%]{width:33.333%}}@media screen and (min-width:600px){.nb-column-name[_ngcontent-%COMP%]{width:31%}.nb-column-items[_ngcontent-%COMP%], .nb-column-kind[_ngcontent-%COMP%], .nb-column-size[_ngcontent-%COMP%]{width:23%}}"]}),t})(),U=(()=>{class t{constructor(t){this.ref=t}ngOnInit(){}cancel(){this.ref.close(!1)}submit(){this.ref.close(!0)}}return t.\u0275fac=function(e){return new(e||t)(o.Sb(O.J))},t.\u0275cmp=o.Mb({type:t,selectors:[["ngx-dialog-show-sol-mobile"]],decls:10,vars:0,consts:[["nbButton","","status","danger",1,"cancel",3,"click"],["nbButton","","status","success",3,"click"]],template:function(t,e){1&t&&(o.Yb(0,"nb-card"),o.Yb(1,"nb-card-header"),o.Ic(2,"Confirme a altera\xe7\xe3o de status"),o.Xb(),o.Yb(3,"nb-card-body"),o.Ic(4," Voc\xea tem certeza que deseja solicitar o cancelamento? "),o.Xb(),o.Yb(5,"nb-card-footer"),o.Yb(6,"button",0),o.gc("click",(function(){return e.cancel()})),o.Ic(7,"Cancelar"),o.Xb(),o.Yb(8,"button",1),o.gc("click",(function(){return e.submit()})),o.Ic(9,"Solicitar"),o.Xb(),o.Xb(),o.Xb())},directives:[O.u,O.x,O.t,O.v,O.q],styles:["input[_ngcontent-%COMP%]{width:100%}.cancel[_ngcontent-%COMP%]{margin-right:2rem}"]}),t})();function tt(t,e){if(1&t&&(o.Yb(0,"nb-option",29),o.Ic(1),o.Xb()),2&t){const t=e.$implicit;o.qc("value",t.k),o.Fb(1),o.Jc(t.v)}}function et(t,e){if(1&t){const t=o.Zb();o.Yb(0,"nb-list-item",30),o.gc("click",(function(){o.Ac(t);const a=e.$implicit;return o.kc().toggleView(a)})),o.Yb(1,"span"),o.Ic(2),o.Xb(),o.Yb(3,"span",31),o.Ic(4),o.Xb(),o.Yb(5,"span"),o.Ic(6),o.Xb(),o.Xb()}if(2&t){const t=e.$implicit,a=o.kc();o.Fb(2),o.Jc(a.obterValorStatusEnum(t.status)),o.Fb(2),o.Jc(a.formatarData(t.dataDesejada)),o.Fb(2),o.Kc("R$",t.valorTotal.toFixed(2),"")}}function at(t,e){if(1&t){const t=o.Zb();o.Yb(0,"button",32),o.gc("click",(function(){o.Ac(t);const e=o.kc();return e.mudarPagina(e.pageNumber-1)})),o.Ic(1),o.Xb()}if(2&t){const t=o.kc();o.Fb(1),o.Kc(" ",t.pageNumber-1," ")}}function ct(t,e){if(1&t){const t=o.Zb();o.Yb(0,"button",32),o.gc("click",(function(){o.Ac(t);const e=o.kc();return e.mudarPagina(e.pageNumber+1)})),o.Ic(1),o.Xb()}if(2&t){const t=o.kc();o.Fb(1),o.Kc(" ",t.pageNumber+1," ")}}function nt(t,e){if(1&t&&(o.Yb(0,"nb-list-item",17),o.Yb(1,"span",33),o.Ic(2),o.Xb(),o.Yb(3,"span"),o.Ic(4),o.Xb(),o.Yb(5,"span"),o.Ic(6),o.Xb(),o.Xb()),2&t){const t=e.$implicit;o.Fb(2),o.Jc(t.produto.nome),o.Fb(2),o.Kc("",t.quantidade," Und."),o.Fb(2),o.Kc("R$ ",t.valor.toFixed(2),"")}}let it=(()=>{class t{constructor(t,e,a,c){this.fb=t,this.solicitacaoProdutoService=e,this.dialogService=a,this.toastrService=c,this.faSearch=w.h,this.faPlus=w.g,this.faAngleRight=w.d,this.faAngleLeft=w.c,this.faAngleDoubleLeft=w.a,this.faAngleDoubleRight=w.b,this.status=Object.keys(I.d).map(t=>({k:t,v:I.d[t]})),this.nPerPage=10,this.revealed=!1,this.pageNumber=1,this.faTrash=w.i,this.filtro=this.fb.group({dataCriacao:null,dataDesejada:null,status:null}),this.loading=!1}ngOnInit(){const t=Object(C.a)(new Date),e=Object(D.a)(new Date);this.filtro.patchValue({status:"ABERTO",dataCriacao:{start:t,end:e},dataDesejada:{start:t,end:e}}),this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,1,this.nPerPage).subscribe(t=>{this.data=t.solicitacoes,this.setLastPageAndCount(t.count)})}toggleView(t){this.revealed=!this.revealed,this.solicitacaoFlipada=t}buscar(){this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,1,this.nPerPage).subscribe(t=>{this.data=t.solicitacoes,this.setLastPageAndCount(t.count)})}formatarData(t){return Object(T.a)(new Date(t),"dd/MM/yyyy")}setLastPageAndCount(t){this.countSolicitacoes=t,this.nOfPages=Math.ceil(t/this.nPerPage)}mudarPagina(t){this.pageNumber=t,this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,this.pageNumber,this.nPerPage).subscribe(t=>{this.data=t.solicitacoes,this.setLastPageAndCount(t.count)})}obterValorStatusEnum(t){return I.d[t]}alterarStatus(t){this.dialogService.open(U).onClose.subscribe(e=>{e&&this.cancelar(t)})}cancelar(t){this.solicitacaoProdutoService.cancelar(t).subscribe(t=>{this.toastrService.info("Favor, aguarde aprova\xe7\xe3o do respons\xe1vel","Solicita\xe7\xe3o de cancelamento enviada",{duration:6e3}),this.buscar()})}}return t.\u0275fac=function(e){return new(e||t)(o.Sb(j.c),o.Sb(q.a),o.Sb(O.K),o.Sb(O.vb))},t.\u0275cmp=o.Mb({type:t,selectors:[["ngx-lista-solicitacao-mobile"]],decls:75,vars:27,consts:[[3,"formGroup"],[1,"row","form-group"],[1,"form-group","col-md-4"],["for","Nome","required","",1,"label"],["placeholder","Status","formControlName","status","fullWidth",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4","form-group"],[1,"label"],["nbInput","","formControlName","dataCriacao",3,"nbDatepicker"],["rangepicker",""],["nbInput","","formControlName","dataDesejada",3,"nbDatepicker"],["dataDesejada",""],["nbButton","","status","basic",2,"padding","6px","margin-right","8px",3,"click"],[2,"margin-right","5px",3,"icon"],["nbButton","","status","primary","routerLink","/pages/solicitacao-produto/solicitar",2,"padding","6px"],[1,"own-scroll",3,"showToggleButton","flipped"],[1,"item",2,"font-size","small"],["class","item","style","font-size: small;",3,"click",4,"ngFor","ngForOf"],["nbButton","","ghost","","size","small",3,"disabled"],[3,"icon","click"],["nbButton","","ghost","","size","small",3,"disabled","click"],[3,"icon"],["nbButton","","ghost","","size","small",3,"click",4,"ngIf"],["nbButton","","ghost","","size","small","status","primary"],[2,"flex","1","padding","3px"],[2,"flex","2","padding","3px"],["class","item","style","font-size: small;",4,"ngFor","ngForOf"],["ghost","","nbButton","","size","small",3,"disabled","click"],[3,"value"],[1,"item",2,"font-size","small",3,"click"],[2,"padding","5px"],["nbButton","","ghost","","size","small",3,"click"],[2,"flex","2"]],template:function(t,e){if(1&t&&(o.Yb(0,"nb-card"),o.Yb(1,"nb-card-header"),o.Ic(2," Minhas solicita\xe7\xf5es "),o.Xb(),o.Yb(3,"nb-card-body"),o.Yb(4,"form",0),o.Yb(5,"div",1),o.Yb(6,"div",2),o.Yb(7,"label",3),o.Ic(8,"Status"),o.Xb(),o.Yb(9,"nb-select",4),o.Yb(10,"nb-option",5),o.Ic(11,"Todos"),o.Xb(),o.Gc(12,tt,2,2,"nb-option",6),o.Xb(),o.Xb(),o.Yb(13,"div",7),o.Yb(14,"label",8),o.Ic(15,"Data de cria\xe7\xe3o:"),o.Xb(),o.Tb(16,"input",9),o.Tb(17,"nb-rangepicker",null,10),o.Xb(),o.Yb(19,"div",7),o.Yb(20,"label",8),o.Ic(21,"Data desejada:"),o.Xb(),o.Tb(22,"input",11),o.Tb(23,"nb-rangepicker",null,12),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Yb(25,"nb-card-footer"),o.Yb(26,"button",13),o.gc("click",(function(){return e.buscar()})),o.Tb(27,"fa-icon",14),o.Ic(28,"buscar "),o.Xb(),o.Yb(29,"button",15),o.Tb(30,"fa-icon",14),o.Ic(31,"solicita\xe7\xe3o "),o.Xb(),o.Xb(),o.Xb(),o.Yb(32,"nb-flip-card",16),o.Yb(33,"nb-card-front"),o.Yb(34,"nb-card"),o.Yb(35,"nb-card-header",17),o.Yb(36,"span"),o.Ic(37,"Status"),o.Xb(),o.Yb(38,"span"),o.Ic(39,"Dt. Desejada"),o.Xb(),o.Yb(40,"span"),o.Ic(41,"Valor Total"),o.Xb(),o.Xb(),o.Yb(42,"nb-card-body"),o.Yb(43,"nb-list"),o.Gc(44,et,7,3,"nb-list-item",18),o.Xb(),o.Xb(),o.Yb(45,"nb-card-footer"),o.Yb(46,"button",19),o.Yb(47,"fa-icon",20),o.gc("click",(function(){return e.mudarPagina(1)})),o.Xb(),o.Xb(),o.Yb(48,"button",21),o.gc("click",(function(){return e.mudarPagina(e.pageNumber-2)})),o.Tb(49,"fa-icon",22),o.Xb(),o.Gc(50,at,2,1,"button",23),o.Yb(51,"button",24),o.Ic(52),o.Xb(),o.Gc(53,ct,2,1,"button",23),o.Yb(54,"button",21),o.gc("click",(function(){return e.mudarPagina(e.pageNumber+2)})),o.Tb(55,"fa-icon",22),o.Xb(),o.Yb(56,"button",21),o.gc("click",(function(){return e.mudarPagina(e.nOfPages)})),o.Tb(57,"fa-icon",22),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Yb(58,"nb-card-back"),o.Yb(59,"nb-card"),o.Yb(60,"nb-card-header",17),o.Yb(61,"span",25),o.Yb(62,"fa-icon",20),o.gc("click",(function(){return e.toggleView()})),o.Xb(),o.Xb(),o.Yb(63,"span",26),o.Ic(64),o.Xb(),o.Yb(65,"span",26),o.Ic(66),o.Xb(),o.Yb(67,"span",26),o.Ic(68),o.Xb(),o.Xb(),o.Yb(69,"nb-card-body"),o.Yb(70,"nb-list"),o.Gc(71,nt,7,3,"nb-list-item",27),o.Xb(),o.Xb(),o.Yb(72,"nb-card-footer"),o.Yb(73,"button",28),o.gc("click",(function(){return e.alterarStatus(e.solicitacaoFlipada._id)})),o.Tb(74,"fa-icon",22),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Xb()),2&t){const t=o.xc(18),a=o.xc(24);o.Fb(4),o.qc("formGroup",e.filtro),o.Fb(8),o.qc("ngForOf",e.status),o.Fb(4),o.qc("nbDatepicker",t),o.Fb(6),o.qc("nbDatepicker",a),o.Fb(5),o.qc("icon",e.faSearch),o.Fb(3),o.qc("icon",e.faPlus),o.Fb(2),o.qc("showToggleButton",!1)("flipped",e.revealed),o.Fb(12),o.qc("ngForOf",e.data),o.Fb(2),o.qc("disabled",1===e.pageNumber),o.Fb(1),o.qc("icon",e.faAngleDoubleLeft),o.Fb(1),o.qc("disabled",e.pageNumber<=2),o.Fb(1),o.qc("icon",e.faAngleLeft),o.Fb(1),o.qc("ngIf",e.pageNumber>1),o.Fb(2),o.Kc(" ",e.pageNumber," "),o.Fb(1),o.qc("ngIf",e.pageNumber<e.nOfPages),o.Fb(1),o.qc("disabled",e.pageNumber>=e.nOfPages-2),o.Fb(1),o.qc("icon",e.faAngleRight),o.Fb(1),o.qc("disabled",e.pageNumber===e.nOfPages),o.Fb(1),o.qc("icon",e.faAngleDoubleRight),o.Fb(5),o.qc("icon",e.faAngleLeft),o.Fb(2),o.Jc(e.solicitacaoFlipada&&e.obterValorStatusEnum(e.solicitacaoFlipada.status)),o.Fb(2),o.Jc(e.solicitacaoFlipada&&e.formatarData(e.solicitacaoFlipada.dataDesejada)),o.Fb(2),o.Kc("R$",e.solicitacaoFlipada&&e.solicitacaoFlipada.valorTotal.toFixed(2),""),o.Fb(3),o.qc("ngForOf",e.solicitacaoFlipada&&e.solicitacaoFlipada.produtos),o.Fb(2),o.qc("disabled",e.solicitacaoFlipada&&"ABERTO"!==e.solicitacaoFlipada.status),o.Fb(1),o.qc("icon",e.faTrash)}},directives:[O.u,O.x,O.t,j.z,j.o,j.g,O.jb,j.n,j.f,O.gb,c.l,O.P,j.b,O.G,O.hb,O.v,O.q,G.a,x.d,O.L,O.w,O.Y,c.m,O.s,O.Z],styles:[".item[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.item[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1}.item[_ngcontent-%COMP%]:first-child{border-top:none}"]}),t})();function ot(t,e){1&t&&o.Tb(0,"ngx-lista-solicitacao-desktop")}function rt(t,e){1&t&&o.Tb(0,"ngx-lista-solicitacao-mobile")}let st=(()=>{class t{constructor(t){this.breakpointObserver=t,this.isHandset$=this.breakpointObserver.observe("(max-width: 599.99px) and (orientation: portrait), (max-width: 959.99px) and (orientation: landscape)").pipe(Object(n.a)(t=>t.matches),Object(i.a)())}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(o.Sb(Y))},t.\u0275cmp=o.Mb({type:t,selectors:[["ngx-lista-solicitacao"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["mobileList",""]],template:function(t,e){if(1&t&&(o.Gc(0,ot,1,0,"ngx-lista-solicitacao-desktop",0),o.lc(1,"async"),o.Gc(2,rt,1,0,"ng-template",null,1,o.Hc)),2&t){const t=o.xc(3);o.qc("ngIf",!1===o.mc(1,2,e.isHandset$))("ngIfElse",t)}},directives:[c.m,Z,it],pipes:[c.b],styles:[""]}),t})();var bt=a("oG2T");let lt=(()=>{class t{}return t.\u0275mod=o.Qb({type:t}),t.\u0275inj=o.Pb({factory:function(e){return new(e||t)},imports:[[c.c,O.ab,O.y,c.c,O.y,j.u,j.h,O.r,O.Q,x.g,O.H,bt.a,G.b,O.kb]]}),t})(),ut=(()=>{class t{}return t.\u0275mod=o.Qb({type:t}),t.\u0275inj=o.Pb({factory:function(e){return new(e||t)},imports:[[c.c,O.Jb,O.y,j.u,j.h,O.r,O.Q,x.g,O.H,G.b,O.kb,bt.a]]}),t})(),dt=(()=>{class t{}return t.\u0275mod=o.Qb({type:t}),t.\u0275inj=o.Pb({factory:function(e){return new(e||t)},imports:[[c.c,lt,ut,x.g.forChild([{path:"",component:st}])]]}),t})()},"8/IB":function(t,e,a){"use strict";a.d(e,"a",(function(){return b}));var c=a("MAky"),n=a("lJxs"),i=a("JIr8"),o=a("fXoL"),r=a("tk/3"),s=a("aceb");let b=(()=>{class t{constructor(t,e){this.http=t,this.toastrService=e,this.url=`${c.b}/solicitacao-produto2`,this.urlProduto=`${c.b}/produtos-solicitados`}criarSolicitacao(t){return this.http.post(`${this.url}/salvar`,t)}buscarSolicitacoes(t,e,a){return this.http.post(`${this.url}/buscar`,{filtro:t,pageNumber:e,nPerPage:a}).pipe(Object(n.a)(t=>t),Object(i.a)(t=>(this.toastrService.danger(t.error.errors,"ERRO!"),[])))}countProdutos(t){return this.http.post(`${this.urlProduto}/count`,{filtro:t})}relProd(t,e,a){return this.http.post(`${this.urlProduto}/relProd`,{frequencia:t,start:e,end:a})}solicitacoesPagasRel(t,e,a){return this.http.post(`${this.url}/solicitacoesPagasRel`,{frequencia:t,start:e,end:a})}solicitacoesOutrasRel(t,e,a){return this.http.post(`${this.url}/solicitacoesOutrasRel`,{frequencia:t,start:e,end:a})}buscarSolicitacoesGeral(t,e,a){return this.http.post(`${this.url}/buscarGeral`,{filtro:t,pageNumber:e,nPerPage:a})}alterarStatus(t,e,a){return this.http.post(`${this.url}/alterar-status`,{solicitacoes:t,status:e,cancelamento:a})}usuariosSelect(){return this.http.get(`${c.b}/user/select`)}cancelar(t){return this.http.post(`${this.url}/solicitarCancelamento`,{solicitacaoId:t})}relatorio(t){return this.http.post(`${this.url}/relatorio`,{frequencia:t})}}return t.\u0275fac=function(e){return new(e||t)(o.cc(r.b),o.cc(s.vb))},t.\u0275prov=o.Ob({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},mrSG:function(t,e,a){"use strict";function c(t,e,a,c){var n,i=arguments.length,o=i<3?e:null===c?c=Object.getOwnPropertyDescriptor(e,a):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,a,c);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(o=(i<3?n(o):i>3?n(e,a,o):n(e,a))||o);return i>3&&o&&Object.defineProperty(e,a,o),o}function n(t,e,a,c){return new(a||(a=Promise))((function(n,i){function o(t){try{s(c.next(t))}catch(e){i(e)}}function r(t){try{s(c.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?n(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(o,r)}s((c=c.apply(t,e||[])).next())}))}a.d(e,"b",(function(){return c})),a.d(e,"a",(function(){return n}))}}]);