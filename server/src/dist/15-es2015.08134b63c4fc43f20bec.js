(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"O+SD":function(e,t,i){"use strict";i.r(t),i.d(t,"customCurrencyMaskConfig",(function(){return R})),i.d(t,"CriarProdutoModule",(function(){return w}));var s=i("ofXK"),n=i("3Pt+"),a=i("fyq4"),r=i("fXoL"),l=i("tyNb"),o=i("aceb");let u=new r.r("currency.mask.config");class h{constructor(e){this.htmlInputElement=e}setCursorAt(e){if(this.htmlInputElement.setSelectionRange)this.htmlInputElement.focus(),this.htmlInputElement.setSelectionRange(e,e);else if(this.htmlInputElement.createTextRange){let t=this.htmlInputElement.createTextRange();t.collapse(!0),t.moveEnd("character",e),t.moveStart("character",e),t.select()}}updateValueAndCursor(e,t,i){this.rawValue=e,this.setCursorAt(i-=t-e.length)}get canInputMoreNumbers(){let e=!(this.rawValue.length>=this.htmlInputElement.maxLength&&this.htmlInputElement.maxLength>=0),t=this.inputSelection.selectionStart,i=this.inputSelection.selectionEnd,s=!(t==i||!this.htmlInputElement.value.substring(t,i).match(/[^0-9\u0660-\u0669\u06F0-\u06F9]/)),n="0"==this.htmlInputElement.value.substring(0,1);return e||s||n}get inputSelection(){let e=0,t=0;if("number"==typeof this.htmlInputElement.selectionStart&&"number"==typeof this.htmlInputElement.selectionEnd)e=this.htmlInputElement.selectionStart,t=this.htmlInputElement.selectionEnd;else{let i=document.selection.createRange();if(i&&i.parentElement()==this.htmlInputElement){let s=this.htmlInputElement.value.length,n=this.htmlInputElement.value.replace(/\r\n/g,"\n"),a=this.htmlInputElement.createTextRange();a.moveToBookmark(i.getBookmark());let r=this.htmlInputElement.createTextRange();r.collapse(!1),a.compareEndPoints("StartToEnd",r)>-1?e=t=s:(e=-a.moveStart("character",-s),e+=n.slice(0,e).split("\n").length-1,a.compareEndPoints("EndToEnd",r)>-1?t=s:(t=-a.moveEnd("character",-s),t+=n.slice(0,t).split("\n").length-1))}}return{selectionStart:e,selectionEnd:t}}get rawValue(){return this.htmlInputElement&&this.htmlInputElement.value}set rawValue(e){this._storedRawValue=e,this.htmlInputElement&&(this.htmlInputElement.value=e)}get storedRawValue(){return this._storedRawValue}}class c{constructor(e,t){this.htmlInputElement=e,this.options=t,this.PER_AR_NUMBER=new Map,this.inputManager=new h(e),this.initialize()}initialize(){this.PER_AR_NUMBER.set("\u06f0","0"),this.PER_AR_NUMBER.set("\u06f1","1"),this.PER_AR_NUMBER.set("\u06f2","2"),this.PER_AR_NUMBER.set("\u06f3","3"),this.PER_AR_NUMBER.set("\u06f4","4"),this.PER_AR_NUMBER.set("\u06f5","5"),this.PER_AR_NUMBER.set("\u06f6","6"),this.PER_AR_NUMBER.set("\u06f7","7"),this.PER_AR_NUMBER.set("\u06f8","8"),this.PER_AR_NUMBER.set("\u06f9","9"),this.PER_AR_NUMBER.set("\u0660","0"),this.PER_AR_NUMBER.set("\u0661","1"),this.PER_AR_NUMBER.set("\u0662","2"),this.PER_AR_NUMBER.set("\u0663","3"),this.PER_AR_NUMBER.set("\u0664","4"),this.PER_AR_NUMBER.set("\u0665","5"),this.PER_AR_NUMBER.set("\u0666","6"),this.PER_AR_NUMBER.set("\u0667","7"),this.PER_AR_NUMBER.set("\u0668","8"),this.PER_AR_NUMBER.set("\u0669","9")}addNumber(e){let t=String.fromCharCode(e);if(this.rawValue){let e=this.inputSelection.selectionStart,i=this.inputSelection.selectionEnd;this.rawValue=this.rawValue.substring(0,e)+t+this.rawValue.substring(i,this.rawValue.length),this.updateFieldValue(e+1)}else this.rawValue=this.applyMask(!1,t),this.updateFieldValue()}applyMask(e,t){let{allowNegative:i,decimal:s,precision:n,prefix:a,suffix:r,thousands:l,min:o,max:u}=this.options,h=(t=e?new Number(t).toFixed(n):t).replace(/[^0-9\u0660-\u0669\u06F0-\u06F9]/g,"");if(!h)return"";let c=h.slice(0,h.length-n).replace(/^\u0660*/g,"").replace(/^\u06F0*/g,"").replace(/^0*/g,"");""==c&&(c="0");let p=parseInt(c);c=c.replace(/\B(?=([0-9\u0660-\u0669\u06F0-\u06F9]{3})+(?![0-9\u0660-\u0669\u06F0-\u06F9]))/g,l),l&&c.startsWith(l)&&(c=c.substring(1));let d=c,m=h.slice(h.length-n),g=parseInt(m)||0,b=t.indexOf("-")>-1;u=this.isNullOrUndefined(u)||this.isNullOrUndefined(o)?u:Math.max(u,o);let f=p+g/100;return f=b?-f:f,!this.isNullOrUndefined(u)&&f>u?this.applyMask(!0,u+""):!this.isNullOrUndefined(o)&&f<o?this.applyMask(!0,o+""):(n>0&&(d+="0"==d&&m.length<n?s+"0".repeat(n-1)+m:s+m),(b&&i&&0!=f?"-":"")+a+d+r)}clearMask(e){if(this.isNullable()&&""===e)return null;let t=(e||"0").replace(this.options.prefix,"").replace(this.options.suffix,"");return this.options.thousands&&(t=t.replace(new RegExp("\\"+this.options.thousands,"g"),"")),this.options.decimal&&(t=t.replace(this.options.decimal,".")),this.PER_AR_NUMBER.forEach((e,i)=>{const s=new RegExp(i,"g");t=t.replace(s,e)}),parseFloat(t)}changeToNegative(){this.options.allowNegative&&""!=this.rawValue&&"-"!=this.rawValue.charAt(0)&&0!=this.value&&(this.rawValue=this.applyMask(!1,"-"+this.rawValue))}changeToPositive(){this.rawValue=this.applyMask(!1,this.rawValue.replace("-",""))}removeNumber(e){if(this.isNullable()&&0==this.value)return void(this.rawValue=null);let t=this.inputSelection.selectionEnd,i=this.inputSelection.selectionStart;i>this.rawValue.length-this.options.suffix.length&&(t=this.rawValue.length-this.options.suffix.length,i=this.rawValue.length-this.options.suffix.length);let s=this.rawValue.substr(i-1,1).match(/\d/)?0:-1;(8!=e||i-1!=0||this.rawValue.substr(i,1).match(/\d/))&&(46!=e&&63272!=e||0!==i||this.rawValue.substr(i+1,1).match(/\d/))||(s=1),t=46==e||63272==e?t+1:t,i=8==e?i-1:i,this.rawValue=this.rawValue.substring(0,i)+this.rawValue.substring(t,this.rawValue.length),this.updateFieldValue(i+s)}updateFieldValue(e){let t=this.applyMask(!1,this.rawValue||"");this.inputManager.updateValueAndCursor(t,this.rawValue.length,e=null==e?this.rawValue.length:e)}updateOptions(e){let t=this.value;this.options=e,this.value=t}prefixLength(){return this.options.prefix.length}isNullable(){return this.options.nullable}get canInputMoreNumbers(){return this.inputManager.canInputMoreNumbers}get inputSelection(){return this.inputManager.inputSelection}get rawValue(){return this.inputManager.rawValue}set rawValue(e){this.inputManager.rawValue=e}get storedRawValue(){return this.inputManager.storedRawValue}get value(){return this.clearMask(this.rawValue)}set value(e){this.rawValue=this.applyMask(!0,""+e)}isNullOrUndefined(e){return null==e}}class p{constructor(e,t){this.inputService=new c(e,t)}handleCut(e){setTimeout(()=>{this.inputService.updateFieldValue(),this.setValue(this.inputService.value),this.onModelChange(this.inputService.value)},0)}handleInput(e){let t=this.inputService.rawValue.charCodeAt(this.inputService.rawValue.length-1),i=this.inputService.rawValue.length,s=this.inputService.inputSelection.selectionEnd,n=this.inputService.storedRawValue.length;if(this.inputService.rawValue=this.inputService.storedRawValue,i==s&&1==Math.abs(i-n)){if(i<n&&this.inputService.removeNumber(8),i>n)switch(t){case 43:this.inputService.changeToPositive();break;case 45:this.inputService.changeToNegative();break;default:if(!this.inputService.canInputMoreNumbers)return;this.inputService.addNumber(t)}this.setCursorPosition(e),this.onModelChange(this.inputService.value)}else this.setCursorPosition(e)}handleKeydown(e){let t=e.which||e.charCode||e.keyCode;if(8==t||46==t||63272==t){e.preventDefault();let i=Math.abs(this.inputService.inputSelection.selectionEnd-this.inputService.inputSelection.selectionStart);0==i&&(this.inputService.removeNumber(t),this.onModelChange(this.inputService.value)),i>=this.inputService.rawValue.length-this.inputService.prefixLength()&&this.clearValue()}}clearValue(){this.setValue(this.inputService.isNullable()?null:0),this.onModelChange(this.inputService.value)}handleKeypress(e){let t=e.which||e.charCode||e.keyCode;if(97!==t||!e.ctrlKey){switch(t){case void 0:case 9:case 13:case 37:case 39:return;case 43:this.inputService.changeToPositive();break;case 45:this.inputService.changeToNegative();break;default:this.inputService.canInputMoreNumbers&&(Math.abs(this.inputService.inputSelection.selectionEnd-this.inputService.inputSelection.selectionStart)==this.inputService.rawValue.length&&this.setValue(null),this.inputService.addNumber(t))}e.preventDefault(),this.onModelChange(this.inputService.value)}}handlePaste(e){setTimeout(()=>{this.inputService.updateFieldValue(),this.setValue(this.inputService.value),this.onModelChange(this.inputService.value)},1)}updateOptions(e){this.inputService.updateOptions(e)}getOnModelChange(){return this.onModelChange}setOnModelChange(e){this.onModelChange=e}getOnModelTouched(){return this.onModelTouched}setOnModelTouched(e){this.onModelTouched=e}setValue(e){this.inputService.value=e}setCursorPosition(e){setTimeout((function(){e.target.setSelectionRange(e.target.value.length,e.target.value.length)}),0)}}const d={provide:n.l,useExisting:Object(r.W)(()=>m),multi:!0};let m=(()=>{let e=class{constructor(e,t,i){this.currencyMaskConfig=e,this.elementRef=t,this.keyValueDiffers=i,this.options={},this.optionsTemplate={align:"right",allowNegative:!0,allowZero:!0,decimal:".",precision:2,prefix:"$ ",suffix:"",thousands:",",nullable:!1},e&&(this.optionsTemplate=e),this.keyValueDiffer=i.find({}).create()}ngAfterViewInit(){this.elementRef.nativeElement.style.textAlign=this.options&&this.options.align?this.options.align:this.optionsTemplate.align}ngDoCheck(){this.keyValueDiffer.diff(this.options)&&(this.elementRef.nativeElement.style.textAlign=this.options.align?this.options.align:this.optionsTemplate.align,this.inputHandler.updateOptions(Object.assign({},this.optionsTemplate,this.options)))}ngOnInit(){this.inputHandler=new p(this.elementRef.nativeElement,Object.assign({},this.optionsTemplate,this.options))}handleBlur(e){this.inputHandler.getOnModelTouched().apply(e)}handleCut(e){this.isChromeAndroid()||this.inputHandler.handleCut(e)}handleInput(e){this.isChromeAndroid()&&this.inputHandler.handleInput(e)}handleKeydown(e){this.isChromeAndroid()||this.inputHandler.handleKeydown(e)}handleKeypress(e){this.isChromeAndroid()||this.inputHandler.handleKeypress(e)}handlePaste(e){this.isChromeAndroid()||this.inputHandler.handlePaste(e)}isChromeAndroid(){return/chrome/i.test(navigator.userAgent)&&/android/i.test(navigator.userAgent)}registerOnChange(e){this.inputHandler.setOnModelChange(e)}registerOnTouched(e){this.inputHandler.setOnModelTouched(e)}setDisabledState(e){this.elementRef.nativeElement.disabled=e}writeValue(e){this.inputHandler.setValue(e)}};return e.\u0275fac=function(t){return new(t||e)(r.Rb(u,8),r.Rb(r.l),r.Rb(r.u))},e.\u0275dir=r.Mb({type:e,selectors:[["","currencyMask",""]],hostBindings:function(e,t){1&e&&r.fc("blur",(function(e){return t.handleBlur(e)}))("cut",(function(e){return t.handleCut(e)}))("input",(function(e){return t.handleInput(e)}))("keydown",(function(e){return t.handleKeydown(e)}))("keypress",(function(e){return t.handleKeypress(e)}))("paste",(function(e){return t.handlePaste(e)}))},inputs:{options:"options"},features:[r.Db([d])]}),e})();var g;let b=(()=>{let e=g=class{static forRoot(e){return{ngModule:g,providers:[{provide:u,useValue:e}]}}};return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},imports:[[s.c,n.h]]}),e})();function f(e,t){1&e&&(r.Xb(0,"p",15),r.Gc(1," Campo obrigat\xf3rio! "),r.Wb())}function v(e,t){1&e&&(r.Xb(0,"p",15),r.Gc(1," Campo obrigat\xf3rio! "),r.Wb())}let E=(()=>{class e{constructor(e,t,i,s,a){this.fb=e,this.router=t,this.route=i,this.produtoService=s,this.toastrService=a,this.form=this.fb.group({nome:[null,n.x.required],descricao:null,valor:[null,n.x.required],ativo:null}),this.route.params.subscribe(e=>{this.id=e.id,"novo"!==this.id?(this.headerMessage="Editar",this.produtoService.buscarProdutoPorId(this.id).subscribe(e=>{this.form.patchValue(Object.assign({},e))})):this.headerMessage="Criar"})}ngOnInit(){}salvar(){this.form.valid&&("novo"===this.id?this.produtoService.criarProduto(Object.assign({},this.form.value)).subscribe(e=>{this.router.navigate(["/pages/admin/produto"]),this.toastrService.success("Produto criado com sucesso!","Sucesso!")},e=>this.toastrService.danger("Erro!",e.errors)):this.produtoService.atualizarProduto(Object.assign({},this.form.value),this.id).subscribe(e=>{this.router.navigate(["/pages/admin/produto"]),this.toastrService.success("Produto atualizado com sucesso!")},e=>this.toastrService.danger("Erro!",e.errors)))}verificaValidacaoCampo(e,t){return this.form.controls[e].dirty&&(t?this.form.controls[e].errors&&this.form.controls[e].errors[t]:this.form.controls[e].invalid)}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(n.c),r.Rb(l.c),r.Rb(l.a),r.Rb(a.a),r.Rb(o.mb))},e.\u0275cmp=r.Lb({type:e,selectors:[["ngx-criar-produto"]],decls:26,vars:8,consts:[[3,"formGroup"],["nbButton","","size","small","ghost","","routerLink","/pages/admin/produto"],["icon","arrow-left"],[1,"row","form-group"],[1,"form-group","col-md-6"],["for","Nome","required","",1,"label"],["type","text","nbInput","","placeholder","Nome","fullWidth","","id","nome","formControlName","nome",3,"status"],["class","caption status-danger",4,"ngIf"],[1,"form-group","col-md-3"],["for","valor",1,"label"],["type","tel","nbInput","","currencyMask","","placeholder","Valor","fullWidth","","id","valor","formControlName","valor","maxlength","15",3,"status"],[1,"row"],[1,"form-group","col-md-9"],["nbInput","","placeholder","Descri\xe7\xe3o","fullWidth","","id","descricao","formControlName","descricao",3,"status"],["nbButton","",3,"disabled","click"],[1,"caption","status-danger"]],template:function(e,t){1&e&&(r.Xb(0,"form",0),r.Xb(1,"nb-card"),r.Xb(2,"nb-card-header"),r.Xb(3,"button",1),r.Sb(4,"nb-icon",2),r.Wb(),r.Gc(5),r.Wb(),r.Xb(6,"nb-card-body"),r.Xb(7,"div",3),r.Xb(8,"div",4),r.Xb(9,"label",5),r.Gc(10,"Nome "),r.Wb(),r.Sb(11,"input",6),r.Ec(12,f,2,0,"p",7),r.Wb(),r.Xb(13,"div",8),r.Xb(14,"label",9),r.Gc(15,"Valor"),r.Wb(),r.Sb(16,"input",10),r.Ec(17,v,2,0,"p",7),r.Wb(),r.Wb(),r.Xb(18,"div",11),r.Xb(19,"div",12),r.Xb(20,"label",5),r.Gc(21,"Descri\xe7\xe3o"),r.Wb(),r.Sb(22,"textarea",13),r.Wb(),r.Wb(),r.Wb(),r.Xb(23,"nb-card-footer"),r.Xb(24,"button",14),r.fc("click",(function(){return t.salvar()})),r.Gc(25,"Enviar"),r.Wb(),r.Wb(),r.Wb(),r.Wb()),2&e&&(r.pc("formGroup",t.form),r.Eb(5),r.Ic(" ",t.headerMessage," Produto "),r.Eb(6),r.pc("status",t.verificaValidacaoCampo("nome")?"danger":""),r.Eb(1),r.pc("ngIf",t.verificaValidacaoCampo("nome","required")),r.Eb(4),r.pc("status",t.verificaValidacaoCampo("valor")?"danger":""),r.Eb(1),r.pc("ngIf",t.verificaValidacaoCampo("valor","required")),r.Eb(5),r.pc("status",t.verificaValidacaoCampo("descricao")?"danger":""),r.Eb(2),r.pc("disabled",t.form.invalid))},directives:[n.z,n.o,n.g,o.o,o.q,o.l,l.d,o.E,o.n,o.H,n.b,n.n,n.f,s.m,m,n.i,o.p],styles:[""]}),e})();const R={align:"right",allowNegative:!0,allowZero:!0,decimal:",",precision:2,prefix:"R$ ",suffix:"",thousands:".",nullable:!0};let w=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},imports:[[s.c,o.r,o.I,o.m,n.u,n.h,o.G,b.forRoot(R),l.g.forChild([{path:":id",component:E}])]]}),e})()}}]);