function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"3ZFV":function(t,e,n){"use strict";n.r(e),n.d(e,"ListaSolicitacaoModule",(function(){return Yt}));var a,c,i=n("ofXK"),o=n("lJxs"),r=n("UXun"),s=n("fXoL"),b=n("nLfN"),u=n("XNiG"),l=n("itXk"),d=n("GyhO"),f=n("HDdC"),h=n("IzEk"),g=n("zP0r"),p=n("Kj3r"),m=n("JX91"),v=n("1G5W"),k=n("8LU1"),Y=new Set,C=((c=function(){function t(e){_classCallCheck(this,t),this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):X}return _createClass(t,[{key:"matchMedia",value:function(t){return this._platform.WEBKIT&&function(t){if(!Y.has(t))try{a||((a=document.createElement("style")).setAttribute("type","text/css"),document.head.appendChild(a)),a.sheet&&(a.sheet.insertRule("@media ".concat(t," {.fx-query-test{ }}"),0),Y.add(t))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}]),t}()).\u0275fac=function(t){return new(t||c)(s.cc(b.a))},c.\u0275prov=Object(s.Ob)({factory:function(){return new c(Object(s.cc)(b.a))},token:c,providedIn:"root"}),c);function X(t){return{matches:"all"===t||""===t,media:t,addListener:function(){},removeListener:function(){}}}var P,y=((P=function(){function t(e,n){_classCallCheck(this,t),this._mediaMatcher=e,this._zone=n,this._queries=new Map,this._destroySubject=new u.a}return _createClass(t,[{key:"ngOnDestroy",value:function(){this._destroySubject.next(),this._destroySubject.complete()}},{key:"isMatched",value:function(t){var e=this;return F(Object(k.a)(t)).some((function(t){return e._registerQuery(t).mql.matches}))}},{key:"observe",value:function(t){var e=this,n=F(Object(k.a)(t)).map((function(t){return e._registerQuery(t).observable})),a=Object(l.a)(n);return(a=Object(d.a)(a.pipe(Object(h.a)(1)),a.pipe(Object(g.a)(1),Object(p.a)(0)))).pipe(Object(o.a)((function(t){var e={matches:!1,breakpoints:{}};return t.forEach((function(t){e.matches=e.matches||t.matches,e.breakpoints[t.query]=t.matches})),e})))}},{key:"_registerQuery",value:function(t){var e=this;if(this._queries.has(t))return this._queries.get(t);var n=this._mediaMatcher.matchMedia(t),a={observable:new f.a((function(t){var a=function(n){return e._zone.run((function(){return t.next(n)}))};return n.addListener(a),function(){n.removeListener(a)}})).pipe(Object(m.a)(n),Object(o.a)((function(e){return{query:t,matches:e.matches}})),Object(v.a)(this._destroySubject)),mql:n};return this._queries.set(t,a),a}}]),t}()).\u0275fac=function(t){return new(t||P)(s.cc(C),s.cc(s.A))},P.\u0275prov=Object(s.Ob)({factory:function(){return new P(Object(s.cc)(C),Object(s.cc)(s.A))},token:P,providedIn:"root"}),P);function F(t){return t.map((function(t){return t.split(",")})).reduce((function(t,e){return t.concat(e)})).map((function(t){return t.trim()}))}var S,O=n("mrSG"),I=n("aceb"),w=n("8/IB"),D=n("vI6V"),q=n("wd/R"),T=n("wHSu"),_=((S=function(){function t(e){_classCallCheck(this,t),this.ref=e}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"cancel",value:function(){this.ref.close(!1)}},{key:"submit",value:function(){this.ref.close(!0)}}]),t}()).\u0275fac=function(t){return new(t||S)(s.Sb(I.E))},S.\u0275cmp=s.Mb({type:S,selectors:[["ngx-dialog-show-component"]],decls:10,vars:0,consts:[["nbButton","","status","danger",1,"cancel",3,"click"],["nbButton","","status","success",3,"click"]],template:function(t,e){1&t&&(s.Yb(0,"nb-card"),s.Yb(1,"nb-card-header"),s.Ic(2,"Confirme a altera\xe7\xe3o de status"),s.Xb(),s.Yb(3,"nb-card-body"),s.Ic(4," Voc\xea tem certeza que deseja solicitar o cancelamento? "),s.Xb(),s.Yb(5,"nb-card-footer"),s.Yb(6,"button",0),s.gc("click",(function(){return e.cancel()})),s.Ic(7,"Cancelar"),s.Xb(),s.Yb(8,"button",1),s.gc("click",(function(){return e.submit()})),s.Ic(9,"Solicitar"),s.Xb(),s.Xb(),s.Xb())},directives:[I.p,I.s,I.o,I.q,I.l],styles:["input[_ngcontent-%COMP%]{width:100%}.cancel[_ngcontent-%COMP%]{margin-right:2rem}"]}),S),G=n("3Pt+"),x=n("6NWb"),j=n("tyNb");function M(t,e){if(1&t&&(s.Yb(0,"nb-option",34),s.Ic(1),s.Xb()),2&t){var n=e.$implicit;s.qc("value",n.k),s.Fb(1),s.Jc(n.v)}}function N(t,e){1&t&&s.Tb(0,"tr",35)}function A(t,e){1&t&&s.Tb(0,"tr",36),2&t&&s.qc("clickToToggle",!1)}function R(t,e){if(1&t&&(s.Yb(0,"th",37),s.Ic(1," Status/Produto "),s.Xb()),2&t){var n=s.kc();s.qc("nbSortHeader",n.getSortDirection("nome"))}}function B(t,e){if(1&t&&s.Tb(0,"nb-tree-grid-row-toggle",40),2&t){var n=s.kc().$implicit;s.qc("expanded",n.expanded)}}function L(t,e){if(1&t&&(s.Yb(0,"td",38),s.Gc(1,B,1,1,"nb-tree-grid-row-toggle",39),s.Ic(2),s.Xb()),2&t){var n=e.$implicit;s.Fb(1),s.qc("ngIf",n.children),s.Fb(1),s.Kc(" ",n.data.nome," ")}}function z(t,e){if(1&t&&(s.Yb(0,"th",37),s.Ic(1," Dt. Desejada/Qtd. Solicitada "),s.Xb()),2&t){var n=s.kc();s.qc("nbSortHeader",n.getSortDirection("uq"))}}function E(t,e){if(1&t&&(s.Yb(0,"td",38),s.Ic(1),s.Xb()),2&t){var n=e.$implicit;s.Fb(1),s.Kc(" ",n.data.uq," ")}}function H(t,e){if(1&t&&(s.Yb(0,"th",37),s.Ic(1," Valor "),s.Xb()),2&t){var n=s.kc();s.qc("nbSortHeader",n.getSortDirection("valor"))}}function V(t,e){if(1&t&&(s.Yb(0,"td",38),s.Ic(1),s.Xb()),2&t){var n=e.$implicit;s.Fb(1),s.Kc(" ",n.data.valor," ")}}function K(t,e){if(1&t&&(s.Yb(0,"th",37),s.Ic(1," Criado em "),s.Xb()),2&t){var n=s.kc();s.qc("nbSortHeader",n.getSortDirection("dataDesejada"))}}function $(t,e){if(1&t&&(s.Yb(0,"td",38),s.Ic(1),s.Xb()),2&t){var n=e.$implicit;s.Fb(1),s.Kc(" ",n.data.criadoEm," ")}}function J(t,e){1&t&&(s.Yb(0,"th",41),s.Ic(1," Cancelar "),s.Xb())}function W(t,e){if(1&t){var n=s.Zb();s.Yb(0,"td",38),s.Yb(1,"button",42),s.gc("click",(function(){s.Ac(n);var t=e.$implicit;return s.kc().alterarStatus(t.data._id)})),s.Tb(2,"fa-icon",31),s.Xb(),s.Xb()}if(2&t){var a=e.$implicit,c=s.kc();s.Fb(1),s.qc("disabled","Aberto"!==a.data.nome),s.Fb(1),s.qc("icon",c.faTrash)}}function Q(t,e){if(1&t){var n=s.Zb();s.Yb(0,"button",43),s.gc("click",(function(){s.Ac(n);var t=s.kc();return t.mudarPagina(t.pageNumber-1)})),s.Ic(1),s.Xb()}if(2&t){var a=s.kc();s.Fb(1),s.Kc(" ",a.pageNumber-1," ")}}function Z(t,e){if(1&t){var n=s.Zb();s.Yb(0,"button",43),s.gc("click",(function(){s.Ac(n);var t=s.kc();return t.mudarPagina(t.pageNumber+1)})),s.Ic(1),s.Xb()}if(2&t){var a=s.kc();s.Fb(1),s.Kc(" ",a.pageNumber+1," ")}}var U,tt,et=((tt=function(){function t(e,n,a,c,i){_classCallCheck(this,t),this.dataSourceBuilder=e,this.solicitacaoProdutoService=n,this.fb=a,this.toastrService=c,this.dialogService=i,this.customColumn="nome",this.defaultColumns=[],this.allColumns=["nome","uq","valor","dataDesejada","cancelar"],this.status=Object.keys(D.d).map((function(t){return{k:t,v:D.d[t]}})),this.sortDirection=I.ib.NONE,this.filtro=this.fb.group({dataCriacao:null,dataDesejada:null,status:null}),this.faSearch=T.g,this.faPlus=T.f,this.faTrash=T.h,this.faAngleRight=T.d,this.faAngleLeft=T.c,this.faAngleDoubleLeft=T.a,this.faAngleDoubleRight=T.b,this.nPerPage=10,this.pageNumber=1}return _createClass(t,[{key:"ngOnInit",value:function(){return Object(O.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=q().startOf("month"),n=q().endOf("month"),this.filtro.patchValue({status:"ABERTO",dataCriacao:{start:e,end:n},dataDesejada:{start:e,end:n}}),this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,1,this.nPerPage).subscribe((function(t){a.setData(t.solicitacoes),a.setLastPageAndCount(t.count)}));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"setLastPageAndCount",value:function(t){this.countSolicitacoes=t,this.nOfPages=Math.ceil(t/this.nPerPage)}},{key:"setData",value:function(t){this.data=t.map((function(t){var e=t.produtos;delete t.produtos;var n=e.map((function(t){return{data:{uq:t.quantidade,nome:t.produto.nome,valor:"R$ ".concat(t.valor.toFixed(2))}}})),a=q(t.dataDesejada).format("DD/MM/YYYY"),c=q(t.criadoEm).format("DD/MM/YYYY");return{data:{_id:t._id,nome:D.d[t.status],uq:a,valor:"R$ ".concat(t.valorTotal.toFixed(2)),criadoEm:c},children:n}})),this.dataSource=this.dataSourceBuilder.create(this.data)}},{key:"buscar",value:function(){var t=this;this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,1,this.nPerPage).subscribe((function(e){t.setData(e.solicitacoes),t.setLastPageAndCount(e.count),t.pageNumber=1}))}},{key:"cancelar",value:function(t){var e=this;this.solicitacaoProdutoService.cancelar(t).subscribe((function(t){e.toastrService.info("Favor, aguarde aprova\xe7\xe3o do respons\xe1vel","Solicita\xe7\xe3o de cancelamento enviada",{duration:6e3}),e.buscar()}))}},{key:"mudarPagina",value:function(t){var e=this;this.pageNumber=t,this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,this.pageNumber,this.nPerPage).subscribe((function(t){e.setData(t.solicitacoes),e.setLastPageAndCount(t.count)}))}},{key:"updateSort",value:function(t){this.sortColumn=t.column,this.sortDirection=t.direction}},{key:"getSortDirection",value:function(t){return this.sortColumn===t?this.sortDirection:I.ib.NONE}},{key:"getShowOn",value:function(t){return 400+100*t}},{key:"alterarStatus",value:function(t){var e=this;this.dialogService.open(_).onClose.subscribe((function(n){n&&e.cancelar(t)}))}}]),t}()).\u0275fac=function(t){return new(t||tt)(s.Sb(I.yb),s.Sb(w.a),s.Sb(G.c),s.Sb(I.pb),s.Sb(I.F))},tt.\u0275cmp=s.Mb({type:tt,selectors:[["ngx-lista-solicitacao-desktop"]],decls:65,vars:22,consts:[[3,"formGroup"],[1,"row","form-group"],[1,"form-group","col-md-4"],["for","Nome","required","",1,"label"],["placeholder","Status","formControlName","status","fullWidth",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4","form-group"],[1,"label"],["nbInput","","formControlName","dataCriacao",3,"nbDatepicker"],["format","DD/MM/YYYY"],["rangepicker",""],["nbInput","","formControlName","dataDesejada",3,"nbDatepicker"],["dataDesejada",""],["nbButton","","status","basic",2,"padding","6px","margin-right","8px",3,"click"],[2,"margin-right","5px",3,"icon"],["nbButton","","status","primary","routerLink","/pages/solicitacao-produto/solicitar",2,"padding","6px"],[3,"nbTreeGrid","nbSort","sort"],["nbTreeGridHeaderRow","",4,"nbTreeGridHeaderRowDef"],["nbTreeGridRow","",3,"clickToToggle",4,"nbTreeGridRowDef","nbTreeGridRowDefColumns"],[3,"nbTreeGridColumnDef"],["nbTreeGridHeaderCell","",3,"nbSortHeader",4,"nbTreeGridHeaderCellDef"],["nbTreeGridCell","",4,"nbTreeGridCellDef"],["nbTreeGridColumnDef","uq"],["nbTreeGridColumnDef","valor"],["nbTreeGridColumnDef","dataDesejada"],["nbTreeGridColumnDef","cancelar"],["nbTreeGridHeaderCell","",4,"nbTreeGridHeaderCellDef"],["nbButton","","ghost","",3,"disabled"],[3,"icon","click"],["nbButton","","ghost","",3,"disabled","click"],[3,"icon"],["nbButton","","ghost","",3,"click",4,"ngIf"],["nbButton","","ghost","","status","primary"],[3,"value"],["nbTreeGridHeaderRow",""],["nbTreeGridRow","",3,"clickToToggle"],["nbTreeGridHeaderCell","",3,"nbSortHeader"],["nbTreeGridCell",""],[3,"expanded",4,"ngIf"],[3,"expanded"],["nbTreeGridHeaderCell",""],["ghost","","nbButton","","size","small",3,"disabled","click"],["nbButton","","ghost","",3,"click"]],template:function(t,e){if(1&t&&(s.Yb(0,"nb-card"),s.Yb(1,"nb-card-header"),s.Ic(2," Minhas solicita\xe7\xf5es "),s.Xb(),s.Yb(3,"nb-card-body"),s.Yb(4,"form",0),s.Yb(5,"div",1),s.Yb(6,"div",2),s.Yb(7,"label",3),s.Ic(8,"Status"),s.Xb(),s.Yb(9,"nb-select",4),s.Yb(10,"nb-option",5),s.Ic(11,"Todos"),s.Xb(),s.Gc(12,M,2,2,"nb-option",6),s.Xb(),s.Xb(),s.Yb(13,"div",7),s.Yb(14,"label",8),s.Ic(15,"Data de cria\xe7\xe3o:"),s.Xb(),s.Tb(16,"input",9),s.Tb(17,"nb-rangepicker",10,11),s.Xb(),s.Yb(19,"div",7),s.Yb(20,"label",8),s.Ic(21,"Data desejada:"),s.Xb(),s.Tb(22,"input",12),s.Tb(23,"nb-rangepicker",10,13),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Yb(25,"nb-card-footer"),s.Yb(26,"button",14),s.gc("click",(function(){return e.buscar()})),s.Tb(27,"fa-icon",15),s.Ic(28,"buscar "),s.Xb(),s.Yb(29,"button",16),s.Tb(30,"fa-icon",15),s.Ic(31,"solicita\xe7\xe3o "),s.Xb(),s.Xb(),s.Xb(),s.Yb(32,"nb-card"),s.Yb(33,"nb-card-body"),s.Yb(34,"table",17),s.gc("sort",(function(t){return e.updateSort(t)})),s.Gc(35,N,1,0,"tr",18),s.Gc(36,A,1,1,"tr",19),s.Wb(37,20),s.Gc(38,R,2,1,"th",21),s.Gc(39,L,3,2,"td",22),s.Vb(),s.Wb(40,23),s.Gc(41,z,2,1,"th",21),s.Gc(42,E,2,1,"td",22),s.Vb(),s.Wb(43,24),s.Gc(44,H,2,1,"th",21),s.Gc(45,V,2,1,"td",22),s.Vb(),s.Wb(46,25),s.Gc(47,K,2,1,"th",21),s.Gc(48,$,2,1,"td",22),s.Vb(),s.Wb(49,26),s.Gc(50,J,2,0,"th",27),s.Gc(51,W,3,2,"td",22),s.Vb(),s.Xb(),s.Xb(),s.Yb(52,"nb-card-footer"),s.Yb(53,"button",28),s.Yb(54,"fa-icon",29),s.gc("click",(function(){return e.mudarPagina(1)})),s.Xb(),s.Xb(),s.Yb(55,"button",30),s.gc("click",(function(){return e.mudarPagina(e.pageNumber-2)})),s.Tb(56,"fa-icon",31),s.Xb(),s.Gc(57,Q,2,1,"button",32),s.Yb(58,"button",33),s.Ic(59),s.Xb(),s.Gc(60,Z,2,1,"button",32),s.Yb(61,"button",30),s.gc("click",(function(){return e.mudarPagina(e.pageNumber+2)})),s.Tb(62,"fa-icon",31),s.Xb(),s.Yb(63,"button",30),s.gc("click",(function(){return e.mudarPagina(e.nOfPages)})),s.Tb(64,"fa-icon",31),s.Xb(),s.Xb(),s.Xb()),2&t){var n=s.xc(18),a=s.xc(24);s.Fb(4),s.qc("formGroup",e.filtro),s.Fb(8),s.qc("ngForOf",e.status),s.Fb(4),s.qc("nbDatepicker",n),s.Fb(6),s.qc("nbDatepicker",a),s.Fb(5),s.qc("icon",e.faSearch),s.Fb(3),s.qc("icon",e.faPlus),s.Fb(4),s.qc("nbTreeGrid",e.dataSource)("nbSort",e.dataSource),s.Fb(1),s.qc("nbTreeGridHeaderRowDef",e.allColumns),s.Fb(1),s.qc("nbTreeGridRowDefColumns",e.allColumns),s.Fb(1),s.qc("nbTreeGridColumnDef",e.customColumn),s.Fb(16),s.qc("disabled",1===e.pageNumber),s.Fb(1),s.qc("icon",e.faAngleDoubleLeft),s.Fb(1),s.qc("disabled",e.pageNumber<=2),s.Fb(1),s.qc("icon",e.faAngleLeft),s.Fb(1),s.qc("ngIf",e.pageNumber>1),s.Fb(2),s.Kc(" ",e.pageNumber," "),s.Fb(1),s.qc("ngIf",e.pageNumber<e.nOfPages),s.Fb(1),s.qc("disabled",e.pageNumber>=e.nOfPages-2),s.Fb(1),s.qc("icon",e.faAngleRight),s.Fb(1),s.qc("disabled",e.pageNumber===e.nOfPages),s.Fb(1),s.qc("icon",e.faAngleDoubleRight)}},directives:[I.p,I.s,I.o,G.z,G.o,G.g,I.db,G.n,G.f,I.ab,i.l,I.K,G.b,I.B,I.bb,I.q,I.l,x.a,j.d,I.xb,I.jb,I.Cb,I.Fb,I.wb,I.zb,I.ub,i.m,I.Bb,I.Eb,I.Ab,I.kb,I.vb,I.Gb],styles:["button[nbTreeGridRowToggle][_ngcontent-%COMP%]{background:transparent;border:none;padding:0}.search-label[_ngcontent-%COMP%]{display:block}.search-input[_ngcontent-%COMP%]{margin-bottom:1rem}.nb-column-name[_ngcontent-%COMP%]{width:100%}@media screen and (min-width:400px){.nb-column-name[_ngcontent-%COMP%], .nb-column-size[_ngcontent-%COMP%]{width:50%}}@media screen and (min-width:500px){.nb-column-kind[_ngcontent-%COMP%], .nb-column-name[_ngcontent-%COMP%], .nb-column-size[_ngcontent-%COMP%]{width:33.333%}}@media screen and (min-width:600px){.nb-column-name[_ngcontent-%COMP%]{width:31%}.nb-column-items[_ngcontent-%COMP%], .nb-column-kind[_ngcontent-%COMP%], .nb-column-size[_ngcontent-%COMP%]{width:23%}}"]}),tt),nt=((U=function(){function t(e){_classCallCheck(this,t),this.ref=e}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"cancel",value:function(){this.ref.close(!1)}},{key:"submit",value:function(){this.ref.close(!0)}}]),t}()).\u0275fac=function(t){return new(t||U)(s.Sb(I.E))},U.\u0275cmp=s.Mb({type:U,selectors:[["ngx-dialog-show-sol-mobile"]],decls:10,vars:0,consts:[["nbButton","","status","danger",1,"cancel",3,"click"],["nbButton","","status","success",3,"click"]],template:function(t,e){1&t&&(s.Yb(0,"nb-card"),s.Yb(1,"nb-card-header"),s.Ic(2,"Confirme a altera\xe7\xe3o de status"),s.Xb(),s.Yb(3,"nb-card-body"),s.Ic(4," Voc\xea tem certeza que deseja solicitar o cancelamento? "),s.Xb(),s.Yb(5,"nb-card-footer"),s.Yb(6,"button",0),s.gc("click",(function(){return e.cancel()})),s.Ic(7,"Cancelar"),s.Xb(),s.Yb(8,"button",1),s.gc("click",(function(){return e.submit()})),s.Ic(9,"Solicitar"),s.Xb(),s.Xb(),s.Xb())},directives:[I.p,I.s,I.o,I.q,I.l],styles:["input[_ngcontent-%COMP%]{width:100%}.cancel[_ngcontent-%COMP%]{margin-right:2rem}"]}),U);function at(t,e){if(1&t&&(s.Yb(0,"nb-option",30),s.Ic(1),s.Xb()),2&t){var n=e.$implicit;s.qc("value",n.k),s.Fb(1),s.Jc(n.v)}}function ct(t,e){if(1&t){var n=s.Zb();s.Yb(0,"nb-list-item",31),s.gc("click",(function(){s.Ac(n);var t=e.$implicit;return s.kc().toggleView(t)})),s.Yb(1,"span"),s.Ic(2),s.Xb(),s.Yb(3,"span",32),s.Ic(4),s.Xb(),s.Yb(5,"span"),s.Ic(6),s.Xb(),s.Xb()}if(2&t){var a=e.$implicit,c=s.kc();s.Fb(2),s.Jc(c.obterValorStatusEnum(a.status)),s.Fb(2),s.Jc(c.formatarData(a.dataDesejada)),s.Fb(2),s.Kc("R$",a.valorTotal.toFixed(2),"")}}function it(t,e){if(1&t){var n=s.Zb();s.Yb(0,"button",33),s.gc("click",(function(){s.Ac(n);var t=s.kc();return t.mudarPagina(t.pageNumber-1)})),s.Ic(1),s.Xb()}if(2&t){var a=s.kc();s.Fb(1),s.Kc(" ",a.pageNumber-1," ")}}function ot(t,e){if(1&t){var n=s.Zb();s.Yb(0,"button",33),s.gc("click",(function(){s.Ac(n);var t=s.kc();return t.mudarPagina(t.pageNumber+1)})),s.Ic(1),s.Xb()}if(2&t){var a=s.kc();s.Fb(1),s.Kc(" ",a.pageNumber+1," ")}}function rt(t,e){if(1&t&&(s.Yb(0,"nb-list-item",18),s.Yb(1,"span",34),s.Ic(2),s.Xb(),s.Yb(3,"span"),s.Ic(4),s.Xb(),s.Yb(5,"span"),s.Ic(6),s.Xb(),s.Xb()),2&t){var n=e.$implicit;s.Fb(2),s.Jc(n.produto.nome),s.Fb(2),s.Kc("",n.quantidade," Und."),s.Fb(2),s.Kc("R$ ",n.valor.toFixed(2),"")}}var st,bt=((st=function(){function t(e,n,a,c){_classCallCheck(this,t),this.fb=e,this.solicitacaoProdutoService=n,this.dialogService=a,this.toastrService=c,this.faSearch=T.g,this.faPlus=T.f,this.faAngleRight=T.d,this.faAngleLeft=T.c,this.faAngleDoubleLeft=T.a,this.faAngleDoubleRight=T.b,this.status=Object.keys(D.d).map((function(t){return{k:t,v:D.d[t]}})),this.nPerPage=10,this.revealed=!1,this.pageNumber=1,this.faTrash=T.h,this.filtro=this.fb.group({dataCriacao:null,dataDesejada:null,status:null}),this.loading=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this,e=q().startOf("month"),n=q().endOf("month");this.filtro.patchValue({status:"ABERTO",dataCriacao:{start:e,end:n},dataDesejada:{start:e,end:n}}),this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,1,this.nPerPage).subscribe((function(e){t.data=e.solicitacoes,t.setLastPageAndCount(e.count)}))}},{key:"toggleView",value:function(t){this.revealed=!this.revealed,this.solicitacaoFlipada=t}},{key:"buscar",value:function(){var t=this;this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,1,this.nPerPage).subscribe((function(e){t.data=e.solicitacoes,t.setLastPageAndCount(e.count)}))}},{key:"formatarData",value:function(t){return q(t).format("DD/MM/YYYY")}},{key:"setLastPageAndCount",value:function(t){this.countSolicitacoes=t,this.nOfPages=Math.ceil(t/this.nPerPage)}},{key:"mudarPagina",value:function(t){var e=this;this.pageNumber=t,this.solicitacaoProdutoService.buscarSolicitacoes(this.filtro.value,this.pageNumber,this.nPerPage).subscribe((function(t){e.data=t.solicitacoes,e.setLastPageAndCount(t.count)}))}},{key:"obterValorStatusEnum",value:function(t){return D.d[t]}},{key:"alterarStatus",value:function(t){var e=this;this.dialogService.open(nt).onClose.subscribe((function(n){n&&e.cancelar(t)}))}},{key:"cancelar",value:function(t){var e=this;this.solicitacaoProdutoService.cancelar(t).subscribe((function(t){e.toastrService.info("Favor, aguarde aprova\xe7\xe3o do respons\xe1vel","Solicita\xe7\xe3o de cancelamento enviada",{duration:6e3}),e.buscar()}))}}]),t}()).\u0275fac=function(t){return new(t||st)(s.Sb(G.c),s.Sb(w.a),s.Sb(I.F),s.Sb(I.pb))},st.\u0275cmp=s.Mb({type:st,selectors:[["ngx-lista-solicitacao-mobile"]],decls:75,vars:27,consts:[[3,"formGroup"],[1,"row","form-group"],[1,"form-group","col-md-4"],["for","Nome","required","",1,"label"],["placeholder","Status","formControlName","status","fullWidth",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4","form-group"],[1,"label"],["nbInput","","formControlName","dataCriacao",3,"nbDatepicker"],["format","DD/MM/YYYY"],["rangepicker",""],["nbInput","","formControlName","dataDesejada",3,"nbDatepicker"],["dataDesejada",""],["nbButton","","status","basic",2,"padding","6px","margin-right","8px",3,"click"],[2,"margin-right","5px",3,"icon"],["nbButton","","status","primary","routerLink","/pages/solicitacao-produto/solicitar",2,"padding","6px"],[1,"own-scroll",3,"showToggleButton","flipped"],[1,"item",2,"font-size","small"],["class","item","style","font-size: small;",3,"click",4,"ngFor","ngForOf"],["nbButton","","ghost","","size","small",3,"disabled"],[3,"icon","click"],["nbButton","","ghost","","size","small",3,"disabled","click"],[3,"icon"],["nbButton","","ghost","","size","small",3,"click",4,"ngIf"],["nbButton","","ghost","","size","small","status","primary"],[2,"flex","1","padding","3px"],[2,"flex","2","padding","3px"],["class","item","style","font-size: small;",4,"ngFor","ngForOf"],["ghost","","nbButton","","size","small",3,"disabled","click"],[3,"value"],[1,"item",2,"font-size","small",3,"click"],[2,"padding","5px"],["nbButton","","ghost","","size","small",3,"click"],[2,"flex","2"]],template:function(t,e){if(1&t&&(s.Yb(0,"nb-card"),s.Yb(1,"nb-card-header"),s.Ic(2," Minhas solicita\xe7\xf5es "),s.Xb(),s.Yb(3,"nb-card-body"),s.Yb(4,"form",0),s.Yb(5,"div",1),s.Yb(6,"div",2),s.Yb(7,"label",3),s.Ic(8,"Status"),s.Xb(),s.Yb(9,"nb-select",4),s.Yb(10,"nb-option",5),s.Ic(11,"Todos"),s.Xb(),s.Gc(12,at,2,2,"nb-option",6),s.Xb(),s.Xb(),s.Yb(13,"div",7),s.Yb(14,"label",8),s.Ic(15,"Data de cria\xe7\xe3o:"),s.Xb(),s.Tb(16,"input",9),s.Tb(17,"nb-rangepicker",10,11),s.Xb(),s.Yb(19,"div",7),s.Yb(20,"label",8),s.Ic(21,"Data desejada:"),s.Xb(),s.Tb(22,"input",12),s.Tb(23,"nb-rangepicker",10,13),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Yb(25,"nb-card-footer"),s.Yb(26,"button",14),s.gc("click",(function(){return e.buscar()})),s.Tb(27,"fa-icon",15),s.Ic(28,"buscar "),s.Xb(),s.Yb(29,"button",16),s.Tb(30,"fa-icon",15),s.Ic(31,"solicita\xe7\xe3o "),s.Xb(),s.Xb(),s.Xb(),s.Yb(32,"nb-flip-card",17),s.Yb(33,"nb-card-front"),s.Yb(34,"nb-card"),s.Yb(35,"nb-card-header",18),s.Yb(36,"span"),s.Ic(37,"Status"),s.Xb(),s.Yb(38,"span"),s.Ic(39,"Dt. Desejada"),s.Xb(),s.Yb(40,"span"),s.Ic(41,"Valor Total"),s.Xb(),s.Xb(),s.Yb(42,"nb-card-body"),s.Yb(43,"nb-list"),s.Gc(44,ct,7,3,"nb-list-item",19),s.Xb(),s.Xb(),s.Yb(45,"nb-card-footer"),s.Yb(46,"button",20),s.Yb(47,"fa-icon",21),s.gc("click",(function(){return e.mudarPagina(1)})),s.Xb(),s.Xb(),s.Yb(48,"button",22),s.gc("click",(function(){return e.mudarPagina(e.pageNumber-2)})),s.Tb(49,"fa-icon",23),s.Xb(),s.Gc(50,it,2,1,"button",24),s.Yb(51,"button",25),s.Ic(52),s.Xb(),s.Gc(53,ot,2,1,"button",24),s.Yb(54,"button",22),s.gc("click",(function(){return e.mudarPagina(e.pageNumber+2)})),s.Tb(55,"fa-icon",23),s.Xb(),s.Yb(56,"button",22),s.gc("click",(function(){return e.mudarPagina(e.nOfPages)})),s.Tb(57,"fa-icon",23),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Yb(58,"nb-card-back"),s.Yb(59,"nb-card"),s.Yb(60,"nb-card-header",18),s.Yb(61,"span",26),s.Yb(62,"fa-icon",21),s.gc("click",(function(){return e.toggleView()})),s.Xb(),s.Xb(),s.Yb(63,"span",27),s.Ic(64),s.Xb(),s.Yb(65,"span",27),s.Ic(66),s.Xb(),s.Yb(67,"span",27),s.Ic(68),s.Xb(),s.Xb(),s.Yb(69,"nb-card-body"),s.Yb(70,"nb-list"),s.Gc(71,rt,7,3,"nb-list-item",28),s.Xb(),s.Xb(),s.Yb(72,"nb-card-footer"),s.Yb(73,"button",29),s.gc("click",(function(){return e.alterarStatus(e.solicitacaoFlipada._id)})),s.Tb(74,"fa-icon",23),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb()),2&t){var n=s.xc(18),a=s.xc(24);s.Fb(4),s.qc("formGroup",e.filtro),s.Fb(8),s.qc("ngForOf",e.status),s.Fb(4),s.qc("nbDatepicker",n),s.Fb(6),s.qc("nbDatepicker",a),s.Fb(5),s.qc("icon",e.faSearch),s.Fb(3),s.qc("icon",e.faPlus),s.Fb(2),s.qc("showToggleButton",!1)("flipped",e.revealed),s.Fb(12),s.qc("ngForOf",e.data),s.Fb(2),s.qc("disabled",1===e.pageNumber),s.Fb(1),s.qc("icon",e.faAngleDoubleLeft),s.Fb(1),s.qc("disabled",e.pageNumber<=2),s.Fb(1),s.qc("icon",e.faAngleLeft),s.Fb(1),s.qc("ngIf",e.pageNumber>1),s.Fb(2),s.Kc(" ",e.pageNumber," "),s.Fb(1),s.qc("ngIf",e.pageNumber<e.nOfPages),s.Fb(1),s.qc("disabled",e.pageNumber>=e.nOfPages-2),s.Fb(1),s.qc("icon",e.faAngleRight),s.Fb(1),s.qc("disabled",e.pageNumber===e.nOfPages),s.Fb(1),s.qc("icon",e.faAngleDoubleRight),s.Fb(5),s.qc("icon",e.faAngleLeft),s.Fb(2),s.Jc(e.solicitacaoFlipada&&e.obterValorStatusEnum(e.solicitacaoFlipada.status)),s.Fb(2),s.Jc(e.solicitacaoFlipada&&e.formatarData(e.solicitacaoFlipada.dataDesejada)),s.Fb(2),s.Kc("R$",e.solicitacaoFlipada&&e.solicitacaoFlipada.valorTotal.toFixed(2),""),s.Fb(3),s.qc("ngForOf",e.solicitacaoFlipada&&e.solicitacaoFlipada.produtos),s.Fb(2),s.qc("disabled",e.solicitacaoFlipada&&"ABERTO"!==e.solicitacaoFlipada.status),s.Fb(1),s.qc("icon",e.faTrash)}},directives:[I.p,I.s,I.o,G.z,G.o,G.g,I.db,G.n,G.f,I.ab,i.l,I.K,G.b,I.B,I.bb,I.q,I.l,x.a,j.d,I.G,I.r,I.T,i.m,I.n,I.U],styles:[".item[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.item[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1}.item[_ngcontent-%COMP%]:first-child{border-top:none}"]}),st);function ut(t,e){1&t&&s.Tb(0,"ngx-lista-solicitacao-desktop")}function lt(t,e){1&t&&s.Tb(0,"ngx-lista-solicitacao-mobile")}var dt,ft,ht,gt,pt=((dt=function(){function t(e){_classCallCheck(this,t),this.breakpointObserver=e,this.isHandset$=this.breakpointObserver.observe("(max-width: 599.99px) and (orientation: portrait), (max-width: 959.99px) and (orientation: landscape)").pipe(Object(o.a)((function(t){return t.matches})),Object(r.a)())}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||dt)(s.Sb(y))},dt.\u0275cmp=s.Mb({type:dt,selectors:[["ngx-lista-solicitacao"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["mobileList",""]],template:function(t,e){if(1&t&&(s.Gc(0,ut,1,0,"ngx-lista-solicitacao-desktop",0),s.lc(1,"async"),s.Gc(2,lt,1,0,"ng-template",null,1,s.Hc)),2&t){var n=s.xc(3);s.qc("ngIf",!1===s.mc(1,2,e.isHandset$))("ngIfElse",n)}},directives:[i.m,et,bt],pipes:[i.b],styles:[""]}),dt),mt=n("eW8b"),vt=((gt=function t(){_classCallCheck(this,t)}).\u0275mod=s.Qb({type:gt}),gt.\u0275inj=s.Pb({factory:function(t){return new(t||gt)},imports:[[i.c,I.V,I.t,i.c,I.t,G.u,G.h,I.m,I.L,j.g,I.C,mt.a,x.b,I.eb]]}),gt),kt=((ht=function t(){_classCallCheck(this,t)}).\u0275mod=s.Qb({type:ht}),ht.\u0275inj=s.Pb({factory:function(t){return new(t||ht)},imports:[[i.c,I.Db,I.t,G.u,G.h,I.m,I.L,j.g,I.C,mt.a,x.b,I.eb]]}),ht),Yt=((ft=function t(){_classCallCheck(this,t)}).\u0275mod=s.Qb({type:ft}),ft.\u0275inj=s.Pb({factory:function(t){return new(t||ft)},imports:[[i.c,vt,kt,j.g.forChild([{path:"",component:pt}])]]}),ft)},"8/IB":function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var a=n("MAky"),c=n("lJxs"),i=n("JIr8"),o=n("fXoL"),r=n("tk/3"),s=n("aceb"),b=function(){var t=function(){function t(e,n){_classCallCheck(this,t),this.http=e,this.toastrService=n,this.url="".concat(a.b,"/solicitacao-produto2"),this.urlProduto="".concat(a.b,"/produtos-solicitados")}return _createClass(t,[{key:"criarSolicitacao",value:function(t){return this.http.post("".concat(this.url,"/salvar"),t)}},{key:"buscarSolicitacoes",value:function(t,e,n){var a=this;return this.http.post("".concat(this.url,"/buscar"),{filtro:t,pageNumber:e,nPerPage:n}).pipe(Object(c.a)((function(t){return t})),Object(i.a)((function(t){return a.toastrService.danger(t.error.errors,"ERRO!"),[]})))}},{key:"countProdutos",value:function(t){return this.http.post("".concat(this.urlProduto,"/count"),{filtro:t})}},{key:"relProd",value:function(t){return this.http.post("".concat(this.urlProduto,"/relProd"),{frequencia:t})}},{key:"buscarSolicitacoesGeral",value:function(t,e,n){return this.http.post("".concat(this.url,"/buscarGeral"),{filtro:t,pageNumber:e,nPerPage:n})}},{key:"alterarStatus",value:function(t,e,n){return this.http.post("".concat(this.url,"/alterar-status"),{solicitacoes:t,status:e,cancelamento:n})}},{key:"usuariosSelect",value:function(){return this.http.get("".concat(a.b,"/user/select"))}},{key:"cancelar",value:function(t){return this.http.post("".concat(this.url,"/solicitarCancelamento"),{solicitacaoId:t})}},{key:"relatorio",value:function(){return this.http.get("".concat(this.url,"/relatorio"))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.cc(r.b),o.cc(s.pb))},t.\u0275prov=o.Ob({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},mrSG:function(t,e,n){"use strict";function a(t,e,n,a){var c,i=arguments.length,o=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,a);else for(var r=t.length-1;r>=0;r--)(c=t[r])&&(o=(i<3?c(o):i>3?c(e,n,o):c(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o}function c(t,e,n,a){return new(n||(n=Promise))((function(c,i){function o(t){try{s(a.next(t))}catch(e){i(e)}}function r(t){try{s(a.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?c(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,r)}s((a=a.apply(t,e||[])).next())}))}n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return c}))}}]);