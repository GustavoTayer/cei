function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}}function _createClass(a,e,o){return e&&_defineProperties(a.prototype,e),o&&_defineProperties(a,o),a}(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{wWZX:function(a,e,o){"use strict";o.r(e),o.d(e,"PerfilModule",(function(){return V}));var r=o("ofXK"),i=o("tyNb"),n=o("vI6V"),t=o("3Pt+"),c=o("v8Ly"),s=o("wd/R"),l=o("fXoL"),d=o("aceb");function b(a,e){1&a&&(l.Yb(0,"p",27),l.Ic(1," Campo obrigat\xf3rio! "),l.Xb())}function u(a,e){1&a&&(l.Yb(0,"p",27),l.Ic(1," Campo obrigat\xf3rio! "),l.Xb())}function p(a,e){1&a&&(l.Yb(0,"p",27),l.Ic(1," Favor digitar uma data v\xe1lida! "),l.Xb())}function f(a,e){if(1&a&&(l.Yb(0,"nb-option",28),l.Ic(1),l.Xb()),2&a){var o=e.$implicit;l.qc("value",o.k),l.Fb(1),l.Jc(o.v)}}function m(a,e){if(1&a&&(l.Yb(0,"nb-option",28),l.Ic(1),l.Xb()),2&a){var o=e.$implicit;l.qc("value",o.k),l.Fb(1),l.Jc(o.v)}}function v(a,e){if(1&a&&(l.Yb(0,"nb-option",28),l.Ic(1),l.Xb()),2&a){var o=e.$implicit;l.qc("value",o.k),l.Fb(1),l.Jc(o.v)}}function h(a,e){1&a&&(l.Yb(0,"p",27),l.Ic(1," Campo obrigat\xf3rio! "),l.Xb())}function q(a,e){1&a&&(l.Yb(0,"p",27),l.Ic(1," Senha precisar ter: uma letra mai\xfascula, uma letra min\xfascula, um n\xfamero, um caractere especial (@#$%) e tamanho entre 6-20. "),l.Xb())}function g(a,e){1&a&&(l.Yb(0,"p",27),l.Ic(1," Campo obrigat\xf3rio! "),l.Xb())}function Y(a,e){1&a&&(l.Yb(0,"p",27),l.Ic(1," As senhas est\xe3o diferentes "),l.Xb())}function X(a,e){if(1&a&&(l.Wb(0),l.Yb(1,"div",4),l.Yb(2,"label",5),l.Ic(3,"Senha "),l.Xb(),l.Tb(4,"input",29),l.Gc(5,h,2,0,"p",7),l.Gc(6,q,2,0,"p",7),l.Xb(),l.Yb(7,"div",4),l.Yb(8,"label",5),l.Ic(9,"confirmar senha "),l.Xb(),l.Tb(10,"input",30),l.Gc(11,g,2,0,"p",7),l.Gc(12,Y,2,0,"p",7),l.Xb(),l.Vb()),2&a){var o=l.kc();l.Fb(4),l.qc("status",o.verificaValidacaoCampo("password")?"danger":""),l.Fb(1),l.qc("ngIf",o.verificaValidacaoCampo("password","required")),l.Fb(1),l.qc("ngIf",o.verificaValidacaoCampo("password","senhaFraca")),l.Fb(4),l.qc("status",o.verificaValidacaoCampo("password_confirm")?"danger":""),l.Fb(1),l.qc("ngIf",o.verificaValidacaoCampo("password_confirm","required")),l.Fb(1),l.qc("ngIf",o.validateEqualPassword())}}var C,w,I,k=[{path:"",component:(C=function(){function a(e,o,r){_classCallCheck(this,a),this.router=e,this.fb=o,this.usuarioService=r,this.dados=this.fb.group({ativo:null,comunidade:null,email:null,equipe:null,hierarquia:null,name:[null,t.x.required],bd:[null,this.validarDataAniversario],coordenaEquipe:null,mudarSenha:null,password:null,password_confirm:null}),this.equipes=Object.keys(n.b).map((function(a){return{k:a,v:n.b[a]}})),this.comunidades=Object.keys(n.a).map((function(a){return{k:a,v:n.a[a]}})),this.hierarquia=Object.keys(n.c).map((function(a){return{k:a,v:n.c[a]}})),this.mudarSenha=!1}return _createClass(a,[{key:"ngOnInit",value:function(){var a=this;this.usuarioService.usuarioLogado().subscribe((function(e){a.dados.patchValue(Object.assign(Object.assign({},e),{bd:e.bd&&s(e.bd)})),a.dados.controls.email.disable(),a.dados.controls.hierarquia.disable(),a.dados.controls.coordenaEquipe.disable(),a.dados.controls.equipe.disable()})),this.dados.controls.mudarSenha.valueChanges.subscribe((function(e){e?(a.dados.controls.password.setValidators([t.x.required,a.validatePassword]),a.dados.controls.password_confirm.setValidators([t.x.required])):(a.dados.controls.password_confirm.clearValidators(),a.dados.controls.password.clearValidators()),a.mudarSenha=e}))}},{key:"validatePassword",value:function(a){return a.value&&a.value.match(/((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%]).{6,20})/)?null:{senhaFraca:{valid:!1}}}},{key:"validarDataAniversario",value:function(a){return a.value&&s().subtract(10,"years")<=a.value?{dataInvalida:!0}:null}},{key:"salvar",value:function(){var a=this;this.dados.valid&&this.usuarioService.atualizarUsuario(this.dados.value).subscribe((function(e){e&&a.router.navigate(["/pages/admin/usuarios"])}))}},{key:"validateEqualPassword",value:function(){return this.dados.value.mudarSenha&&this.dados.value.password!==this.dados.value.password_confirm}},{key:"verificaValidacaoCampo",value:function(a,e){return this.dados.controls[a].dirty&&(e?this.dados.controls[a].errors&&this.dados.controls[a].errors[e]:this.dados.controls[a].invalid)}}]),a}(),C.\u0275fac=function(a){return new(a||C)(l.Sb(i.c),l.Sb(t.c),l.Sb(c.a))},C.\u0275cmp=l.Mb({type:C,selectors:[["ngx-perfil"]],decls:53,vars:12,consts:[[3,"formGroup"],["nbButton","","size","small","ghost","","routerLink","/pages/admin/usuarios"],["icon","arrow-left"],[1,"row","form-group"],[1,"form-group","col-md-4"],["for","Nome","required","",1,"label"],["type","text","nbInput","","placeholder","Nome","fullWidth","","id","nome","formControlName","name",3,"status"],["class","caption status-danger",4,"ngIf"],["for","Email","required","",1,"label"],["type","email","nbInput","","placeholder","Email","fullWidth","","id","Email","formControlName","email",3,"status"],[1,"row"],[1,"label"],["fullWidth","","nbInput","","formControlName","bd",3,"status","nbDatepicker"],["format","DD/MM/YYYY"],["dp",""],["for","equipe","required","",1,"label"],["placeholder","Equipe","fullWidth","","formControlName","equipe"],[3,"value",4,"ngFor","ngForOf"],["labelPosition","start","formControlName","coordenaEquipe","disabled","true"],[1,"form-group","row"],["for","hierarquia","required","",1,"label"],["placeholder","Posi\xe7\xe3o","fullWidth","","formControlName","hierarquia"],["for","comunidade","required","",1,"label"],["placeholder","Comunidade","fullWidth","","formControlName","comunidade"],["formControlName","mudarSenha"],[4,"ngIf"],["nbButton","",3,"click"],[1,"caption","status-danger"],[3,"value"],["type","password","nbInput","","placeholder","Senha","fullWidth","","id","password","formControlName","password",3,"status"],["type","password","nbInput","","placeholder","Confirmar senha","fullWidth","","id","nome","formControlName","password_confirm",3,"status"]],template:function(a,e){if(1&a&&(l.Yb(0,"form",0),l.Yb(1,"nb-card"),l.Yb(2,"nb-card-header"),l.Yb(3,"button",1),l.Tb(4,"nb-icon",2),l.Xb(),l.Ic(5," Editar usu\xe1rio "),l.Xb(),l.Yb(6,"nb-card-body"),l.Yb(7,"div",3),l.Yb(8,"div",4),l.Yb(9,"label",5),l.Ic(10,"Nome "),l.Xb(),l.Tb(11,"input",6),l.Gc(12,b,2,0,"p",7),l.Xb(),l.Yb(13,"div",4),l.Yb(14,"label",8),l.Ic(15,"Email "),l.Xb(),l.Tb(16,"input",9),l.Gc(17,u,2,0,"p",7),l.Xb(),l.Xb(),l.Yb(18,"div",10),l.Yb(19,"div",4),l.Yb(20,"label",11),l.Ic(21,"Anivers\xe1rio:"),l.Xb(),l.Tb(22,"input",12),l.Tb(23,"nb-datepicker",13,14),l.Gc(25,p,2,0,"p",7),l.Xb(),l.Yb(26,"div",4),l.Yb(27,"label",15),l.Ic(28,"Equipe "),l.Xb(),l.Yb(29,"nb-select",16),l.Gc(30,f,2,2,"nb-option",17),l.Xb(),l.Xb(),l.Yb(31,"div",4),l.Yb(32,"nb-toggle",18),l.Ic(33,"Coordena Equipe?"),l.Xb(),l.Xb(),l.Xb(),l.Yb(34,"div",19),l.Yb(35,"div",4),l.Yb(36,"label",20),l.Ic(37,"Posi\xe7\xe3o "),l.Xb(),l.Yb(38,"nb-select",21),l.Gc(39,m,2,2,"nb-option",17),l.Xb(),l.Xb(),l.Yb(40,"div",4),l.Yb(41,"label",22),l.Ic(42,"Comunidade "),l.Xb(),l.Yb(43,"nb-select",23),l.Gc(44,v,2,2,"nb-option",17),l.Xb(),l.Xb(),l.Xb(),l.Yb(45,"div",19),l.Yb(46,"div",4),l.Yb(47,"nb-checkbox",24),l.Ic(48,"Mudar Senha"),l.Xb(),l.Xb(),l.Gc(49,X,13,6,"ng-container",25),l.Xb(),l.Xb(),l.Yb(50,"nb-card-footer"),l.Yb(51,"button",26),l.gc("click",(function(){return e.salvar()})),l.Ic(52,"Salvar"),l.Xb(),l.Xb(),l.Xb(),l.Xb()),2&a){var o=l.xc(24);l.qc("formGroup",e.dados),l.Fb(11),l.qc("status",e.verificaValidacaoCampo("name")?"danger":""),l.Fb(1),l.qc("ngIf",e.verificaValidacaoCampo("name","required")),l.Fb(4),l.qc("status",e.verificaValidacaoCampo("email")?"danger":""),l.Fb(1),l.qc("ngIf",e.verificaValidacaoCampo("email","required")),l.Fb(5),l.qc("status",e.verificaValidacaoCampo("bd")?"danger":"")("nbDatepicker",o),l.Fb(3),l.qc("ngIf",e.verificaValidacaoCampo("bd","dataInvalida")),l.Fb(5),l.qc("ngForOf",e.equipes),l.Fb(9),l.qc("ngForOf",e.hierarquia),l.Fb(5),l.qc("ngForOf",e.comunidades),l.Fb(5),l.qc("ngIf",e.mudarSenha)}},directives:[t.z,t.o,t.g,d.u,d.x,d.q,i.d,d.M,d.t,d.P,t.b,t.n,t.f,r.m,d.G,d.F,d.jb,r.l,d.wb,d.A,d.v,d.gb],styles:[""]}),C)}],y=((w=function a(){_classCallCheck(this,a)}).\u0275mod=l.Qb({type:w}),w.\u0275inj=l.Pb({factory:function(a){return new(a||w)},imports:[[i.g.forChild(k)],i.g]}),w),F=o("eW8b"),V=((I=function a(){_classCallCheck(this,a)}).\u0275mod=l.Qb({type:I}),I.\u0275inj=l.Pb({factory:function(a){return new(a||I)},imports:[[r.c,y,t.u,t.h,d.y,d.O,d.Q,d.kb,d.xb,d.r,d.H,F.a,d.B]]}),I)}}]);